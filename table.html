<!DOCTYPE html>
<html lang="tr">
<head>
	<title>POSULA | Masa</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap-5/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/alertifyJS/alertify.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" href="vendor/keyboard/source.css">
<!--===============================================================================================-->

<style>
html, body {
  height: 100%;
  margin: 0;
}

.nowrap-2 {
    border-radius: 6px;
    background-color: transparent;
    border: 1px solid gray;
    max-width: 99%;
    padding: 2px;
	margin-top: 3px;
    margin-bottom: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
	font-size: small;
}

div {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
}
div::-webkit-scrollbar { 
    display: none;  /* Safari and Chrome */
}

#ortasag{
}

.urunbtn{
	padding-top:5px;
	background-color: #fafafa;
	box-shadow: 0px 0px 6px rgba(0,0,0,0.3);
}

.am_urunbtn{
	padding-top:5px;
	background-color: #fafafa;
	box-shadow: 0px 0px 6px rgba(0,0,0,0.3);
}

.grupbtn{
	box-shadow: 0px 0px 6px rgba(0,0,0,0.3);
}

.grupbtn:hover{
	color: white !important;
}

.grupbtnkapat{
	box-shadow: 0px 0px 6px rgba(0,0,0,0.3);
}

.grupbtn1{
	border: 1px solid lightgrey;
	box-shadow: 0px 0px 3px rgba(0,0,0,0.3);
}

.grupbtn1:hover{
	color: white !important;
}

.urunbtn:active {
	transform: scale(0.98);
	box-shadow: 3px 2px 22px 1px rgba(0, 0, 0, 0.24);
	background-color: #14a941;
}

.btn:active {
	transform: scale(0.95);
	box-shadow: 3px 2px 22px 1px rgba(0, 0, 0, 0.466);
}

.full-height {
  height: 100%;
  width: 100%;
}	

.full-height2 {
  height: 100%;
  width: 100%;
  z-index: 999999;
  background-color: #00000041;
  position: fixed;
  top: 0;
  left: 0;
  text-align: center !important;
  display: none;
}

.alertify-notifier {
            color: #fff;
        }

.loading-bar{
	display: none;
	position: fixed;
	z-index: 1000;
	left:0;
	top:0;
	width: 100%;
	height: 100%;
	background-image: url('images/loading.gif');
	background-position: 50% 50%;
	background-color: rgba(255,255,255,0.8);
	background-repeat: no-repeat;
}

body.loading{
	overflow: hidden;
}

body.loading .loading-bar{
	display: block;
}



.okc-bar{
	display: none;
	position: fixed;
	z-index: 99999;
	left:0;
	top:0;
	width: 100%;
	height: 100%;
	background-image: url('images/loading.gif');
	background-position: 50% 50%;
	background-color: rgba(255,255,255,0.9);
	background-repeat: no-repeat;
	align-items: center;
	text-align: center;
}

body.okc{
	overflow: hidden;
}

body.okc .okc-bar{
	display: block;
}



body {
	background: url("images/bg.jpg");
	height: 100%;

	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
}






*,
	*::before,
	*::after {
	box-sizing: border-box;
	}

	.main{
		margin-top:-15px !important;
	}

	.hamburger {
	position: relative;
	width: 30px;
	height: 30px;
	display: inline-flex;
	flex-direction: column;
	justify-content: space-between;
	cursor: pointer;
	padding: 3px;
	}
	.hamburger:before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	border-radius: 4px;
	background: rgba(108,117,125);
	transform: rotate(0deg);
	transition: all 0.4s cubic-bezier(0.54, -0.1, 0.57, 0.57);
	}
	.hamburger .hamburger-input {
	position: absolute;
	opacity: 0;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
	cursor: pointer;
	}
	.hamburger .hamburger-line {
	width: 100%;
	background: #fff;
	height: 2px;
	display: block;
	border-radius: 6px;
	transition: transform 0.4s cubic-bezier(0.54, -0.81, 0.57, 0.57);
	position: relative;
	}
	.hamburger .hamburger-line.first, .hamburger .hamburger-line.third {
	width: 50%;
	}
	.hamburger .hamburger-line.third {
	margin-left: 50%;
	transform-origin: left;
	}

	.menu-button-wrapper {
	position: relative;
	display: inline-block;
	}
	.menu-button-wrapper .item-list {
	position: absolute;
	top:7px;
	transform: translateX(-50%) scale(0);
	transform-origin: center;
	transition: all 0.4s cubic-bezier(0.54, -0.1, 0.57, 0.57);
	background-color: transparent;
	color: #fff;
	width: 420px;
	left: -215px;
	padding-top: 0px 0;
	padding-left: 0px;
	padding-right: 0px;
	text-align: left;
	border-radius: 10px;
	font-weight: 300;
	opacity: 0;
	user-select: none;
	z-index: 9999;
	font-family: Calibri;
  	display: inline-block;
	}
	.menu-button-wrapper .item-list div {
	padding: 10px 0px;
	margin-top: 1px;
	margin-bottom: 1px;
	margin-left:2px;
	cursor: pointer;
	border-radius: 10px;
	background: rgba(108,117,125);
	color: whitesmoke;
	font-weight: 600;
	display: inline-block;
	text-align: center;
	min-width:57px;
	max-height: 43px;
	}
	.menu-button-wrapper .menu-button {
	position: absolute;
	width: 90px;
	height: 70px;
	left: 0;
	z-index: 999;
	opacity: 0;
	cursor: pointer;
	}

	.menu-button:checked ~ .item-list {
	transform: translateX(-50%) scale(1);
	border-radius: 10px;
	opacity: 1;
	user-select: auto;
	}
	.menu-button:checked ~ .icon-wrapper .hamburger-line.second {
	transform: rotate(-45deg);
	}
	.menu-button:checked ~ .icon-wrapper .hamburger-line.first {
	transform: translate(2px, 8px) rotate(-135deg);
	}
	.menu-button:checked ~ .icon-wrapper .hamburger-line.third {
	transform: translate(10px, -2px) rotate(-138deg);
	}
	.menu-button:checked ~ .icon-wrapper .hamburger:before {
	transform: rotate(45deg);
	}



	input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
               -webkit-appearance: none;
                margin: 0;
        }
 
        input[type=number] {
            -moz-appearance: textfield;
        }


.okc-bar{
	display: none;
	position: fixed;
	z-index: 1000;
	left:0;
	top:0;
	width: 100%;
	height: 100%;
	background-image: url('images/loading.gif');
	background-position: 50% 50%;
	background-color: rgba(255,255,255,0.8);
	background-repeat: no-repeat;
	align-items: center;
	text-align: center;
}

body.okc{
	overflow: hidden;
}

body.okc .okc-bar{
	display: block;
}
</style>
</head>
<body>

	<div class="modal fade" id="adeturunModal" tabindex="-1" aria-labelledby="adeturunModalLabel" style="z-index: 99999;">
		<div class="modal-dialog modal-sm modal-dialog-centered" style="max-width:230px !important;width:230px;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="adeturun_baslik" class="modal-title">Adet giriniz</h6>
			</div>
			<div class="modal-body">
				<div class="row text-center" style="max-width: 220px; width:220px;">
					<input class="form-control text-center" type="text" placeholder="ADET" readonly id="m_adeturun" style="width:210px; max-width: 210px; margin-left: 5px; box-shadow: 0px 0px 8px #dbdbdb; background-color: white;">
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`1`; return false;">
							1
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`2`; return false;">
							2
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`3`; return false;">
							3
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`4`; return false;">
							4
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`5`; return false;">
							5
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`6`; return false;">
							6
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`7`; return false;">
							7
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`8`; return false;">
							8
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`9`; return false;">
							9
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`0`; return false;">
							0
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value+=`.`; return false;">
							,
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adeturun').value=``; return false;">
							SİL
						</button>
					</div>
					
					<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-12 px-0">
						<button data-bs-dismiss="modal" class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 208px; width: 208px; max-width: 208px; box-shadow: 0px 0px 6px #adadad;" onclick="adeturungiris();">
							TAMAM
						</a>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="fiyaturunModal" tabindex="-1" aria-labelledby="fiyaturunModalLabel" style="z-index: 99999;">
		<div class="modal-dialog modal-sm modal-dialog-centered" style="max-width:230px !important;width:230px;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="fiyaturun_baslik" class="modal-title">Fiyat giriniz</h6>
			</div>
			<div class="modal-body">
				<div class="row text-center" style="max-width: 220px; width:220px;">
					<input class="form-control text-center" type="text" placeholder="FİYAT" readonly id="m_adetfiyat" style="width:210px; max-width: 210px; margin-left: 5px; box-shadow: 0px 0px 8px #dbdbdb; background-color: white;">
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`1`; return false;">
							1
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`2`; return false;">
							2
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`3`; return false;">
							3
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`4`; return false;">
							4
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`5`; return false;">
							5
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`6`; return false;">
							6
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`7`; return false;">
							7
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`8`; return false;">
							8
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`9`; return false;">
							9
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`0`; return false;">
							0
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value+=`.`; return false;">
							,
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetfiyat').value=``; return false;">
							SİL
						</button>
					</div>
					
					<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-12 px-0">
						<button data-bs-dismiss="modal" class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 208px; width: 208px; max-width: 208px; box-shadow: 0px 0px 6px #adadad;" onclick="adetfiyatgiris();">
							TAMAM
						</a>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="porsiyonModal" tabindex="-1" aria-labelledby="porsiyonModalLabel" aria-hidden="true" role="dialog">
		<div class="modal-dialog modal-dialog-centered">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="porsiyon_baslik" class="modal-title">Porsiyon seçiniz</h6>
			</div>
			<div class="modal-body">
				<div class="row mt-3" style="width: 100%;">
					<div class="col-12">
						<div class="row m-2" style="width: 100%;" id="m_porsiyoncard">
							<div class="col-3 mb-2 p-1">
								<div class="container text-center" style="min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;" onclick="porsiyonuygula(`ceyrek`);">Çeyrek</div>
							</div>
							<div class="col-3 mb-2 p-1">
								<div class="container text-center" style="min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;" onclick="porsiyonuygula(`yarim`);">Yarım</div>
							</div>
							<div class="col-3 mb-2 p-1">
								<div class="container text-center" style="min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;" onclick="porsiyonuygula(`birbucuk`);">Bir Buçuk</div>
							</div>
							<div class="col-3 mb-2 p-1">
								<div class="container text-center" style="min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;" onclick="porsiyonuygula(`duble`);">Duble</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="uruniskontoModal" tabindex="-1" aria-labelledby="uruniskontoModalLabel">
		<div class="modal-dialog modal-dialog-centered">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="uruniskonto_baslik" class="modal-title">İndirim seçiniz</h6>
			</div>
			<div class="modal-body">
				<div class="row mt-3" style="width: 100%;">
					<div class="col-12">
						<div class="row m-2" style="width: 100%;" id="m_uruniskontocard">

						</div>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	
	<div class="modal fade" id="adetModal" tabindex="-1" aria-labelledby="adetModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-sm modal-dialog-centered" style="max-width:250px !important;width:250px;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="adet_baslik" class="modal-title">Adet giriniz</h6>
			</div>
			<div class="modal-body">
				<div class="row text-center m-0 p-0 pt-1" style="max-width: 215px; width:220px;">

					<input class="form-control text-center" type="text" placeholder="ADET" readonly id="m_adet" style="width:210px; max-width: 210px; margin-left: 5px; box-shadow: 0px 0px 8px #dbdbdb; background-color: white;">
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`1`; return false;">
							1
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`2`; return false;">
							2
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`3`; return false;">
							3
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`4`; return false;">
							4
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`5`; return false;">
							5
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`6`; return false;">
							6
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`7`; return false;">
							7
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`8`; return false;">
							8
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`9`; return false;">
							9
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`0`; return false;">
							0
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value+=`.`; return false;">
							,
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adet').value=``; return false;">
							SİL
						</button>
					</div>
					
					<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-12 px-0">
						<button data-bs-dismiss="modal" class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 208px; width: 208px; max-width: 208px; box-shadow: 0px 0px 6px #adadad;" onclick="adetgiris();">
							TAMAM
						</a>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>



	<div class="modal fade" id="adetcekbolModal" tabindex="-1" aria-labelledby="adetModalLabel" aria-hidden="true" style="z-index: 9999;">
		<div class="modal-dialog modal-sm modal-dialog-centered" style="max-width:230px !important;width:230px;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="adetcekbol_baslik" class="modal-title">Tutar giriniz</h6>
			</div>
			<div class="modal-body">
				<div class="row text-center" style="max-width: 220px; width:220px;">
					<input class="form-control text-center" type="text" placeholder="TUTAR" id="m_adetcekbol" style="width:210px; max-width: 210px; margin-left: 5px; box-shadow: 0px 0px 8px #dbdbdb; background-color: white;">
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`1`); return false;">
							1
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`2`); return false;">
							2
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`3`); return false;">
							3
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`4`); return false;">
							4
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`5`); return false;">
							5
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`6`); return false;">
							6
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`7`); return false;">
							7
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`8`); return false;">
							8
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`9`); return false;">
							9
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="adetyaz(`0`); return false;">
							0
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="if (document.getElementById('m_adetcekbol').value==document.getElementById('kalanhesaptxt').value) document.getElementById('m_adetcekbol').value='.'; else document.getElementById('m_adetcekbol').value+=`.`; return false;">
							,
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('m_adetcekbol').value=``; return false;">
							SİL
						</button>
					</div>
					
					<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-12 px-0">
						<button data-bs-dismiss="modal" class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 208px; width: 208px; max-width: 208px; box-shadow: 0px 0px 6px #adadad;" onclick="adetgiriscekbol();">
							TAMAM
						</a>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="keyboardModal" tabindex="-1" aria-labelledby="keyboardModalLabel" style="z-index: 99999;">
		<div class="modal-dialog modal-xl" id="klavyebody">
		  <div class="modal-content m-0 p-0">
			<div class="modal-body m-0 p-0">
				<div class="simple-keyboard"></div>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="urunModal" tabindex="-1" aria-labelledby="urunModalLabel">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="urun_baslik" class="modal-title">Ürün detayı</h6>
			</div>
			<div class="modal-body">
				<input type="password" style="display: none;" id="recipient">
				<div class="row m-0 mt-3" style="width:100%;" id="m_urunsatir">
					
				</div>
				<div class="row m-0 mt-3 text-right" style="width: 100%; text-align: right;" id="urunfooter">
					<div class="col-12" style="width: 100%; text-align: right;">
						<button class="btn btn-outline-success" style="display: inline-block; width:80px; text-align: right;" onclick="urunguncelle(document.getElementById('recipient').value);">Tamam</button>	
						<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#urunModal`).modal(`hide`);'>Kapat</button>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>


	<div class="modal fade" id="urunsilModal" tabindex="-1" aria-labelledby="urunsilModalLabel" style="z-index: 99998;">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="urunsil_baslik" class="modal-title">İptal sebebi giriniz</h6>
			</div>
			<div class="modal-body">
				<input type="password" style="display: none;" id="urunsil_recipient">

				<div class="row m-0 mt-3" style="width: 100%;">
					<div class="col-12">
					
					
						<input type="text" class="form-control" id="m_iptalnotutxt">
						<div class="row m-0 mt-2" style="width: 100%;font-weight: 600; text-align:center; vertical-align: middle;" id="m_iptalnotucard">

						</div>
						<div class="row m-0 mt-3 text-right" style="width: 100%; text-align: right;" id="urunfooter">
							<div class="col-12" style="width: 100%; text-align: right;">
								
								<button class="btn btn-outline-danger" style="display: inline-block; width:80px; text-align: center;" onclick="urunsil();">Sil</button>
								<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#urunsilModal`).modal(`hide`);'>Kapat</button>
							</div>
						</div>
					
					
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>


	<div class="modal fade" id="urunnotuModal" tabindex="-1" aria-labelledby="urunnotuModalLabel">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="urunnotu_baslik" class="modal-title">Ürün notu giriniz</h6>
			</div>
			<div class="modal-body">
				<input type="password" style="display: none;" id="urunnotu_recipient">

				<div class="row m-0 mt-3" style="width: 100%;">
					<div class="col-12">
				
			
						<input type="text" class="form-control" id="m_urunnotutxt">
						<div class="row m-0 mt-2" style="width: 100%; font-weight: 600; text-align:center; vertical-align: middle;" id="m_urunnotucard">

						</div>
						
						  
					</div>
				</div>
				<div class="row m-0 mt-3 text-right" style="width: 100%; text-align: right;">
					<div class="col-12" style="width: 100%; text-align: right;">
						<button class="btn btn-outline-success" style="display: inline-block; width:80px; text-align: right;" onclick="urunnotuekle(document.getElementById('urunnotu_recipient').value);">Tamam</button>	
						<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#urunnotuModal`).modal(`hide`);'>Kapat</button>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>


	<div class="modal fade" id="kupurModal" tabindex="-1" aria-labelledby="kupurModalLabel">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content" style="max-height:800px; min-width:712px;">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="kupur_baslik" class="modal-title">Para Üstü</h6>
			</div>
			<div class="modal-body py-1">
				<input type="password" style="display: none;" id="kupur_recipient">



				
				<div class="row m-0 mt-0" style="width: 100%;">
					<div class="col-4 text-center">
						<h3 style="border-bottom:1px solid black; margin:0px;">Alınan</h3>
						<h1 style="font-weight:600; display: none; margin:0px;" id="alinanucret">0</h1>
						<h1 style="font-weight:600; margin:0px;" id="alinanucret_gorunen">0</h1>
						<div style="margin-top:2px;" id="small1_div">
							<small id="alinanucret_doviz"></small>
						</div>
						
					</div>
					<div class="col-4 text-center">
						<h3 style="border-bottom:1px solid black; margin:0px;">Para Üstü</h3>
						<h1 style="font-weight:600; display: none; margin:0px;" id="paraustu">0</h1>
						<h1 style="font-weight:600;margin:0px;" id="paraustu_gorunen">0</h1>
						<div style="margin-top:2px;" id="small2_div">
							<small id="paraustu_doviz"></small>
						</div>
					</div>
					<div class="col-4 text-center">
						<div class="row" style="height:100%;">
							<div class="col-4 py-0 px-1">
								<button class="btn btn-success" id="kupur_tl_btn" style="width: 100%; height:100%;" onclick="kupur_parabirimi('tl');"><i class="fa fa-try fa-2x" aria-hidden="true"></i></button>
							</div>
							<div class="col-4 py-0 px-1">
								<button class="btn btn-light text-secondary" id="kupur_usd_btn" style="width: 100%; height:100%;" onclick="kupur_parabirimi('usd');"><i class="fa fa-usd fa-2x" aria-hidden="true"></i></button>
							</div>
							<div class="col-4 py-0 px-1">
								<button class="btn btn-light text-secondary" id="kupur_eur_btn" style="width: 100%; height:100%;" onclick="kupur_parabirimi('eur');"><i class="fa fa-eur fa-2x" aria-hidden="true"></i></button>
							</div>
						</div>
						
					</div>
				</div>

				<div class="row m-0 mt-1" style="width: 100%;" id="kupur_tl_div">
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/tl/5.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle('5');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/tl/10.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle('10');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/tl/20.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle('20');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/tl/50.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle('50');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/tl/100.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle('100');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/tl/200.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle('200');">
					</div>
				</div>


				<div class="row m-0 mt-1" style="width: 100%; display: none;" id="kupur_usd_div">
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/usd/1.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_usd('1');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/usd/5.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_usd('5');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/usd/10.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_usd('10');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/usd/20.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_usd('20');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/usd/50.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_usd('50');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/usd/100.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_usd('100');">
					</div>
				</div>


				<div class="row m-0 mt-1" style="width: 100%; display: none;" id="kupur_eur_div">
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/eur/1.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_eur('1');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/eur/5.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_eur('5');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/eur/10.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_eur('10');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/eur/20.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_eur('20');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/eur/50.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_eur('50');">
					</div>
					<div class="col-6 text-center px-3 py-2">
						<img src="images/banknot/eur/100.jpg" style="width: 100%; box-shadow: 0px 0px 8px 2px #666;" onclick="ucretekle_eur('100');">
					</div>
				</div>

			</div>
			<div class="modal-footer px-2 py-1">

				<div class="row" style="width: 100%;">
					<div class="col-4 justify-content-start">
						<div class="input-group" id="doviz_div" style="display: none;">
							<span class="input-group-text" id="doviz_p"></span>
							<input type="number" id="doviz_input" onchange="kurkaydet();" class="form-control" value="" style="max-width: 70px; text-align: right; font-weight: 600;border-right: 0px solid white !important; padding-right: 4px;">
							<span class="input-group-text bg-white" style="padding-left: 0px; text-align: left; font-weight: 600;"> ₺</span>
							<button class="btn btn-light" style="border:1px solid #ccc; color: rgba(25, 135, 84, 0.8); min-width: 60px;" onclick="kurgetir();" type="button" id="button-addon2"><span class="fa fa-refresh"></span></button>
						  </div>
					</div>
					<div class="col-8" style="text-align: right;">
						<button id="btn1" class="btn btn-primary text-center" style="display: inline-block; text-align: center;"  data-bs-dismiss="modal" onclick="hesapkapat(document.getElementById(`kupur_recipient`).value)">Ödemeyi Tamamla</button>	
						<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='ucretekle(`0`);'>Sıfırla</button>
						<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#kupurModal`).modal(`hide`);'>İptal</button>
					</div>
				</div>

				


				
				
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="iskontoModal" tabindex="-1" aria-labelledby="iskontoModalLabel">
		<div class="modal-dialog modal-dialog-centered">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="iskonto_baslik" class="modal-title">İndirim seçiniz</h6>
			</div>
			<div class="modal-body">
				<div class="row mt-3" style="width: 100%;">
					<div class="col-12">
						<div class="row m-2" style="width: 100%;" id="m_iskontocard">

						</div>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	

	<div class="modal fade" id="soiskontoModal" tabindex="-1" aria-labelledby="soiskontoModalLabel" style="z-index: 99999;">
		<div class="modal-dialog modal-dialog-centered">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="soiskonto_baslik" class="modal-title">İndirim seçiniz</h6>
			</div>
			<div class="modal-body">
				<div class="row mt-3" style="width: 100%;">
					<div class="col-12">
						<div class="row m-2" style="width: 100%;" id="m_soiskontocard">

						</div>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="aciklamaModal" tabindex="-1" aria-labelledby="aciklamaModalLabel">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="aciklama_baslik" class="modal-title">Açıklama giriniz</h6>
				</div>
			
				<div class="modal-body">
					<div class="row mt-3" style="width: 100%;">
						<div class="col-12">
							<input type="text" class="form-control" id="ac_aciklama">
						</div>
					</div>
				</div>
				<div class="modal-footer text-right px-2">
					
					<button id="btn1" class="btn btn-primary text-center" style="display: inline-block; text-align: center;"  data-bs-dismiss="modal" onclick="aciklamaekle();">Kaydet</button>	
					<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#aciklamaModal`).modal(`hide`);'>Kapat</button>
					
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="uyeiptalModal" tabindex="-1" aria-labelledby="uyeiptalModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="uyeiptal_baslik" class="modal-title">Cari/Üye Seçimi</h6>
			</div>
			<div class="modal-body">
				<div class="row mt-3" style="width: 100%;">
					<div class="col-12">
						<div class="row m-2" style="width: 100%;">
							<h5>Cari/Üye seçimini iptal etmek istediğinizden emin misiniz?</h5>

						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer text-right px-2">
				<button id="" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey; min-width:70px;"  data-bs-dismiss="modal" onclick="uyeiptal();">Evet</button>
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey; min-width:70px;' data-bs-dismiss="modal">Hayır</button>
				
			</div>
		  </div>
		</div>
	</div>


	<div class="modal fade" id="cekbolModal" tabindex="-1" aria-labelledby="cekbolModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="cekbol_baslik" class="modal-title">Detaylı ödeme</h6>
			</div>
			<input type="text" id="kalanhesaptxt" style="display: none;">
			
			<div class="modal-body pt-0 p-0">
				<div class="row p-0 m-0" style="width:100%;">
					<table class="table table-responsive-sm table-responsive-xs" style="width:100%;">
						<thead>
							<tr>
								<th style="width:70%;">
									Ödeme Türü
								</th>
								<th style="width:30%; text-align: right;">
									Tutar
								</th>
							</tr>
						</thead>
						<tbody id="cekboltbl">
							
						</tbody>
					</table>
				</div>

				
			</div>
			<div class="modal-footer text-right px-2">
				
				<button id="hesapkapatbtn" disabled class="btn btn-outline-success text-center" style="display: inline-block; width:180px; text-align: center;" onclick="hesapkapatcekbol();">Hesabı Kapat</button>	
				<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#cekbolModal`).modal(`hide`);'>Kapat</button>
				
			</div>
		  </div>
		</div>
	</div>


	
	<div class="modal fade" id="cariModal" tabindex="-1" aria-labelledby="cariModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="cariuye_baslik" class="modal-title">Cari/Üye Seçimi</h6>
			</div>
			
			<div class="modal-body pt-0 p-0">
				<div class="row p-0 m-0" style="width:100%;">
					<div class="input-group my-2">
						<input type="text" class="form-control" placeholder="Cari/Üye aramak için yazınız" aria-describedby="button-addon2" id="cariaratxt">
						<button class="btn btn-outline-secondary" type="button" id="button-addon2" onclick="cariara();">Ara</button>
					  </div>
					<table class="table table-striped table-responsive-sm table-responsive-xs" style="width:100%;">
						<thead>
							<tr>
								<th style="width: 15%;">
									Cari No
								</th>
								<th style="width: 45%;">
									Cari Adı
								</th>
								<th style="width: 15%; text-align:right;">
									Bakiye
								</th>
								<th style="width:25%;">

								</th>
							</tr>
						</thead>
						<tbody id="caritbl">
							
						</tbody>
					</table>
				</div>

				
			</div>
			<div class="modal-footer text-right px-2">
				<button id="carieklebtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;"  data-bs-toggle="modal" data-bs-target="#cariekleModal">Yeni Cari</button>
				<button id="cariiptalbtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;"  data-bs-dismiss="modal" onclick="uyeiptal();">Cari Seçimini İptal Et</button>
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' data-bs-dismiss="modal">Kapat</button>
				
			</div>
		  </div>
		</div>
	</div>


	<div class="modal fade" id="faturalisteModal" tabindex="-1" aria-labelledby="faturalisteModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="faturaliste_baslik" class="modal-title">Fatura Listesi</h6>
			</div>
			
			<div class="modal-body">
				<div class="row mx-0 px-0" style="width:100%;">
					<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-6">
						<input type="date" class="form-control" id="faturaliste_baslangic">
					</div>
					<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-6">
						<input type="date" class="form-control" id="faturaliste_bitis">
					</div>
					<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-6">
						<input type="text" class="form-control" placeholder="Fatura aramak için yazınız" id="faturaaratxt">
					</div>
					<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-6">
						<button class="btn btn-outline-secondary" type="button" style="width: 100%;" id="faturalistegetirbtn" onclick="faturaara();">Faturaları Listele</button>
					</div>
						
					  
					<table class="table table-striped table-responsive-sm table-responsive-xs" style="width:100%;">
						<thead>
							<tr>
								<th style="width: 10%;">
									Tarih
								</th>
								<th style="width: 10%;">
									Fatura No
								</th>
								<th style="width: 40%;">
									Cari Adı
								</th>
								<th style="width: 15%; text-align:right;">
									Tutar
								</th>
								<th style="width:25%;">

								</th>
							</tr>
						</thead>
						<tbody id="faturalistetbl">
							
						</tbody>
					</table>
				</div>

				
			</div>
			<div class="modal-footer text-right px-2">
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' data-bs-dismiss="modal">Kapat</button>
			</div>
		  </div>
		</div>
	</div>
	

	<div class="modal fade" id="faturadetayModal" tabindex="-1" aria-labelledby="faturadetayModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="width: 87mm !important; max-width: 87mm !important;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="faturadetay_baslik" class="modal-title">Fatura Önizleme</h6>
			</div>
			
			<div class="modal-body">
				<div class="row mx-0 px-0" style="width:100%;">
					<div class="col-12" id="faturadetaydiv">
						
					</div>
					
				
				</div>
			</div>
			<div class="modal-footer text-right px-2">
				<button id="carieklebtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;"  onclick="faturatekraryazdir();">Yazdır</button>
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick="$('#faturadetayModal').modal('hide');">Kapat</button>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="faturaModal" tabindex="-1" aria-labelledby="faturaModalLabel" aria-hidden="true">
		<div class="modal-dialog modal modal-dialog-centered">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="cariuye_baslik" class="modal-title">Fatura İşlemleri</h6>
			</div>
			
			<div class="modal-body pt-0 p-0">

				<div class="row p-0 m-0 mt-3" style="width:100%;" id="fatura_div">
					<div class="col-3">
						<h3>Cari</h3>
						<h3>Tutar</h3>
					</div>
					<div class="col-9">
						<h3 id="soru_cari"></h3>
						<h3 id="soru_tutar"></h3>
						
					</div>
					<p id="soru_uyari1" style="display:none; margin-bottom:3px; margin-top:10px; font-size:22px;">Bu cari hesaba fatura düzenleyebilmek için zorunlu bilgilerin girilmesi gerekmektedir.</p>
					<p id="soru_uyari2">(Firma Ünvanı, Vergi Dairesi, Vergi Numarası, İl, İlçe)</p>
					
				</div>

				<div class="row p-0 m-0 mt-3" style="width:100%; display:none;" id="fatura_div2">
					<div class="col-3">
						<div class="form-floating mb-2">
							<input type="text" class="form-control" id="f_seri" disabled placeholder="Fatura Seri" style="background-color: #fff;">
							<label for="f_seri">Fatura Seri</label>
						</div>
					</div>
					<div class="col-5">
						<div class="form-floating mb-2">
							<input type="number" class="form-control" id="f_sira" disabled placeholder="Fatura Sıra" style="background-color: #fff;">
							<label for="f_sira">Fatura Sıra</label>
						</div>
					</div>
					<div class="col-4">
						<div class="form-floating mb-2">
							<input type="number" class="form-control" id="f_carino" disabled placeholder="Cari No" style="background-color: #fff;">
							<label for="f_carino">Cari No</label>
						</div>
					</div>
					<div class="col-12">
						<div class="form-floating mb-2">
							<input type="text" class="form-control" id="f_cariadi" placeholder="Cari Adı">
							<label for="f_cariadi">Cari Adı</label>
						</div>
					</div>
					<div class="col-6">
						<div class="form-floating mb-2">
							<input type="number" class="form-control" id="f_vkn" placeholder="TCKN/VKN" style="background-color: #fff;">
							<label for="f_vkn">TCKN/VKN</label>
						</div>
					</div>
					<div class="col-6">
						<div class="form-floating mb-2">
							<input type="text" class="form-control" id="f_vd" placeholder="Vergi Dairesi">
							<label for="f_vd">Vergi Dairesi</label>
						</div>
					</div>
					<div class="col-6">
						<div class="form-floating mb-2">
							<input type="text" class="form-control" id="f_tel" placeholder="Cep Telefonu" style="background-color: #fff;">
							<label for="f_tel">Cep Telefonu</label>
						</div>
					</div>
					<div class="col-6">
						<div class="form-floating mb-2">
							<input type="text" class="form-control" id="f_mail" placeholder="E-Posta Adresi">
							<label for="f_mail">E-Posta Adresi</label>
						</div>
					</div>
				</div>


				<div class="row p-0 m-0" style="width:100%; display:none;">

					<div class="input-group my-2">
						<input type="text" class="form-control" placeholder="Cari/Üye aramak için yazınız" aria-describedby="button-addon2" id="f_cariaratxt">
						<button class="btn btn-outline-secondary" type="button" id="button-addon2" onclick="f_cariara();">Ara</button>
					</div>
					<table class="table table-striped table-responsive-sm table-responsive-xs" style="width:100%;">
						<thead>
							<tr>
								<th style="width: 15%;">
									Cari No
								</th>
								<th style="width: 50%;">
									Cari Adı
								</th>
								<th style="width: 15%; text-align:right;">
									Bakiye
								</th>
								<th style="width:20%;">

								</th>
							</tr>
						</thead>
						<tbody id="f_caritbl">
							
						</tbody>
					</table>
				</div>

				
			</div>
			<div class="modal-footer text-right px-2">
				<button id="f_faturalistebtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;" data-bs-toggle="modal" data-bs-target="#faturalisteModal">Fatura Listesi</button>
				<button id="faturayazdirbtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;" onclick="if (document.getElementById('musteri').dataset.carino == '0'){alertify.confirm('UYARI', 'Cari/Üye seçimi yapılmadığı için fatura Nihai Tüketici olarak düzenlenecektir, emin misiniz?', function(){ faturayazdir();}, function(){ });} else faturayazdir();">Fatura Yazdır</button>
				<button id="f_carieklebtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;" data-bs-toggle="modal" data-bs-target="#cariModal">Cari Seç</button>
				<button id="f_cariduzenlebtn" class="btn btn-outline-secondary btn-block grupbtn" style="border: 1px solid lightgrey;" data-bs-toggle="modal" data-bs-target="#cariduzenleModal" data-bs-whatever="">Cari Düzenle</button>
			
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#faturaModal`).modal(`hide`);'>Kapat</button>
			</div>
		  </div>
		</div>
	</div>


	<div class="modal fade" id="carihareketModal" tabindex="-1" aria-labelledby="carihareketModalLabel">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h5 id="carihareket_baslik" class="modal-title">Cari/Üye Hareketleri</h5>
				<h5 id="carihareket_bakiye" class="modal-title">Cari/Üye Hareketleri</h5>
			</div>
			
			<div class="modal-body pt-0 p-0">
				<div class="row p-0 m-0" style="width:100%;">
					<table class="table table-striped table-responsive-sm table-responsive-xs" style="width:100%;">
						<thead>
							<tr>
								<th style="width: 25%;">
									Tarih
								</th>
								<th style="width: 25%;">
									Adisyon No
								</th>
								<th style="width: 25%;">
									Ödeme Türü
								</th>
								<th style="width:25%; text-align:right;">
									Tutar
								</th>
							</tr>
						</thead>
						<tbody id="cariharekettbl">
							
						</tbody>
					</table>
				</div>

				
			</div>
			<div class="modal-footer text-right px-2">
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#carihareketModal`).modal(`hide`); $(`.modal-backdrop`).remove(); $(document.body).removeClass(`modal-open`);'>Kapat</button>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="caritahsilatModal" tabindex="-1" aria-labelledby="caritahsilatModalLabel">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" style="z-index: 999;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="caritahsilat_baslik" class="modal-title">Tahsilat</h6>
				<input type="password" id="caritahsilatmodalno" style="display: none;">
			</div>
			
			<div class="modal-body pt-0 p-0">
				<div class="row p-0 m-0" style="width:100%;">
					<h5 id="caritahsilat_cariadi" class="modal-title">Cari Adı</h5>
					<h5 id="caritahsilat_bakiye" class="modal-title">Bakiye</h5>
					<div class="col-6">
						<div class="form-floating mb-2">
							<input type="number" class="form-control" id="caritahsilattutar" placeholder="Tutar">
							<label for="caritahsilattutar">Tutar</label>
						</div>
					</div>
					<div class="col-6">
						<div class="form-floating mb-2">
							<select class="form-control" id="caritahsilatodemeturu" placeholder="Ödeme Türü">
								<option value="Nakit">Nakit</option>
								<option value="Kredi Kartı">Kredi Kartı</option>
							</select>
							<label for="caritahsilatodemeturu">Ödeme Türü</label>
						</div>
					</div>
				</div>

				
			</div>
			<div class="modal-footer text-right px-2">
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='tahsilatyap();'>Ödeme Al</button>
				<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#caritahsilatModal`).modal(`hide`);'>Kapat</button>
			</div>
		  </div>
		</div>
	</div>



	<div class="modal fade" id="cariekleModal" tabindex="-1" aria-labelledby="cariekleModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="cariekle_baslik" class="modal-title">Cari Ekle</h6>
				</div>
				<div class="modal-body py-2">
					<div class="row pt-3">
						<div class="col-4" style="display:none;">
							<div class="form-floating mb-2">
								<input type="number" class="form-control" id="carinoe" placeholder="Cari No">
								<label for="carinoe">Cari No</label>
							</div>
						</div>
						<div class="col-8">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariadie" placeholder="* Cari Adı">
								<label for="cariadie">* Cari Adı</label>
							</div>
						</div>
						<div class="col-4">
							<div class="form-floating mb-2">
								
								<select class="form-control"  id="caritipie" placeholder="Cari Tipi">
									<option value="Müşteri" selected>Müşteri</option>
									<option value="Üye">Üye</option>
									<option value="Ortaklar">Ortaklar</option>
									<option value="Personel">Personel</option>
									<option value="Tedarikçi">Tedarikçi</option>
								</select>
								
								<label for="caritipie">Cari Tipi</label>
							</div>
						</div>
						<div class="col-4" style="display:none;">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="carisoyadie" placeholder="Soyadı">
								<label for="carisoyadie">Cari Soyadı</label>
							</div>
						</div>
					</div>
					<div class="row pt-3">
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="tel" class="form-control" id="cariceptele" placeholder="Cep Telefonu">
								<label for="cariceptele">Cep Telefonu</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="tel" class="form-control" id="caritele" placeholder="Telefon">
								<label for="caritele">Telefon</label>
							</div>
						</div>
						
						
					</div>
					<div class="row pt-3">
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="email" class="form-control" id="carimaile" placeholder="E-posta">
								<label for="carimaile">E-posta</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariaciklamae" placeholder="Açıklama">
								<label for="cariaciklamae">Açıklama</label>
							</div>
						</div>
					</div>
					<div class="row pt-3">
						<div class="col-4">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariile" placeholder="İl">
								<label for="cariile">İl</label>
							</div>
						</div>
						<div class="col-4">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariilcee" placeholder="İlçe">
								<label for="cariilcee">İlçe</label>
							</div>
						</div>
						<div class="col-4">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="carimahallee" placeholder="Mahalle">
								<label for="carimahallee">Mahalle</label>
							</div>
						</div>
						
					</div>
					<div class="row pt-3">
						<div class="col-12">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariadrese" placeholder="Sokak / Cadde">
								<label for="cariadrese">Adres</label>
							</div>
						</div>
					</div>
					
					<div class="row pt-3">
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="number" class="form-control" id="cariverginoe" placeholder="Vergi No">
								<label for="cariverginoe">Vergi No</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="carivergidairesie" placeholder="Vergi Dairesi">
								<label for="carivergidairesie">Vergi Dairesi</label>
							</div>
						</div>
					
					</div>
					
					<div class="row pt-3">
						
						<div class="col-6">
							<div class="form-floating mb-2">
								
								<select class="form-control"  id="carifiyatgrubue" placeholder="Fiyat Grubu">
									<option value="1" selected>Fiyat 1</option>
									<option value="2">Fiyat 2</option>
									<option value="3">Fiyat 3</option>
									<option value="4">Fiyat 4</option>
								</select>
								
								<label for="carifiyatgrubue">Fiyat Grubu</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="number" class="form-control" id="cariiskontoe" placeholder="İskonto Oranı (%)" value="0">
								<label for="cariiskontoe">İskonto Oranı (%)</label>
							</div>
						</div>
						
					</div>
				</div>
				<div class="modal-footer text-right px-2">
					
					<button id="cariekle_tmmbtn" class="btn btn-outline-secondary btn-block grupbtn px-4" style="border: 1px solid lightgrey;" onclick="cariekle();">Kaydet</button>
					<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#cariekleModal`).modal(`hide`);'>Kapat</button>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="cariduzenleModal" tabindex="-1" aria-labelledby="cariduzenleModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" style="height:90% !important;">
			<div class="modal-content" style="height:100% !important;">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="cariduzenle_baslik" class="modal-title">Cari Düzenle</h6>
					<input type="password" id="cariduzenlemodalno" style="display: none;">
				</div>
				<div class="modal-body py-2">
					<div class="row pt-3">
						<div class="col-4" style="display:none;">
							<div class="form-floating mb-2">
								<input type="number" class="form-control" id="carinod" placeholder="Cari No">
								<label for="carinod">Cari No</label>
							</div>
						</div>
						<div class="col-8">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariadid" placeholder="* Cari Adı">
								<label for="cariadid">* Cari Adı</label>
							</div>
						</div>
						<div class="col-4">
							<div class="form-floating mb-2">
								
								<select class="form-control"  id="caritipid" placeholder="Cari Tipi">
									<option value="Müşteri" selected>Müşteri</option>
									<option value="Üye">Üye</option>
									<option value="Ortaklar">Ortaklar</option>
									<option value="Personel">Personel</option>
									<option value="Tedarikçi">Tedarikçi</option>
								</select>
								
								<label for="caritipid">Cari Tipi</label>
							</div>
						</div>
						<div class="col-4" style="display:none;">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="carisoyadid" placeholder="Soyadı">
								<label for="carisoyadid">Cari Soyadı</label>
							</div>
						</div>
					</div>
					<div class="row pt-3">
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="tel" class="form-control" id="caricepteld" placeholder="Cep Telefonu">
								<label for="caricepteld">Cep Telefonu</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="tel" class="form-control" id="cariteld" placeholder="Telefon">
								<label for="cariteld">Telefon</label>
							</div>
						</div>
						
						
					</div>
					<div class="row pt-3">
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="email" class="form-control" id="carimaild" placeholder="E-posta">
								<label for="carimaild">E-posta</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariaciklamad" placeholder="Açıklama">
								<label for="cariaciklamad">Açıklama</label>
							</div>
						</div>
					</div>
					<div class="row pt-3">
						<div class="col-4">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariild" placeholder="İl">
								<label for="cariild">İl</label>
							</div>
						</div>
						<div class="col-4">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariilced" placeholder="İlçe">
								<label for="cariilced">İlçe</label>
							</div>
						</div>
						<div class="col-4">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="carimahalled" placeholder="Mahalle">
								<label for="carimahalled">Mahalle</label>
							</div>
						</div>
						
					</div>
					<div class="row pt-3">
						<div class="col-12">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="cariadresd" placeholder="Sokak / Cadde">
								<label for="cariadresd">Adres</label>
							</div>
						</div>
					</div>
					
					<div class="row pt-3">
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="number" class="form-control" id="cariverginod" placeholder="Vergi No">
								<label for="cariverginod">Vergi No</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="text" class="form-control" id="carivergidairesid" placeholder="Vergi Dairesi">
								<label for="carivergidairesid">Vergi Dairesi</label>
							</div>
						</div>
					
					</div>
					
					<div class="row pt-3">
						
						<div class="col-6">
							<div class="form-floating mb-2">
								
								<select class="form-control"  id="carifiyatgrubud" placeholder="Fiyat Grubu">
									<option value="1" selected>Fiyat 1</option>
									<option value="2">Fiyat 2</option>
									<option value="3">Fiyat 3</option>
									<option value="4">Fiyat 4</option>
								</select>
								
								<label for="carifiyatgrubud">Fiyat Grubu</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<input type="number" class="form-control" id="cariiskontod" placeholder="İskonto Oranı (%)" value="0">
								<label for="cariiskontod">İskonto Oranı (%)</label>
							</div>
						</div>
						<div class="col-6">
							<div class="form-floating mb-2">
								<select class="form-control"  id="caridurumd" placeholder="Durum">
									<option value="E" selected>Aktif</option>
									<option value="H">Pasif</option>
								</select>
								<label for="caridurumd">Durum</label>
							</div>
						</div>
						
					</div>
				</div>
				<div class="modal-footer text-right px-2 py-1">
					
					<button id="cariduzenle_tmmbtn" class="btn btn-success text-center" style="display: inline-block; text-align: center;" onclick="cariduzenle();">Kaydet</button>
					<!--<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#uruntasiModal`).modal(`hide`);'>Kapat</button>-->
					
				</div>
			</div>
		</div>
	</div>




	<div class="modal fade" id="masatasiModal" tabindex="-1" aria-labelledby="masatasiModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable" style="height:90% !important;">
			<div class="modal-content" style="height:100% !important;">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="masatasi_baslik" class="modal-title">Yeni masa seçiniz</h6>
				</div>

				
				<div class="modal-body py-2">
					<input type="password" style="display: none;" id="mt_masaid">
					<input type="password" style="display: none;" id="mt_masaidyeni">
					<div class="row m-0">
						<div class="col-3">
							<div class="row">
								<div class="col-12" id="masatasi_kisimlar" style="padding-top: 2px;">
									
								</div>
							</div>
						</div>
						<div class="col-9" style="font-weight: 700;">
							<div class="row m-0" id="masatasi_masalar">

							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer text-right px-2 py-1">
					
					<button id="btn1" class="btn btn-primary text-center" style="min-width:85px; display: inline-block; text-align: center;"  data-bs-dismiss="modal" onclick="masatasi();">Onay</button>
					<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#masatasiModal`).modal(`hide`);'>Kapat</button>
					
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="uruntasiModal" tabindex="-1" aria-labelledby="uruntasiModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable" style="height:90% !important;">
			<div class="modal-content" style="height:100% !important;">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="uruntasi_baslik" class="modal-title">Taşınacak ürünleri seçiniz</h6>
				</div>
				<div class="modal-body py-2">
					<input type="password" style="display: none;" id="ut_masaid">
					<input type="password" style="display: none;" id="ut_masaidyeni">
					<div class="row m-0" id="uruntasi_urunsec">
						<div class="col-12" id="uruntasi_urundiv">

						</div>
					</div>
					<div class="row m-0" id="uruntasi_masasec" style="display:none;">
						<div class="col-3">
							<div class="row">
								<div class="col-12" id="uruntasi_kisimlar" style="padding-top: 2px;">
									
								</div>
							</div>
						</div>
						<div class="col-9" style="font-weight: 700;">
							<div class="row m-0" id="uruntasi_masalar">

							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer text-right px-2 py-1">
					
					<button id="uruntasi_ileribtn" class="btn btn-success text-center" style="display: inline-block; text-align: center;" onclick="document.getElementById('uruntasi_urunsec').style.display='none'; document.getElementById('uruntasi_masasec').style.display=''; document.getElementById('uruntasi_geribtn').style.display='inline-block'; document.getElementById('uruntasi_ileribtn').style.display='none'; document.getElementById('uruntasi_onaybtn').style.display='inline-block'; document.getElementById('uruntasi_baslik').innerText = 'Yeni masa seçiniz'; kisimgetir_ut();">İleri</button>
					<button id="uruntasi_geribtn" class="btn btn-success text-center" style="display: none; text-align: center;" onclick="document.getElementById('uruntasi_masasec').style.display='none'; document.getElementById('uruntasi_urunsec').style.display=''; document.getElementById('uruntasi_geribtn').style.display='none'; document.getElementById('uruntasi_ileribtn').style.display='inline-block'; document.getElementById('uruntasi_onaybtn').style.display='none'; document.getElementById('uruntasi_baslik').innerText = 'Taşınacak ürünleri seçiniz';">Geri</button>
					<button id="uruntasi_onaybtn" class="btn btn-primary text-center" style="display: none; text-align: center;" onclick="uruntasi();">Onay</button>
					<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#uruntasiModal`).modal(`hide`);'>Kapat</button>
					
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="secerekodeModal" tabindex="-1" aria-labelledby="secerekodeModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="min-width: 95vw !important; min-height: 95vh !important;">
			<div class="modal-content" style="min-height:100%">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="secerekode_baslik" class="modal-title">Ödenecek ürünleri seçiniz</h6>
				</div>
				<div class="modal-body py-2" id="secerekodeModalBody">
					<div class="row">
						<div class="col-xl-10 col-lg-10 col-md-9 col-sm-8 col-xs-8">
							<div class="row">
								<div class="col-6">
									<div class="container-fluid" id="sepetsol" style="overflow-y:auto;">

									</div>
								</div>
								<div class="col-6">
									<div class="container-fluid" id="sepetsag" style="overflow-y:auto;">

									</div>
								</div>
							</div>
						</div>
						<div class="col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4" id="sagmenu2" style="overflow-y:auto;">
							
						</div>
					</div>
				</div>
				<div class="modal-footer text-right px-2">
					<button class='btn text-secondary grupbtnkapat' style='background-color:lightgrey; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#secerekodeModal`).modal(`hide`);'>Kapat</button>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="altmenuModal" tabindex="-1" aria-labelledby="altmenuModalLabel">
		<div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" style="height:90% !important;">
			<div class="modal-content" style="height:100% !important;">
				<div class="modal-header py-1" style="background-color:lightgrey;">
					<h6 id="uruntasi_baslik" class="modal-title">Ürün seçiniz</h6>
				</div>
				<div class="modal-body py-2 text-center">
					<input type="password" style="display: none;" id="am_usturunhamstoksirano">
					<input type="password" style="display: none;" id="am_toplamadet">
					<input type="password" style="display: none;" id="am_altmenutipi">
					
					<p class="px-2 pb-2" style="width:100%; display: flex; align-items: center; overflow-x:auto;">
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">1</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">2</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">3</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">4</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">5</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">6</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">7</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">8</button>
						<button onclick="am_adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 45px; margin-right: 2px;">9</button>
						<button id="am_adetbtn" class="btn btn-sm btn-outline-secondary p-0 grupbtn2" onclick="$('#am_adetModal').modal('show');" data-amadet style="margin-top: 3px; min-height: 50px; min-width: 55px;">Adet</button>
					</p>

					<div class="row m-0" id="altmenu">
						<div class="col-3">
						</div>
					</div>
				</div>
				<div class="modal-footer text-right px-2 py-1">
					
					<button id="altmenu_tmmbtn" class="btn btn-success text-center" style="display: inline-block; text-align: center;" onclick="altmenumodalkapat();">Tamam</button>
					<!--<button class='btn text-secondary' style='background-color:lightgrey; margin-left:20px; font-weight:700; min-width:85px; border: 1px solid lightgrey;' onclick='$(`#uruntasiModal`).modal(`hide`);'>Kapat</button>-->
					
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="am_adetModal" tabindex="-1" aria-labelledby="am_adetModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-sm modal-dialog-centered" style="max-width:250px !important;width:250px;">
		  <div class="modal-content">
			<div class="modal-header py-1" style="background-color:lightgrey;">
				<h6 id="am_adet_baslik" class="modal-title">Adet giriniz</h6>
			</div>
			<div class="modal-body">
				<div class="row text-center m-0 p-0 pt-1" style="max-width: 215px; width:220px;">

					<input class="form-control text-center" type="text" placeholder="ADET" readonly id="am_adet" style="width:210px; max-width: 210px; margin-left: 5px; box-shadow: 0px 0px 8px #dbdbdb; background-color: white;">
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`1`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							1
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`2`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							2
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`3`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							3
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`4`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							4
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`5`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							5
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`6`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							6
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`7`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							7
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`8`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							8
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`9`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							9
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`0`; if (parseFloat(document.getElementById('am_adet').value) > parseFloat(document.getElementById('am_toplamadet').value) && document.getElementById('am_altmenutipi').value == '2') document.getElementById('am_adet').value = document.getElementById('am_toplamadet').value; return false;">
							0
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value+=`.`; return false;">
							,
						</button>
					</div>
					<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 60px; width: 60px; max-width: 60px; box-shadow: 0px 0px 6px #adadad;" onclick="document.getElementById('am_adet').value=``; return false;">
							SİL
						</button>
					</div>
					
					<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-12 px-0">
						<button class="btn btn-light btn-block my-2" style="min-height: 60px; height: 60px; max-height: 60px; min-width: 208px; width: 208px; max-width: 208px; box-shadow: 0px 0px 6px #adadad;" onclick="$('#am_adetModal').modal('hide'); am_adetgiris();">
							TAMAM
						</a>
					</div>
				</div>
			</div>
		  </div>
		</div>
	</div>



	<div class="offcanvas offcanvas-end" tabindex="-1" id="sagmenucnv" aria-labelledby="offcanvasRightLabel" style="max-width:300px;">
		
		<div class="offcanvas-body" id="sagmenu">
		  
		</div>
	  </div>


	<div class="full-height" >
		<div class="row m-0" style="height: 100%; width: 100%;">
			<div id="grup" class="col-xl-2 col-lg-2 col-md-2 col-sm-3 col-3" style="overflow-y: auto; max-height: 1024px; padding-left:5px; padding-right: 7px; border:1px solid white;border-radius: 5px;">

			</div>
			<div class="col-xl-10 col-lg-10 col-md-10 col-sm-9 col-9" style="overflow: hidden; padding-right:3px;">
				<div class="container-fluid px-0 mx-0" style="height: 100%;">
					<div class="row" style="height: 100%;">
						<div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 px-0" style="height: 85px;padding-top:8px; border:1px solid white;border-radius: 5px; display: flex; flex-direction: row; justify-content: center; align-items: flex-start;">
						<p class="px-2 pb-2" style="width:100%; display: flex; align-items: center; justify-content: center; overflow-x:auto;">
								<button onclick="adetsec(this)" class="btn btn-sm btn-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">1</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">2</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">3</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">4</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">5</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">6</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">7</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">8</button>
								<button onclick="adetsec(this)" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-adet style="min-height: 50px; min-width: 45px; margin-right: 2px;">9</button>
								<button id="adetbtn" class="btn btn-sm btn-outline-secondary p-0 grupbtn1" data-bs-toggle="modal" data-bs-target="#adetModal" data-adet style="min-height: 50px; min-width: 55px;">Adet</button>
								
								
							</p>
							<div class="col-3" style="text-align: right; width: 12rem; display: flex; flex-direction: row;">
								<button class="btn" style="box-shadow: 0px 0px 6px rgba(0,0,0,0.6); color:white; height: 3rem; min-width:6rem; margin-right: 5px;border:0px; background-color: rgba(25, 135, 84, 0.8);"  onclick="kilitkaldir(); urunleriyazdir(); window.location='pos.html';">
									<i class="fa fa-check fa-2x" aria-hidden="true"></i>
								</button>
								
								<button class="btn" style="box-shadow: 0px 0px 6px rgba(0,0,0,0.6); color:white;  height: 3rem; min-width:6rem; border:0px; background-color: rgba(143, 143, 143, 0.6);" type="button" data-bs-toggle="offcanvas" data-bs-target="#sagmenucnv" aria-controls="offcanvasRight">
									<i class="fa fa-bars fa-2x" aria-hidden="true"></i>
								</button>
							</div>


							
						</div>
						<div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 px-0" style="display: none; height: 70px;padding-top:8px; border-radius: 5px;padding-top:4px; padding-bottom:2px;">
							
							<div class="row">
								<div class="col-6" style="font-weight: 500; margin-bottom:0px; padding-bottom:0px; padding-top: 6px;">
									<div class="row p-0 m-0" style="display: none">
										<div class="col-12 p-0 m-0">
											<table style="border:0px; width: 100%; display: none">
												<tbody>
													<tr style="line-height:16px;">
														<td style="width:35%;">
															<small>Masa</small>
														</td>
														<td>
															<small id="masa"></small>
														</td>
													</tr>
													<tr style="line-height:16px;">
														<td style="width:35%;">
															<small>Ads.No</small>
														</td>
														<td>
															<small id="adisyonno"></small>
														</td>
													</tr>
													<tr style="line-height:16px;">
														<td style="width:35%;">
															<small>Garson</small>
														</td>
														<td>
															<small id="garson"></small>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
									
								</div>
								
							</div>
						</div>
						<div id="ortasol" class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-12" style="height: 904px; max-height: 904px;  border:1px solid white;border-radius: 5px; overflow-y: auto;">
							<div class="container-fluid text-center">
								<div class="row text-center" id="menu">
									
								</div>
							</div>
						</div>
						<div id="ortasag" class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-12" style="height: 854px; max-height: 854px; border-top: 0px; border-left:1px solid white; border-right:1px solid white; border-bottom:1px solid white; border-radius: 5px; overflow-y: auto;">
							<div class="container-fluid px-1" id="sepet">
								
							</div>
						</div>
						<div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-12" style="height: 50px; padding-top: 5px;  border:1px solid white;border-radius: 5px;">
							<div class="input-group">
								<span class="input-group-text" id="barkodspan"><i class="fa fa-barcode"></i></span>
								<input id="barkod" type="text" class="form-control shadow-none" placeholder="Ürün/Cari ara" style="background-color:whitesmoke" aria-describedby="barkodspan" onclick="this.removeAttribute('readonly'); this.focus();">
							  </div>
							
							
							
						</div>
						
						<div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-12 text-center px-1" style="height: 50px; padding-top: 0px;  border:1px solid white;border-radius: 5px;">
							<div class="row m-0 p-0">
								<div class="col-6 m-0 p-0">
									<div class="row" style="text-align: left;">
										<div class="col-12">
											<small id="indirimsiztutar"></small>
										</div>
										<div class="col-12">
											<small id="indirimtutari"></small>
										</div>
									</div>
								</div>
								<div class="col-6" style="text-align: right; margin:0px; padding: 0px; padding-right: 5px;">
									<p class="px-1" id="tutar" style="width:100%; font-weight: bold;margin-top:5px;font-size:23px;"></p>
								</div>
							</div>
							
							
						</div>
					</div>
				</div>

			</div>
			<!--
			<div class="col-xl-2 col-lg-2 col-md-2 col-sm-3 col-3 text-center" style="overflow-y: auto; position: relative; padding-left:5px; padding-right: 7px;  border:1px solid white;border-radius: 5px;" id="sagmenu_eski">
				
			</div>
			-->
		</div>
	</div>
	
	<div class="full-height2 text-center" id="islemmenusu">
		<div class="row m-3" style="max-width:500px;">
			<div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-6 col-6">
				<button class="btn btn-light btn-rounded" style="width:100%;min-height: 80px;">Porsiyon</button>
			</div>
			<div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-6 col-6">
				<button class="btn btn-light btn-rounded" style="width:100%;min-height: 80px;">İskonto</button>
			</div>
		</div>
		
	</div>

	<input type="password" style="display: none;" id="masatipi">

	<div class="loading-bar"></div>

	<div class="okc-bar">
		<div class="row mx-0" style="width: 100%; margin-top:calc(100vh/1.85);">
			<div class="col-12 m-0 p-0" style="width: 100%;">
				<h1>ÖDEME ALINIYOR</h1>
				<button class="btn btn-outline-danger" onclick="fisiptal();">İPTAL ET</button>
			</div>
		</div>
	</div>

<!--===============================================================================================-->	
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	
	<script src="vendor/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/alertifyJS/alertify.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/keyboard/source.js"></script>
	<script src="vendor/keyboard/keyboard.js"></script>
<!--===============================================================================================-->

	<script type="text/javascript">

		let timerID;

		$(document).ready(function () {

			localStorage.pos_fatura_durum = "0";

			if ($(window).height() > $(window).width()){
				$('#barkod')[0].setAttribute('readonly', 'readonly');
			}

			alertify.defaults.transition = "zoom";
			alertify.defaults.theme.ok = "btn btn-success";
			alertify.defaults.theme.cancel = "btn btn-secondary";
			alertify.defaults.theme.input = "form-control";

			localStorage.pos_adet = 1;
			localStorage.pos_amadet = 1;

			let yukseklik = $(window).height() + "px";
			let yukseklikorta = parseInt($(window).height()-120) + "px";
			let yukseklikortasag = parseInt($(window).height()-170) + "px";

			document.getElementById("grup").style.height=yukseklik;
			document.getElementById("grup").style.minHeight=yukseklik;
			document.getElementById("grup").style.maxHeight=yukseklik;
			document.getElementById("ortasol").style.height=yukseklikorta;
			document.getElementById("ortasol").style.minHeight=yukseklikorta;
			document.getElementById("ortasol").style.maxHeight=yukseklikorta;
			document.getElementById("ortasag").style.height=yukseklikorta;
			document.getElementById("ortasag").style.minHeight=yukseklikorta;
			document.getElementById("ortasag").style.maxHeight=yukseklikorta;
			//document.getElementById("sagmenu").style.height=yukseklik;
			//document.getElementById("sagmenu").style.minHeight=yukseklik;
			//document.getElementById("sagmenu").style.maxHeight=yukseklik;

			kullanicikontrol();
			sagmenugetir();
			masagetir();
			iskontogetir();
			grupgetir();
			adetsec1();
			cekbolgetir();
			masatipigetir();


			if (localStorage.pos_masa.split('|')[2] == "bos") kisisayisikaydet();

		});

		$( window ).resize(function() {
			let yukseklik = $(window).height() + "px";
			let yukseklikorta = parseInt($(window).height()-120) + "px";

			document.getElementById("grup").style.height=yukseklik;
			document.getElementById("grup").style.minHeight=yukseklik;
			document.getElementById("grup").style.maxHeight=yukseklik;
			document.getElementById("ortasol").style.height=yukseklikorta;
			document.getElementById("ortasol").style.minHeight=yukseklikorta;
			document.getElementById("ortasol").style.maxHeight=yukseklikorta;
			document.getElementById("ortasag").style.height=yukseklikorta;
			document.getElementById("ortasag").style.minHeight=yukseklikorta;
			document.getElementById("ortasag").style.maxHeight=yukseklikorta;
			//document.getElementById("sagmenu").style.height=yukseklik;
			//document.getElementById("sagmenu").style.minHeight=yukseklik;
			//document.getElementById("sagmenu").style.maxHeight=yukseklik; 
		});

		function kisisayisikaydet(){

			var bol = localStorage.pos_masa.split('|');

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/kisisayisikaydet",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: bol[0], masa: bol[1], sayi: bol[4] })
			});

		}

		function detectMob() {
			const toMatch = [
				/Android/i,
				/webOS/i,
				/iPhone/i,
				/iPad/i,
				/iPod/i,
				/BlackBerry/i,
				/Windows Phone/i
			];
			
			return toMatch.some((toMatchItem) => {
				return navigator.userAgent.match(toMatchItem);
			});
		}



		const kupurModal = document.getElementById('kupurModal')
		kupurModal.addEventListener('show.bs.modal', event => {

			$(`#sagmenucnv`).offcanvas(`hide`);

			const button = event.relatedTarget;
			const recipient = button.getAttribute('data-bs-whatever');
			document.getElementById("kupur_recipient").value = recipient;

			document.getElementById("alinanucret").innerText = "0";
			document.getElementById("paraustu").innerText = (parseFloat(document.getElementById("alinanucret").innerText) - parseFloat(localStorage.pos_tutar)).toFixed(2);

			document.getElementById("alinanucret_gorunen").innerText = parabirimi_locale(0);
			document.getElementById("paraustu_gorunen").innerText = parabirimi_locale(document.getElementById("paraustu").innerText);

		})

		function ucretekle(tutar){
			if (tutar!="0") document.getElementById("alinanucret").innerText = (parseFloat(document.getElementById("alinanucret").innerText) + parseFloat(tutar)).toFixed(2);
			else document.getElementById("alinanucret").innerText = "0";
			document.getElementById("paraustu").innerText = (parseFloat(document.getElementById("alinanucret").innerText) - parseFloat(localStorage.pos_tutar)).toFixed(2);

			document.getElementById("alinanucret_gorunen").innerText = parabirimi_locale(document.getElementById("alinanucret").innerText);
			document.getElementById("paraustu_gorunen").innerText = parabirimi_locale(document.getElementById("paraustu").innerText);

			if (tutar=="0"){
				if (document.getElementById("doviz_p").innerText.indexOf('$')>0){
					document.getElementById("alinanucret_doviz").innerText = parabirimi_locale_usd("0");
					hesap = parabirimi_locale_usd(parseFloat(document.getElementById("paraustu").innerText)/parseFloat(document.getElementById("doviz_input").value));
					document.getElementById("paraustu_doviz").innerText = hesap;
				}
				else if (document.getElementById("doviz_p").innerText.indexOf('€')>0) {
					document.getElementById("alinanucret_doviz").innerText = parabirimi_locale_eur("0");
					hesap = parabirimi_locale_eur(parseFloat(document.getElementById("paraustu").innerText)/parseFloat(document.getElementById("doviz_input").value));
					document.getElementById("paraustu_doviz").innerText = hesap;
				}
				else{
					document.getElementById("alinanucret_doviz").innerText = "";
					document.getElementById("paraustu_doviz").innerText = "";
				}
			}
		}

		function ucretekle_usd(tutar){
			if (tutar!="0") document.getElementById("alinanucret").innerText = (parseFloat(document.getElementById("alinanucret").innerText) + (parseFloat(tutar)*parseFloat(document.getElementById("doviz_input").value))).toFixed(2);
			else document.getElementById("alinanucret").innerText = "0";
			document.getElementById("paraustu").innerText = (parseFloat(document.getElementById("alinanucret").innerText) - parseFloat(localStorage.pos_tutar)).toFixed(2);

			document.getElementById("alinanucret_gorunen").innerText = parabirimi_locale(document.getElementById("alinanucret").innerText);
			document.getElementById("alinanucret_doviz").innerText = parabirimi_locale_usd(parseFloat(document.getElementById("alinanucret").innerText)/parseFloat(document.getElementById("doviz_input").value));
			document.getElementById("paraustu_gorunen").innerText = parabirimi_locale(document.getElementById("paraustu").innerText);
			document.getElementById("paraustu_doviz").innerText = parabirimi_locale_usd(parseFloat(document.getElementById("paraustu").innerText)/parseFloat(document.getElementById("doviz_input").value));
		}

		function ucretekle_eur(tutar){
			if (tutar!="0") document.getElementById("alinanucret").innerText = (parseFloat(document.getElementById("alinanucret").innerText) + (parseFloat(tutar)*parseFloat(document.getElementById("doviz_input").value))).toFixed(2);
			else document.getElementById("alinanucret").innerText = "0";
			document.getElementById("paraustu").innerText = (parseFloat(document.getElementById("alinanucret").innerText) - parseFloat(localStorage.pos_tutar)).toFixed(2);

			document.getElementById("alinanucret_gorunen").innerText = parabirimi_locale(document.getElementById("alinanucret").innerText);
			document.getElementById("alinanucret_doviz").innerText = parabirimi_locale_eur(parseFloat(document.getElementById("alinanucret").innerText)/parseFloat(document.getElementById("doviz_input").value));
			document.getElementById("paraustu_gorunen").innerText = parabirimi_locale(document.getElementById("paraustu").innerText);
			document.getElementById("paraustu_doviz").innerText = parabirimi_locale_eur(parseFloat(document.getElementById("paraustu").innerText)/parseFloat(document.getElementById("doviz_input").value));
		}

		function parabirimi_locale(price){
			var formattedOutput = new Intl.NumberFormat('tr-TR', {
				style: 'currency',
				currency: 'TRY',
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
			return formattedOutput.format(price).replace('₺','') + " ₺";
		}

		function parabirimi_locale_usd(price){
			var formattedOutput = new Intl.NumberFormat('tr-TR', {
				style: 'currency',
				currency: 'TRY',
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
			return formattedOutput.format(price).replace('₺','') + " $";
		}

		function parabirimi_locale_eur(price){
			var formattedOutput = new Intl.NumberFormat('tr-TR', {
				style: 'currency',
				currency: 'TRY',
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
			return formattedOutput.format(price).replace('₺','') + " €";
		}

		function kupur_parabirimi(parabirimi)
		{
			document.getElementById("kupur_tl_btn").classList.remove("btn-success");
			document.getElementById("kupur_usd_btn").classList.remove("btn-success");
			document.getElementById("kupur_eur_btn").classList.remove("btn-success");
			
			document.getElementById("kupur_tl_btn").classList.remove("btn-light");
			document.getElementById("kupur_usd_btn").classList.remove("btn-light");
			document.getElementById("kupur_eur_btn").classList.remove("btn-light");

			document.getElementById("kupur_tl_btn").classList.remove("text-secondary");
			document.getElementById("kupur_usd_btn").classList.remove("text-secondary");
			document.getElementById("kupur_eur_btn").classList.remove("text-secondary");

			if(parabirimi=="tl") {
				document.getElementById("kupur_tl_btn").classList.add("btn-success");
				document.getElementById("kupur_usd_btn").classList.add("btn-light");
				document.getElementById("kupur_eur_btn").classList.add("btn-light");

				document.getElementById("kupur_usd_btn").classList.add("text-secondary");
				document.getElementById("kupur_eur_btn").classList.add("text-secondary");

				document.getElementById("kupur_tl_div").style.display="";
				document.getElementById("kupur_usd_div").style.display="none";
				document.getElementById("kupur_eur_div").style.display="none";

				document.getElementById("doviz_div").style.display='none';

				document.getElementById("doviz_p").innerText = "";

				document.getElementById("alinanucret_doviz").innerText="";
				document.getElementById("paraustu_doviz").innerText="";


				document.getElementById("alinanucret_gorunen").outerHTML = document.getElementById("alinanucret_gorunen").outerHTML.replace("h4","h1");
				document.getElementById("paraustu_gorunen").outerHTML = document.getElementById("paraustu_gorunen").outerHTML.replace("h4","h1");

				document.getElementById('small1_div').style.marginTop="2px";
				document.getElementById('small2_div').style.marginTop="2px";
				//document.getElementById("doviz_input").style.display='none';
			}
			else if(parabirimi=="usd") {

				var d1 = localStorage.pos_usd;
				var t1 = localStorage.pos_usd_tarih;
				var t2 = new Date().toJSON().slice(0, 10);

				if (d1 == "" || t1 != t2) usdgetir();
				else 
				{
					document.getElementById("doviz_p").innerText="1 $";
					document.getElementById("doviz_input").value = d1;
				}

				document.getElementById("alinanucret_doviz").innerText = parabirimi_locale_usd(parseFloat(document.getElementById("alinanucret").innerText)/parseFloat(document.getElementById("doviz_input").value));
				document.getElementById("paraustu_doviz").innerText = parabirimi_locale_usd(parseFloat(document.getElementById("paraustu").innerText)/parseFloat(document.getElementById("doviz_input").value));

				document.getElementById("alinanucret_gorunen").outerHTML = document.getElementById("alinanucret_gorunen").outerHTML.replace("h1","h4");
				document.getElementById("paraustu_gorunen").outerHTML = document.getElementById("paraustu_gorunen").outerHTML.replace("h1","h4");

				document.getElementById('small1_div').style.marginTop="-4px";
				document.getElementById('small2_div').style.marginTop="-4px";

				document.getElementById("doviz_div").style.display='';
				//document.getElementById("doviz_input").style.display='';

				document.getElementById("kupur_tl_btn").classList.add("btn-light");
				document.getElementById("kupur_usd_btn").classList.add("btn-success");
				document.getElementById("kupur_eur_btn").classList.add("btn-light");

				document.getElementById("kupur_tl_btn").classList.add("text-secondary");
				document.getElementById("kupur_eur_btn").classList.add("text-secondary");

				document.getElementById("kupur_tl_div").style.display="none";
				document.getElementById("kupur_usd_div").style.display="";
				document.getElementById("kupur_eur_div").style.display="none";

			}
			else if(parabirimi=="eur") {

				var d1 = localStorage.pos_eur;
				var t1 = localStorage.pos_eur_tarih;
				var t2 = new Date().toJSON().slice(0, 10);

				if (d1 == "" || t1 != t2) eurgetir();
				else 
				{
					document.getElementById("doviz_p").innerText="1 €";
					document.getElementById("doviz_input").value = d1;
				}

				document.getElementById("alinanucret_doviz").innerText = parabirimi_locale_eur(parseFloat(document.getElementById("alinanucret").innerText)/parseFloat(document.getElementById("doviz_input").value));
				document.getElementById("paraustu_doviz").innerText = parabirimi_locale_eur(parseFloat(document.getElementById("paraustu").innerText)/parseFloat(document.getElementById("doviz_input").value));

				document.getElementById("alinanucret_gorunen").outerHTML = document.getElementById("alinanucret_gorunen").outerHTML.replace("h1","h4");
				document.getElementById("paraustu_gorunen").outerHTML = document.getElementById("paraustu_gorunen").outerHTML.replace("h1","h4");

				document.getElementById('small1_div').style.marginTop="-4px";
				document.getElementById('small2_div').style.marginTop="-4px";

				document.getElementById("doviz_div").style.display='';
				//document.getElementById("doviz_input").style.display='';

				document.getElementById("kupur_tl_btn").classList.add("btn-light");
				document.getElementById("kupur_usd_btn").classList.add("btn-light");
				document.getElementById("kupur_eur_btn").classList.add("btn-success");

				document.getElementById("kupur_tl_btn").classList.add("text-secondary");
				document.getElementById("kupur_usd_btn").classList.add("text-secondary");

				document.getElementById("kupur_tl_div").style.display="none";
				document.getElementById("kupur_usd_div").style.display="none";
				document.getElementById("kupur_eur_div").style.display="";
			}
			
		}

		async function usdgetir() {
		
			const response = await fetch( 'https://min-api.cryptocompare.com/data/price?fsym=USD&tsyms=TRY' )
			const data = await response.json()
			document.getElementById("doviz_p").innerText="1 $";
			document.getElementById("doviz_input").value=(data.TRY).toFixed(2);
            
			localStorage.pos_usd_tarih = new Date().toJSON().slice(0, 10);
			localStorage.pos_usd = data.TRY;

			ucretekle("0");
        }

		async function eurgetir() {
		
			const response = await fetch( 'https://min-api.cryptocompare.com/data/price?fsym=EUR&tsyms=TRY' )
			const data = await response.json()
			document.getElementById("doviz_p").innerText="1 €";
			document.getElementById("doviz_input").value=(data.TRY).toFixed(2);
			
			localStorage.pos_eur_tarih = new Date().toJSON().slice(0, 10);
			localStorage.pos_eur = data.TRY;

			ucretekle("0");
		}

		function kurgetir(){
			if (document.getElementById("doviz_p").innerText.indexOf('$')>0) usdgetir();
			else if (document.getElementById("doviz_p").innerText.indexOf('€')>0) eurgetir();
		}

		function kurkaydet(){
			if (document.getElementById("doviz_p").innerText.indexOf('$')>0) localStorage.pos_usd = document.getElementById("doviz_input").value;
			else if (document.getElementById("doviz_p").innerText.indexOf('€')>0) localStorage.pos_eur = document.getElementById("doviz_input").value;

			ucretekle("0");
		}








		function adetyaz(sayi){
			if(isTextSelected($('#m_adetcekbol')[0])){
				document.getElementById("m_adetcekbol").value = sayi;
			}
			else document.getElementById("m_adetcekbol").value += sayi;
		}

		function guidKontrol(){

			var kisim = localStorage.pos_masa.split('|')[0];
			var masaismi = localStorage.pos_masa.split('|')[1];
			var islemyapan = localStorage.pos_userguid;

			var sonuc = false;
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/guidKontrol",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: kisim, masaismi: masaismi, islemyapan: islemyapan }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data=="OK") sonuc = true;
						else {
							if (document.getElementById("masatipi").value!="1"){
								alertify.error("Adisyonda değişiklik yapılmış");
								setTimeout(function(){ window.location=`pos.html`; }, 1500);
							}
							else{
								sonuc = true;
							}
							
						}
					}
					
				},
				error: function (hata) {
					if (document.getElementById("masatipi").value!="1"){
						alertify.error("Adisyonda değişiklik yapılmış");
						setTimeout(function(){ window.location=`pos.html`; }, 1500);
					}
					else{
						sonuc = true;
					}
					
				}
			});
			return sonuc;
		}

		function kilitkaldir() {
			var kisim = localStorage.pos_masa.split('|')[0];
			var masaismi = localStorage.pos_masa.split('|')[1];

			var sonuc = false;
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/masakilitkaldir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: kisim, masaismi: masaismi })
			});
		}

		function urunleriyazdir() {

			var kisim = localStorage.pos_masa.split('|')[0];
			var masaismi = localStorage.pos_masa.split('|')[1];

			if (localStorage.pos_masa.split('|')[2] == "bos") adisyonyazdir();

			var sonuc = false;
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/urunleriyazdir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: kisim, masa: masaismi })
			});

		}

		function adisyonyazdir() {


			var kisim = localStorage.pos_masa.split('|')[0];
			var masaismi = localStorage.pos_masa.split('|')[1];
			var cihaz = window.location.hostname;
			//var cihaz = "DESKTOP-BCEH1MF";

			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/adisyonyazdir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: kisim, masaismi: masaismi, cihaz: cihaz }),
				success: function(data){
					if (data=="OK") console.log("Adisyon yazdırıldı");
					else console.log("HATA: " + data);
				}
			});
			

			
		}

		
		function aciklamaekle(){

			document.body.className = "loading";

			var masa = localStorage.pos_masa;
			var aciklama = document.getElementById("ac_aciklama").value;

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/aciklamaekle",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ masa: masa, aciklama: aciklama }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data == "OK"){
							alertify.success("Açıklama eklendi");
							document.getElementById("ac_masaid").value="";
						}
						else{
							alertify.error("Açıklama eklenemedi");
							document.getElementById("ac_masaid").value="";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Açıklama eklenemedi");
					document.getElementById("ac_masaid").value="";
				}
			});
		}
		
		
		const cariModal = document.getElementById('cariModal')
		cariModal.addEventListener('show.bs.modal', event => {

			document.body.className = "loading";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/cariuyegetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						$.each(data,
							function (key, item) {
								_html += "<tr><td>"+item.CARINO+"</td><td>"+item.AD+"</td><td style='text-align:right;'>"+parabirimi_locale(item.BAKIYE)+" ₺</td><td style='text-align:right;'><button class='btn btn-secondary grupbtn' style='border: 1px solid lightgrey;' data-bs-dismiss='modal' onclick='cariekleara(`"+item.CARINO+"`)'>Cari Seç</button><div class='btn-group'><button type='button' class='btn btn-secondary dropdown-toggle grupbtn' style='border: 1px solid lightgrey;' data-bs-toggle='dropdown' aria-expanded='false'>İşlemler</button><ul class='dropdown-menu'><li><button class='dropdown-item' data-bs-toggle='modal' data-bs-target='#cariduzenleModal' data-bs-whatever='"+item.CARINO+"' onclick='localStorage.pos_cari_modal = `cari`;'>Değiştir</button></li><li><button class='dropdown-item' data-bs-toggle='modal' data-bs-target='#carihareketModal' data-bs-whatever='"+item.CARINO+"' onclick='localStorage.pos_cari_modal = `cari`;'>Hareketler</button></li><li><button class='dropdown-item' data-bs-toggle='modal' data-bs-target='#caritahsilatModal' data-bs-whatever='"+item.CARINO+"' data-bs-ad='"+item.AD+"' data-bs-bakiye='"+item.BAKIYE+"' onclick='localStorage.pos_cari_modal = `cari`;'>Tahsilat</button></li></ul></div></td></tr>";
							});
							document.getElementById("caritbl").innerHTML = _html;
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		})

		const faturalisteModal = document.getElementById('faturalisteModal')
		faturalisteModal.addEventListener('show.bs.modal', event => {

			var now = new Date();

			var day = ("0" + now.getDate()).slice(-2);
			var month = ("0" + (now.getMonth() + 1)).slice(-2);

			var today = now.getFullYear()+"-"+(month)+"-"+(day) ;

			document.getElementById("faturaliste_bitis").value = today;
			
			var now = new Date();

			now.setDate(now.getDate()-3);
			day = ("0" + now.getDate()).slice(-2);
			month = ("0" + (now.getMonth() + 1)).slice(-2);

			today = now.getFullYear()+"-"+(month)+"-"+(day) ;
			
			document.getElementById("faturaliste_baslangic").value = today;
			
			faturaara();

		})

		const faturaModal = document.getElementById('faturaModal')
		faturaModal.addEventListener('show.bs.modal', event => {

			$(`#sagmenucnv`).offcanvas(`hide`);

			localStorage.pos_cari_modal = "fatura";

			document.body.className = "loading";
			/*
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/cariuyegetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "<tr><td></td><td>NİHAİ TÜKETİCİ</td><td style='text-align:right;'></td><td style='text-align:right;'><button class='btn btn-secondary' onclick='faturacariekle(``,`NİHAİ TÜKETİCİ`)'>Seç</button></td></tr>";
					if (xhr.status == "200")
					{
						$.each(data,
							function (key, item) {
								_html += "<tr><td>"+item.CARINO+"</td><td>"+item.AD+"</td><td style='text-align:right;'>"+item.BAKIYE+" ₺</td><td style='text-align:right;'><button class='btn btn-secondary' onclick='faturacariekle(`"+item.CARINO+"`,`"+item.AD+"`)'>Seç</button></td></tr>";
							});
							document.getElementById("f_caritbl").innerHTML = _html;
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
			*/

			if (document.getElementById("musteri").dataset.carino == "0")
			{
				document.getElementById("soru_cari").innerText = "Nihai Tüketici";
				document.getElementById("soru_tutar").innerText = parabirimi_locale(localStorage.pos_tutar);
				faturacariekle("11111111111","NİHAİ TÜKETİCİ");
				document.getElementById("faturayazdirbtn").disabled=false;
				document.getElementById("f_carieklebtn").style.display = '';
				document.getElementById("f_cariduzenlebtn").style.display = 'none';
				document.getElementById("soru_uyari1").style.display = 'none';
				document.getElementById("soru_uyari2").style.display = 'none';
			}
			else{
				$.ajax({
					async:false,
					type: 'post',
					url: "https://pos.posula.com/api/pos/caribilgigetir",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ carino: document.getElementById("musteri").dataset.carino }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						var _html = "";
						if (xhr.status == "200")
						{
							if (data[0]["VD"]=="" || data[0]["VN"]=="" || data[0]["ILCE"]=="" || data[0]["IL"]==""){
								document.getElementById("soru_cari").innerText = data[0]["FIRMAISMI"];
								document.getElementById("soru_tutar").innerText = parabirimi_locale(localStorage.pos_tutar);
								
								document.getElementById("soru_cari").innerText = data[0]["FIRMAISMI"];
								
								document.getElementById("faturayazdirbtn").disabled=true;
								document.getElementById("f_carieklebtn").style.display = 'none';
								document.getElementById("f_cariduzenlebtn").style.display = '';

								document.getElementById("soru_uyari1").style.display = '';
								document.getElementById("soru_uyari2").style.display = '';
								document.getElementById("f_cariduzenlebtn").setAttribute('data-bs-whatever', document.getElementById("musteri").dataset.carino);
							}
							else{
								document.getElementById("soru_cari").innerText = data[0]["FIRMAISMI"];
								document.getElementById("soru_tutar").innerText = parabirimi_locale(localStorage.pos_tutar);
								
								document.getElementById("faturayazdirbtn").disabled=false;
								document.getElementById("f_carieklebtn").style.display = 'none';
								document.getElementById("f_cariduzenlebtn").style.display = '';
								document.getElementById("soru_uyari1").style.display = 'none';
								document.getElementById("soru_uyari2").style.display = 'none';

								document.getElementById("f_cariduzenlebtn").setAttribute('data-bs-whatever', document.getElementById("musteri").dataset.carino);
								faturacariekle(document.getElementById("musteri").dataset.carino, data[0]["FIRMAISMI"]);
							}
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});
			}
			

			

			$.ajax({
					async:false,
					type: 'post',
					url: "https://pos.posula.com/api/pos/faturanogetir",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						var _html = "";
						if (xhr.status == "200")
						{
							document.getElementById("f_seri").value = data[0]["fatura_seri"];
							document.getElementById("f_sira").value = data[0]["fatura_sira"];
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});

				if (localStorage.pos_fatura_durum=="1") document.getElementById("faturayazdirbtn").disabled=true;
				else document.getElementById("faturayazdirbtn").disabled=false;

		})

		function faturacariekle(carino, cariad){
			
			//document.getElementById("fatura_div").style.display='';

			if (carino!="" && carino!="11111111111"){


				$.ajax({
					async:false,
					type: 'post',
					url: "https://pos.posula.com/api/pos/caridetaygetir",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ carino: carino }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						var _html = "";
						if (xhr.status == "200")
						{
							document.getElementById("f_carino").value = data[0]["CARINO"];
							document.getElementById("f_cariadi").value = data[0]["ADI"];
							document.getElementById("f_vkn").value = data[0]["VERGINO"];
							document.getElementById("f_vd").value = data[0]["VERGIDAIRE"];
							document.getElementById("f_tel").value = data[0]["CEPTEL"];
							document.getElementById("f_mail").value = data[0]["EMAIL"];
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});
			}
			else{
				document.getElementById("f_carino").value = "";
				document.getElementById("f_cariadi").value = cariad;
				document.getElementById("f_vkn").value ="11111111111";
				document.getElementById("f_vd").value = "";
				document.getElementById("f_tel").value = "";
				document.getElementById("f_mail").value = "";
			}
		}

		function faturayazdir(){

			faturacariekle(document.getElementById("musteri").dataset.carino, "");

			var carino = document.getElementById("f_carino").value;
			var cariad = document.getElementById("f_cariadi").value;
			var vergino = document.getElementById("f_vkn").value;
			var vergidaire = document.getElementById("f_vd").value;
			var ceptel = document.getElementById("f_tel").value;
			var email = document.getElementById("f_mail").value;
			var seri = document.getElementById("f_seri").value;
			var sira = document.getElementById("f_sira").value;
			
			/*
			if (vergino!="11111111111" && vergino!="" && carino=="")
			{

				if (cariadie!=""){

					document.body.className = "loading";
					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/cariekle",
						dataType: 'json',
						async: false,
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ cariadie:cariad, caritele:"", cariceptele:ceptel, carimaile:email, 
							carivergidairesie:vergidaire,cariverginoe:vergino,cariaciklamae:"",carimahallee:"",
							cariadrese:"",cariilcee:"",cariile:"BURSA",caritipie: "Müşteri",carifiyatgrubue: "1",cariiskontoe:"0"}),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data!="HATA"){
									cariekleara(data);
								}
								else{
									alertify.error("Cari eklenemedi");
								}
							}
							
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Cari eklenemedi");
						}
					});
				}
				else{
					alertify.error("Cari adını giriniz");
				}


			}
			else{
				cariekleara(carino);
			}
			*/


			var bol = localStorage.pos_masa.split('|');

			$.ajax({
					async:false,
					type: 'post',
					url: "https://pos.posula.com/api/pos/faturayazdir",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ kisim: bol[0], masa: bol[1], carino: carino, cariad: cariad, vergino: vergino, vergidaire: vergidaire, ceptel: ceptel, seri: seri, sira: sira, cihaz: window.location.hostname }),
					success: function (data, textStatus, xhr) {
						var _html = "";
						if (xhr.status == "200")
						{
							alertify.success("Fatura kaydedildi");
							$('#faturaModal').modal('hide');
							localStorage.pos_fatura_durum = "1";

							//document.getElementById("fatura_div").style.display='none';
							document.getElementById("f_carino").value = "";
							document.getElementById("f_cariadi").value = "";
							document.getElementById("f_vkn").value ="";
							document.getElementById("f_vd").value = "";
							document.getElementById("f_tel").value = "";
							document.getElementById("f_mail").value = "";
							document.getElementById("f_seri").value = "";
							document.getElementById("f_sira").value = "";
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});

		}

		const carihareketModal = document.getElementById('carihareketModal')
		carihareketModal.addEventListener('show.bs.modal', event => {

			const button = event.relatedTarget;
			const recipient = button.getAttribute('data-bs-whatever');

			document.body.className = "loading";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/carihareketgetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ carino: recipient }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							document.getElementById("carihareket_baslik").innerText="Cari Hesap: " + data[0]["FIRMAISMI"];
							document.getElementById("carihareket_bakiye").innerText="Bakiye: " + parseFloat(data[0]["BAKIYE"]).toLocaleString("tr-TR");
							$.each(data,
							function (key, item) {
								_html += "<tr><td>"+item.TARIH+"</td><td>"+item.ADISYONNO+"</td><td>"+item.ODEMETIPI+"</td><td style='text-align:right;'>"+parseFloat(item.TUTAR).toLocaleString("tr-TR")+" ₺</td></tr>";
							});
						}
						else{
							_html="<tr><td colspan='4'>Hareket bulunamadı</td></tr>";
							document.getElementById("carihareket_baslik").innerText="";
							document.getElementById("carihareket_bakiye").innerText="";
							
						}
						
						document.getElementById("cariharekettbl").innerHTML = _html;
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		})


		const caritahsilatModal = document.getElementById('caritahsilatModal')
		caritahsilatModal.addEventListener('show.bs.modal', event => {

			$(`#sagmenucnv`).offcanvas(`hide`);

			const button = event.relatedTarget;
			const carino = button.getAttribute('data-bs-whatever');
			const ad = button.getAttribute('data-bs-ad');
			const bakiye = button.getAttribute('data-bs-bakiye');

			
			document.getElementById("caritahsilatmodalno").value = carino;
			document.getElementById("caritahsilat_cariadi").innerText = ad;
			document.getElementById("caritahsilat_bakiye").innerText = parseFloat(bakiye).toFixed(2).replace(".",",");
			document.getElementById("caritahsilattutar").value=parseFloat(bakiye).toFixed(2);

		})



		function cariara(){
			document.body.className = "loading";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/cariuyegetirara",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ filtre: document.getElementById("cariaratxt").value }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						$.each(data,
							function (key, item) {
								_html += "<tr><td>"+item.CARINO+"</td><td>"+item.AD+"</td><td style='text-align:right;'>"+parabirimi_locale(item.BAKIYE)+" ₺</td><td style='text-align:right;'><div class='btn-group'><button type='button' class='btn btn-secondary dropdown-toggle btn-block grupbtn' style='border: 1px solid lightgrey;' data-bs-toggle='dropdown' aria-expanded='false'>İşlemler</button><ul class='dropdown-menu'><li><button class='dropdown-item' data-bs-dismiss='modal' onclick='cariekleara(`"+item.CARINO+"`)'>Cari Seç</button></li><li><hr class='dropdown-divider'></li><li><button class='dropdown-item' data-bs-toggle='modal' data-bs-target='#cariduzenleModal' data-bs-whatever='"+item.CARINO+"'>Değiştir</button></li><li><button class='dropdown-item' data-bs-toggle='modal' data-bs-target='#carihareketModal' data-bs-whatever='"+item.CARINO+"' data-bs-ad='"+item.AD+"' data-bs-bakiye='"+item.BAKIYE+"'>Hareketler</button></li><li><button class='dropdown-item' data-bs-toggle='modal' data-bs-target='#caritahsilatModal' data-bs-whatever='"+item.CARINO+"'>Tahsilat</button></li></ul></div></td></tr>";
							});
							document.getElementById("caritbl").innerHTML = _html;
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

		function faturaara(){

			var filter = document.getElementById("faturaaratxt").value;
			var tarih1 = document.getElementById("faturaliste_baslangic").value == "" ? "2000-01-01" : document.getElementById("faturaliste_baslangic").value;
			var tarih2 = document.getElementById("faturaliste_bitis").value == "" ? "2100-01-01" : document.getElementById("faturaliste_bitis").value;

			document.body.className = "loading";

			document.getElementById("faturalistetbl").innerHTML = "";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/faturalistegetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ filter: filter, tarih1: tarih1, tarih2: tarih2 }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						$.each(data,
							function (key, item) {
								_html += "<tr><td>"+item.TARIH+"</td><td>"+item.FATURANO+"</td><td>"+item.CARIADI+"</td><td style='text-align:right;'>"+ parabirimi_locale(item.TUTAR) +"</td><td style='text-align:right;'><button class='btn btn-secondary' onclick='faturagoster(`"+item.FATHARNO+"`);'>Görüntüle</button></td></tr>";
							});
							document.getElementById("faturalistetbl").innerHTML = _html;
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

		function faturagoster(ID){
			localStorage.pos_faturano=ID; 

			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/faturagoruntule",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ id: ID }),
				success: function (data, textStatus, xhr) {
					if (xhr.status == "200")
					{
						$.each(data,
							function (key, item) {
								document.getElementById("faturadetaydiv").innerHTML = item.HTML;
							});
							
					}
				},
				error: function (hata) {
					document.getElementById("faturadetaydiv").innerHTML="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

			$("#faturadetayModal").modal("show");

		}

		function faturatekraryazdir(){
			
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/faturatekraryazdir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ id: localStorage.pos_faturano, cihaz: window.location.hostname }),
				success: function (data, textStatus, xhr) {
					if (xhr.status == "200")
					{
						if (data=="OK") alertify.success("Yazıcıya gönderildi");
						else alertify.error("Sistem yöneticisine başvurunuz");
					}
				},
				error: function (hata) {
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});


		}



		function f_cariara(){
			document.body.className = "loading";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/cariuyegetirara",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ filtre: document.getElementById("f_cariaratxt").value }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = ""; 
					if (document.getElementById("f_cariaratxt").value=="") _html += "<tr><td></td><td>NİHAİ TÜKETİCİ</td><td style='text-align:right;'></td><td style='text-align:right;'><button class='btn btn-primary' onclick='faturacariekle(``,`NİHAİ TÜKETİCİ`)'>Seç</button></td></tr>";
					if (xhr.status == "200")
					{
						$.each(data,
							function (key, item) {
								_html += "<tr><td>"+item.CARINO+"</td><td>"+item.AD+"</td><td style='text-align:right;'>"+parabirimi_locale(item.BAKIYE)+" ₺</td><td style='text-align:right;'><button class='btn btn-primary' onclick='faturacariekle(`"+item.CARINO+"`,`"+item.AD+"`)'>Seç</button></td></tr>";
							});
							document.getElementById("f_caritbl").innerHTML = _html;
					}
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}
		
		const modal = document.getElementById('adetModal')
		modal.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal1 = document.getElementById('adeturunModal')
		modal1.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal2 = document.getElementById('urunModal')
		modal2.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal3 = document.getElementById('iskontoModal')
		modal3.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal4 = document.getElementById('cekbolModal')
		modal4.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal5 = document.getElementById('urunnotuModal')
		modal5.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal6 = document.getElementById('uyeiptalModal')
		modal6.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		const modal7 = document.getElementById('cariModal')
		modal7.addEventListener('hidden.bs.modal', event => {
			$('#barkod').focus();
		})

		function uyekontrol(){
			if (document.getElementById("musteri").innerHTML.length>0){
				$('#uyeiptalModal').modal('show');
			}
		}

		$(function() {
			// Focus on load
			$('#barkod').focus();
			// Force focus
			$('#barkod').focusout(function(){
				$('#barkod').focus();
			});
			// Ajax Stuff
			$('#barkod').keyup(function(chr) {
				if ( chr.which == 13 ) {
					if (localStorage.pos_useryetki.split(',')[4]=="1"){
						urunara(document.getElementById("barkod").value);
					}
					
				}
			});
		});

		function urunara(_hamstokno){

			if (guidKontrol){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					var _carino = document.getElementById("musteri").dataset.carino;

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunekleara",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ hamstokno: _hamstokno, userno: localStorage.pos_userno, miktar: "1", kisim: bol[0], masa: bol[1], durum: bol[2], carino: _carino }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							var _kontrol = "0";
							if (xhr.status == "200")
							{
								if (data == "OK"){ //BARKOD ÜRÜNE DENK GELMİŞ
									var eski = localStorage.pos_masa;
									if (eski.indexOf('bos')>-1) _kontrol = "1";
									yeni = eski.replace('bos','dolu');
									localStorage.pos_masa = yeni;
									document.getElementById("barkod").value="";
									if(document.getElementById("musteri").dataset.carino!=""){
										if (_kontrol=="1") cariekleara(document.getElementById("musteri").dataset.carino);
									}
									
									masagetir();
									adetsec1();
								}
								else if (data == "NO"){ //BARKOD ÜRÜNE DENK GELMEMİŞ. CARİLERDE ARAMA YAPILACAK
									cariekleara(_hamstokno);
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}

				
			}

			
		}

		function cariekleara(_kartno){

			if (_kartno!="0"){
				if (guidKontrol){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					document.body.className = "loading";

					if(bol[2]=="dolu"){
						$.ajax({
							type: 'post',
							url: "https://pos.posula.com/api/pos/carihesapgetir",
							async: false,
							dataType: 'json',
							contentType: 'application/json; charset=utf-8',
							data: JSON.stringify({ kartno: _kartno, userno: localStorage.pos_userno, kisim: bol[0], masa: bol[1], durum: bol[2] }),
							success: function (data, textStatus, xhr) {
								document.body.className ="";  
								if (xhr.status == "200")
								{
									if (data.length > 0){ //KART BULUNDUYSA
										console.log(data);
										document.getElementById("barkod").value="";
										masagetir();
										adetsec1();

										
										if (localStorage.pos_cari_modal=='cari') $('#cariModal').modal('show');
										else if (localStorage.pos_cari_modal=='fatura')
										{
											faturacariekle(_kartno, "");
											$('#faturaModal').modal('show');
										}
									}
									else{
										alertify.error("Geçersiz kart");
									}
								}
							},
							error: function (hata) {
								document.body.className ="";
								alertify.error("Sistem yöneticisine başvurunuz");
							}
						});
					}
					else{
						$.ajax({
							type: 'post',
							url: "https://pos.posula.com/api/pos/carihesapgetirbos",
							dataType: 'json',
							contentType: 'application/json; charset=utf-8',
							data: JSON.stringify({ kartno: _kartno, userno: localStorage.pos_userno, durum: bol[2] }),
							success: function (data, textStatus, xhr) {
								document.body.className ="";  
								if (xhr.status == "200")
								{
									if (data.length > 0){ //KART BULUNDUYSA
										document.getElementById("musteri").innerHTML = data[0]["FIRMAISMI"] + " - " + data[0]["BAKIYE"].toFixed(2).replace(".",",") + " ₺";
										document.getElementById("musteri").dataset.carino = data[0]["CARINO"];
										document.getElementById("musteri").dataset.bakiye = data[0]["BAKIYE"].toFixed(2);
										adetsec1();
									}
									else{
										alertify.error("Geçersiz kart");
									}
								}
							},
							error: function (hata) {
								document.body.className ="";
								alertify.error("Sistem yöneticisine başvurunuz");
							}
						});
					}
				}

				
			}
			}
		}

		function uyeiptal(){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/uyeiptalsepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){ //KART BULUNDUYSA
									$('#uyeiptalModal').modal('hide');
									masagetir();
									adetsec1();
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}

				
			}

			
		}

		function adetsec(el){
			const adetbtn = document.querySelectorAll('[data-adet]');
			adetbtn.forEach(element => {
				element.classList.remove('btn-secondary');
				element.classList.add('btn-outline-secondary');
				element.style.color='gray';
			});

			document.getElementById("adetbtn").innerText = "Adet";
			
			el.classList.remove('btn-outline-secondary');
			el.classList.add('btn-secondary');
			el.style.color='white';
			localStorage.pos_adet = el.innerText;

		}

		function adetsec1(){ // adet butonlarından 1i seçtirir
			const adetbtn = document.querySelectorAll('[data-adet]');
			adetbtn.forEach(element => {
				if (element.innerText=="1"){
					element.classList.remove('btn-outline-secondary');
					element.classList.add('btn-secondary');
					element.style.color='white';
					localStorage.pos_adet = "1";
				}
				else{
					element.classList.remove('btn-secondary');
					element.classList.add('btn-outline-secondary');
					element.style.color='gray';
				}
				document.getElementById("adetbtn").innerText = "Adet";
				
			});
		}


		function adetgiris(){

			if (document.getElementById("m_adet").value=="") document.getElementById("m_adet").value = "1";
			localStorage.pos_adet = document.getElementById("m_adet").value;
			document.getElementById("adetbtn").innerText = document.getElementById("m_adet").value;
			document.getElementById("m_adet").value = "";

			const adetbtn = document.querySelectorAll('[data-adet]');
			adetbtn.forEach(element => {
				
				element.classList.remove('btn-secondary');
				element.classList.add('btn-outline-secondary');
				element.style.color='gray';
				
			});

			const el = document.getElementById("adetbtn");
			el.classList.remove('btn-outline-secondary');
			el.classList.add('btn-secondary');
			el.style.color='white';
			
		}


		function am_adetsec(el){

			if (parseFloat(el.innerText) <= parseFloat(document.getElementById("am_toplamadet").value) && document.getElementById("am_altmenutipi").value=="2")
			{
				const adetbtn = document.querySelectorAll('[data-amadet]');
				adetbtn.forEach(element => {
					element.classList.remove('btn-secondary');
					element.classList.add('btn-outline-secondary');
					element.style.color='gray';
				});

				document.getElementById("am_adetbtn").innerText = "Adet";
				
				el.classList.remove('btn-outline-secondary');
				el.classList.add('btn-secondary');
				el.style.color='white';
				localStorage.pos_amadet = el.innerText;
			}
			else if (document.getElementById("am_altmenutipi").value=="3"){
				const adetbtn = document.querySelectorAll('[data-amadet]');
				adetbtn.forEach(element => {
					element.classList.remove('btn-secondary');
					element.classList.add('btn-outline-secondary');
					element.style.color='gray';
				});

				document.getElementById("am_adetbtn").innerText = "Adet";
				
				el.classList.remove('btn-outline-secondary');
				el.classList.add('btn-secondary');
				el.style.color='white';
				localStorage.pos_amadet = el.innerText;
			}

		}

		function am_adetsec1(){ // adet butonlarından 1i seçtirir
			const adetbtn = document.querySelectorAll('[data-amadet]');
			adetbtn.forEach(element => {
				if (element.innerText=="1"){
					element.classList.remove('btn-outline-secondary');
					element.classList.add('btn-secondary');
					element.style.color='white';
					localStorage.pos_amadet = "1";
				}
				else{
					element.classList.remove('btn-secondary');
					element.classList.add('btn-outline-secondary');
					element.style.color='gray';
				}
				document.getElementById("am_adetbtn").innerText = "Adet";
				
			});
		}


		function am_adetgiris(){

			if (document.getElementById("am_adet").value=="") document.getElementById("am_adet").value = "1";
			localStorage.pos_amadet = document.getElementById("am_adet").value;
			document.getElementById("am_adetbtn").innerText = document.getElementById("am_adet").value;
			document.getElementById("am_adet").value = "";

			const adetbtn = document.querySelectorAll('[data-amadet]');
			adetbtn.forEach(element => {
				
				element.classList.remove('btn-secondary');
				element.classList.add('btn-outline-secondary');
				element.style.color='gray';
				
			});

			const el = document.getElementById("am_adetbtn");
			el.classList.remove('btn-outline-secondary');
			el.classList.add('btn-secondary');
			el.style.color='white';

		}

		function adetgiriscekbol(){

			if ($('[data-cekbol="'+localStorage.pos_cekbol+'"]')[0].value>0) $('[data-cekbol="'+localStorage.pos_cekbol+'"]')[0].value=0;
			let toplam1 = 0;
			const cekbolinput = document.querySelectorAll('[data-cekbol]');
			cekbolinput.forEach(element => {
				if (element.value > 0) toplam1 = parseFloat(toplam1) + parseFloat(element.value);
			});

			let kalan1 = parseFloat(document.getElementById('kalanhesaptxt').value) - toplam1;
			kalan1 = kalan1.toFixed(2);

			if (document.getElementById("m_adetcekbol").value=="") document.getElementById("m_adetcekbol").value = "0";
			else if (parseFloat(document.getElementById("m_adetcekbol").value)>parseFloat(kalan1)) document.getElementById("m_adetcekbol").value = kalan1;
			else if (parseFloat(document.getElementById("m_adetcekbol").value)<0) document.getElementById("m_adetcekbol").value = "0";
			$('[data-cekbol="'+localStorage.pos_cekbol+'"]')[0].value = document.getElementById('m_adetcekbol').value;

			if (document.getElementById('m_adetcekbol').value.indexOf(',')>0 || document.getElementById('m_adetcekbol').value.indexOf('.')>0)
			{
				document.getElementById('m_adetcekbol').value = parseFloat(document.getElementById('m_adetcekbol').value).toFixed(2);
			}
			kalanhesaplainput();

		}

		function hideKeyboard(element){

			if (detectMob()){
				element.setAttribute('readonly', 'readonly');
				element.setAttribute('disabled', 'true');
				setTimeout(function(){
					element.blur();
					element.removeAttribute('readonly');
					element.removeAttribute('disabled');
				},
				100);
			}
			
		}

		function adeturungiris(){

			if (document.getElementById("m_adeturun").value!="") urunadetguncelle();
			else alertify.error('Geçerli miktar giriniz.');
			
		}

		function adetfiyatgiris(){

			if (document.getElementById("m_adetfiyat").value=="") document.getElementById("m_adetfiyat").value = "1";
			urunfiyatguncelle();

		}

		function kullanicikontrol(){
			var _userno = localStorage.pos_userno;
			var _userpassword = localStorage.pos_password;
			
			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/kullanicikontrol",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ username: _userno, password: _userpassword }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length<=0){
							localStorage.pos_name = "";
							localStorage.pos_password = "";
							window.location = "index.html";
						}
						else{
							var x = data[0]["ad"];
							if (localStorage.pos_masa.split('|')[2] == "bos") document.getElementById("garson").innerText = x;
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

		function masagetir(){

			var bol = localStorage.pos_masa.split('|');
			document.getElementById("masa").innerText = bol[1];
			
			document.body.className = "loading";

			if (bol[2]=="dolu"){
				$.ajax({
					type: 'post',
					url: "https://pos.posula.com/api/pos/masaicerikgetir",
					dataType: 'json',
					async: false,
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ kisim: bol[0], masa: bol[1] }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						var _html = "";
						if (xhr.status == "200")
						{
							if (data.length>0){
								document.getElementById("garson").innerText = data[0]["GARSON"];
								document.getElementById("adisyonno").innerText = data[0]["ADISYONNO"];
								
								localStorage.pos_fatura_durum = data[0]["FATURAYAZDIMI"];

								var caridiv = "";
								var sepetgenislik = $('#ortasag').width()-10;
								//console.log(sepetgenislik+"px");
								if (data[0]["CARINO"]!="0"){
									caridiv = "<div class='col-12 p-0'><p id='musteri' class='nowrap-2' data-carino='"+data[0]["CARINO"]+"' data-bakiye='"+data[0]["BAKIYE"]+ "' onclick='uyekontrol();'>Cari/Üye : "+data[0]["FIRMAISMI"]+"<br>Bakiye : "+parabirimi_locale(data[0]["BAKIYE"])+  "Garson " + data[0]["GARSON"] + "Ads.No" + data[0]["ADISYONNO"]  +  "</p></div>";
									/*
									document.getElementById("musteri").innerHTML = data[0]["FIRMAISMI"] + " - " + data[0]["BAKIYE"] + " ₺";
									document.getElementById("musteri").dataset.bakiye = data[0]["BAKIYE"];
									document.getElementById("musteri").dataset.carino = data[0]["CARINO"];
									*/
								}
								else{
									
									/*
									document.getElementById("musteri").innerHTML = "";
									document.getElementById("musteri").dataset.bakiye = "";
									document.getElementById("musteri").dataset.carino = "";
									*/
								}
								
								//document.getElementById("musteri").dataset.carino = data[0]["CARINO"];
								
								
								if (data[0]["ISKTUTAR"].toFixed(2)>0){
									document.getElementById("indirimsiztutar").innerText = "Tutar: " + parabirimi_locale(data[0]["ISKONTOSUZTOPLAM"]);
									document.getElementById("indirimtutari").innerText = "İndirim: " + parabirimi_locale(data[0]["ISKTUTAR"]) + " (%"+data[0]["ISKORAN"].toFixed(2).replace(".",",")+")";
									document.getElementById("tutar").innerText = parabirimi_locale(data[0]["TUTAR"]);
								}
								else{
									document.getElementById("indirimsiztutar").innerText = "";
									document.getElementById("indirimtutari").innerText = "";
									document.getElementById("tutar").innerText = parabirimi_locale(data[0]["TUTAR"]);
								}
								
								localStorage.pos_tutar = data[0]["TUTAR"];
								
								var _html="<div class='row'>"+caridiv+"</div><div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-6'>Ürün</div><div class='col-2 px-1 text-center'>Miktar</div><div class='col-3' style='text-align:right;'>Tutar</div><div class='col-1'></div></div>";
								var _html2 = "<div id='sepetsoltoplam' data-soliskonto='"+data[0]["ISKORAN"]+"' data-soltutar='"+data[0]["ISKONTOSUZTOPLAM"]+"' data-solhesap='"+data[0]["TUTAR"]+"'><h3 class='mt-3 mb-3'>Toplam : " + data[0]["TUTAR"].toFixed(2).replace('.',',')+"</h3><h6>İndirimsiz Tutar : " + data[0]["ISKONTOSUZTOPLAM"].toFixed(2).replace('.',',') + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;İndirim : " + data[0]["ISKTUTAR"].toFixed(2).replace('.',',') + "</h6></div>";
								_html2 += "<div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-6'>Ürün</div><div class='col-1 px-1 text-center'>Mktr</div><div class='col-2 px-0' style='text-align:right;'>Tutar</div><div class='col-3' style='text-align:center;'>Seç</div></div>";
								var _html3 = "<div id='sepetsagtoplam' data-sagiskonto='"+data[0]["ISKORAN"]+"' data-sagtutar='0' data-saghesap='0'><h3 class='mt-3 mb-3'>Seçilen Toplam : 0,00</h3><h6>İndirimsiz Tutar : 0,00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;İndirim : 0,00</h6></div>";
								_html3 += "<div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-6'>Ürün</div><div class='col-1 px-1 text-center'>Mktr</div><div class='col-2 px-0' style='text-align:right;'>Tutar</div><div class='col-3' style='text-align:center;'>Seç</div></div>";
								var _renk = "lightgrey";
								var _sonref = "";
								var _ikram = "";
								var _sirano = "";
								var _usturunhamstokno = "";
								$.each(data,
								function (key, item) {
									
									if (key==0) _sirano=item.SIRANO;

									if (item.Y2=="0"){ //Ürün notu
										_html2 += "<div id='sepetsol"+item.SIRANO+"' data-sepetsolurunadi='"+item.STOKADI+"' data-sepetsolkdvorani='"+item.KDVORANI+"' data-sepetsolbirim='"+(item.SATIRTUTARISKONTOSUZ / item.ADET).toFixed(2)+"' data-sepetsoltip='urun' data-sepetsoliskoran='"+item.URUNISKORAN+"' data-sepetsolisktutar='"+item.URUNISKTUTAR+"' data-sepetsoladet='"+item.ADET+"' class='row mt-1 py-2' style='background-color:#fff; min-height: 40px;'><div class='col-6' id='sepetsolurun"+item.SIRANO+"'>"+item.STOKADI+"</div><div class='col-1 px-1 text-center' id='sepetsoladet"+item.SIRANO+"'>"+item.ADET+"</div><div class='col-2 px-0' style='text-align:right;' id='sepetsoltutar"+item.SIRANO+"'>"+item.SATIRTUTAR.toFixed(2).replace('.',',')+"</div><div class='col-3 text-center'><i class='form-control fa fa-angle-right pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;margin-right:5px;' onclick='birinisagagonder(`"+item.SIRANO+"`);'></i><i class='form-control fa fa-angle-double-right pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;' onclick='hepsinisagagonder(`"+item.SIRANO+"`);'></i></div></div>";
									}


									if (item.USTURUNHAMSTOKNO=="0" && item.Y2=="0")
									{
										if (_renk == "lightgrey") _renk = "#fff";
										else _renk = "lightgrey";
									}
									
									if (item.Y2=="0"){
										_sirano = item.SIRANO;
									}

									_usturunhamstokno = item.USTURUNHAMSTOKNO;

									if (item.Y2=="0") _sonref = item.GRUPADI;
									
									if (item.Y1=="1") _ikram = "İkram";
									else _ikram = item.SATIRTUTAR.toFixed(2).replace('.',',');

									if (key == data.length-1)//EĞER SON SATIRSA
									{
										//if (item.YAZDIMIEH=="0" && item.PRN_YN=="1"){
										if (item.YAZDIMIEH=="0"){
											if (item.Y2!="0"){ //Ürün notu
												_html += "<div class='row mt-0 py-1' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-11'>&nbsp;&nbsp;&nbsp;"+item.STOKADI+"</div><div class='col-1 p-0'>         <button onclick='if (localStorage.pos_useryetki.split(`,`)[7]==`1`){ urunnotusil(`"+item.SIRANO+"`);}' class='btn btn-secondary py-0' style='padding-left:9px; padding-right:9px; height:100%;'>X</button>                    </div><div class='col-7'><button onclick='urunnotugetir(`"+_sonref+"`);' class='btn btn-light btn-sm btn-block' style='margin-top:3px; border:1px solid #ccc; width:100%;' data-bs-toggle='modal' data-bs-target='#urunnotuModal' data-bs-whatever='"+_sirano+"' >Not Ekle</button></div><div class='col-2'>&nbsp;</div><div class='col-3'>&nbsp;</div></div>";
											}
											else 
											{
												if (item.USTURUNHAMSTOKNO=="0") _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:600; background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div><div class='col-7'><button onclick='urunnotugetir(`"+_sonref+"`);' class='btn btn-light btn-sm btn-block' style='margin-top:3px; border:1px solid #ccc; width:100%;' data-bs-toggle='modal' data-bs-target='#urunnotuModal' data-bs-whatever='"+item.SIRANO+"' >Not Ekle</button></div><div class='col-2'>&nbsp;</div><div class='col-4'>&nbsp;</div></div>";
												else if (item.USTURUNHAMSTOKNO == item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:600; background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div><div class='col-7'><button onclick='urunnotugetir(`"+_sonref+"`);' class='btn btn-light btn-sm btn-block' style='margin-top:3px; border:1px solid #ccc; width:100%;' data-bs-toggle='modal' data-bs-target='#urunnotuModal' data-bs-whatever='"+item.SIRANO+"' >Not Ekle</button></div><div class='col-2'>&nbsp;</div><div class='col-4'>&nbsp;</div></div>";
												else if (item.USTURUNHAMSTOKNO != item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div><div class='col-7'><button onclick='urunnotugetir(`"+_sonref+"`);' class='btn btn-light btn-sm btn-block' style='margin-top:3px; border:1px solid #ccc; width:100%;' data-bs-toggle='modal' data-bs-target='#urunnotuModal' data-bs-whatever='"+item.SIRANO+"' >Not Ekle</button></div><div class='col-2'>&nbsp;</div><div class='col-4'>&nbsp;</div></div>";
											}
											
										}
										else{
											if (item.Y2!="0"){ //Ürün notu
												_html += "<div class='row mt-0 py-1' onclick='localStorage.pos_yenimasa=`0`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-11'>&nbsp;&nbsp;&nbsp;"+item.STOKADI+"</div><div class='col-1 p-0'>  <button onclick='if (localStorage.pos_useryetki.split(`,`)[7]==`1`){ urunnotusil(`"+item.SIRANO+"`);}' class='btn btn-secondary py-0' style='padding-left:9px; padding-right:9px; height:100%;'>X</button>  </div>";
											}
											else
											{
												if (item.USTURUNHAMSTOKNO=="0") _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`0`;' style='background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
												else if (item.USTURUNHAMSTOKNO == item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`0`;' style='background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
												else if (item.USTURUNHAMSTOKNO != item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`0`;' style='background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
											}
											
										}
										
									}
									else {
										//if (item.YAZDIMIEH=="0" && item.PRN_YN=="1"){
										if (item.YAZDIMIEH=="0"){
											if (item.Y2!="0"){ //Ürün notu
												_html += "<div class='row mt-0 py-1' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-11'>&nbsp;&nbsp;&nbsp;"+item.STOKADI+"</div><div class='col-1 p-0'>         <button onclick='if (localStorage.pos_useryetki.split(`,`)[7]==`1`){ urunnotusil(`"+item.SIRANO+"`);}' class='btn btn-secondary py-0' style='padding-left:9px; padding-right:9px; height:100%;'>X</button>                    </div></div>";
											}
											else 
											{
												if (item.USTURUNHAMSTOKNO=="0") _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:600; background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
												else if (item.USTURUNHAMSTOKNO == item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:600; background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
												else if (item.USTURUNHAMSTOKNO != item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`1`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
											}
											
										}
										else{
											if (item.Y2!="0"){ //Ürün notu
												_html += "<div class='row mt-0 py-1' onclick='localStorage.pos_yenimasa=`0`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-11'>&nbsp;&nbsp;&nbsp;"+item.STOKADI+"</div><div class='col-1 p-0'>         <button onclick='if (localStorage.pos_useryetki.split(`,`)[7]==`1`){ urunnotusil(`"+item.SIRANO+"`);}' class='btn btn-secondary py-0' style='padding-left:9px; padding-right:9px; height:100%;'>X</button>                    </div></div>";
											}
											else 
											{
												if (item.USTURUNHAMSTOKNO=="0") _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`0`;' style='background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
												else if (item.USTURUNHAMSTOKNO == item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`0`;' style='background-color:"+_renk+"; min-height: 40px;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
												else if (item.USTURUNHAMSTOKNO != item.HAMSTOKNO) _html += "<div class='row mt-0 py-2' onclick='localStorage.pos_yenimasa=`0`;' style='font-weight:400; background-color:"+_renk+"; min-height: 40px; color:#444; padding-left:3px; font-style:italic;'><div class='col-6'>"+item.STOKADI+"</div><div class='col-2 px-1 text-center'>"+item.ADET+"</div><div class='col-3' style='text-align:right;'>"+_ikram+"</div><div class='col-1 p-0'><div class='main' style='margin-top:-15px !important; padding-top:0px !important;'><label class='menu-button-wrapper' for=''><input type='checkbox' class='menu-button' onclick='hizlimenu(this);'><div class='icon-wrapper'><label class='hamburger'><input class='hamburger-input' type='checkbox'><span class='hamburger-line first'></span><span class='hamburger-line second'></span><span class='hamburger-line third'></span></label></div><div class='item-list'><div onclick='hizlimenuislem(`not`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Not</div><div onclick='hizlimenuislem(`miktar`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Mktr</div><div onclick='hizlimenuislem(`fiyat`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Fiyat</div><div onclick='hizlimenuislem(`porsiyon`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Pors</div><div onclick='hizlimenuislem(`indirim`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İndirim</div><div onclick='hizlimenuislem(`ikram`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>İkram</div><div onclick='hizlimenuislem(`sil`, `"+item.HAMSTOKNO+"`, `"+item.SIRANO+"`, `"+item.GRUPADI+"`)'>Sil</div></div></label></div></div></div>";
											}
										}

									}
									
									
								});
								document.getElementById("sepet").innerHTML = _html;
								document.getElementById("sepetsol").innerHTML = _html2;
								document.getElementById("sepetsag").innerHTML = _html3;
							}
							else{
								document.getElementById("sepet").innerHTML = "<div class='row' style='display:none;'><div class='col-12 p-0'><p id='musteri' class='nowrap-2' data-carino='0' data-bakiye=''></p></div></div><div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-7'>Ürün</div><div class='col-2 px-1 text-center'>Miktar</div><div class='col-3' style='text-align:right;'>Tutar</div></div>";
								document.getElementById("sepetsol").innerHTML = "<div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-6'>Ürün</div><div class='col-2 px-1 text-center'>Miktar</div><div class='col-3' style='text-align:right;'>Tutar</div><div class='col-1'>Seç</div></div>";
								document.getElementById("sepetsag").innerHTML = "<div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-6'>Ürün</div><div class='col-2 px-1 text-center'>Miktar</div><div class='col-3' style='text-align:right;'>Tutar</div><div class='col-1'>Seç</div></div>";
								document.getElementById("indirimsiztutar").innerText = "";
								document.getElementById("indirimtutari").innerText = "";
								document.getElementById("tutar").innerText = "";
								localStorage.pos_fatura_durum = "0";
							}
							
							
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});
			}
			else{
				document.getElementById("sepet").innerHTML = "<div class='row' style='display:none;'><div class='col-12 p-0'><p id='musteri' class='nowrap-2' data-carino='0' data-bakiye=''></p></div></div><div class='row mt-1 py-2 bg-secondary text-white' style='border-radius:5px; font-weight:bold; min-height: 40px;'><div class='col-7'>Ürün</div><div class='col-2 px-1 text-center'>Miktar</div><div class='col-3' style='text-align:right;'>Tutar</div></div>";
				document.getElementById("indirimsiztutar").innerText = "";
				document.getElementById("indirimtutari").innerText = "";
				document.getElementById("tutar").innerText = "";
				document.body.className ="";  
			}
		}

		function hizlimenu (btn){
			for (var i=0; i<$('.menu-button').length;i++){
				if ($('.menu-button')[i]!=btn) $('.menu-button')[i].checked=false;
			}
		}

		function hizlimenuislem (islem, hamstokno, sira, grup){
			for (var i=0; i<$('.menu-button').length;i++){
				$('.menu-button')[i].checked=false;
			}
			
			localStorage.pos_urun_hsno = hamstokno;
			localStorage.pos_urun_sira = sira;

			if (islem == 'miktar'){
				$('#adeturunModal').modal('show');
			}
			else if (islem == 'fiyat'){
				$('#fiyaturunModal').modal('show');
			}
			else if (islem == 'porsiyon'){
				$('#porsiyonModal').modal('show');
			}
			else if (islem == 'indirim'){
				$('#uruniskontoModal').modal('show');
			}
			else if (islem == "ikram"){
				ikramuygula(sira);
			}
			if (islem == 'sil'){
				if (localStorage.pos_yenimasa=="1" || localStorage.pos_useryetki.split(',')[7]=="1"){
					urunsilbtn(grup);
				}
			}
		}

		function birinisagagonder(sirano){
			const sol = document.getElementById("sepetsol"+sirano);
			var soladet = sol.dataset.sepetsoladet;
			var solbirim = sol.dataset.sepetsolbirim;
			var solurunadi = sol.dataset.sepetsolurunadi;
			var solkdvorani = sol.dataset.sepetsolkdvorani;
			var soltip = sol.dataset.sepetsoltip;
			var soliskoran = sol.dataset.sepetsoliskoran;
			var solisktutar = sol.dataset.sepetsolisktutar;
			var birimiskonto = parseFloat(solisktutar)/parseFloat(soladet);
			var solurun = document.getElementById("sepetsolurun"+sirano).innerText;

			//const sagkontrol = document.querySelector('[data-sepetsagadet]');
			const sag = document.getElementById("sepetsag" + sirano);
			if (sag!=null) //Sağda bu satırdan daha önce eklenen ürün var
			{
				var sagadet = sag.dataset.sepetsagadet;
				sag.dataset.sepetsagadet = parseFloat(sagadet)+1;
				sag.dataset.sepetsagiskoran = soliskoran;
				sag.dataset.sepetsagisktutar = parseFloat(sag.dataset.sepetsagisktutar) + birimiskonto;
				//sag.dataset.sepetsagisktutar = parseFloat(sag.dataset.sepetsagadet * sag.dataset.sepetsagbirim) * parseFloat(sag.dataset.sepetsagiskoran) / 100;
				document.getElementById("sepetsagadet"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet).toFixed(2).replace(".",",");
				document.getElementById("sepetsagtutar"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet * solbirim).toFixed(2).replace(".",",");

				if (parseFloat(soladet)<=1){
					sol.remove();
				}
				else{
					sol.dataset.sepetsoladet = parseFloat(soladet)-1;
					sol.dataset.sepetsolisktutar = parseFloat(solisktutar)-birimiskonto;
					document.getElementById("sepetsoladet"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet).toFixed(2).replace(".",",");
					document.getElementById("sepetsoltutar"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet * solbirim).toFixed(2).replace(".",",");
				}
			}
			else //Sağa daha önce eklenmemiş
			{

				var _html = "<div id='sepetsag"+sirano+"' data-sepetsagurunadi='"+solurunadi+"' data-sepetsagkdvorani='"+solkdvorani+"' data-sepetsagbirim='"+solbirim+"' data-sepetsagiskoran='"+soliskoran+"' data-sepetsagisktutar='"+birimiskonto+"' data-sepetsagtip='"+soltip+"' data-sagurunid='"+sirano+"' data-sepetsagadet='1' class='row mt-1 py-2' style='background-color:#fff; min-height: 40px;'>";
				_html += "<div class='col-6' id='sepetsagurun"+sirano+"'>"+solurun+"</div>";
				_html += "<div class='col-1 px-1 text-center' id='sepetsagadet"+sirano+"'>1</div>";
				_html += "<div class='col-2 px-0' style='text-align:right;' id='sepetsagtutar"+sirano+"'>"+ parseFloat(solbirim).toFixed(2).replace('.',',')+"</div>";
				_html += "<div class='col-3 text-center'>";
				_html += "<i class='form-control fa fa-angle-left pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;margin-right:5px;' onclick='birinisolagonder(`"+sirano+"`);'></i>";
				_html += "<i class='form-control fa fa-angle-double-left pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;' onclick='hepsinisolagonder(`"+sirano+"`);'></i>";
				_html += "</div>";
				_html += "</div>";


				document.getElementById("sepetsag").innerHTML += _html;



				if (parseFloat(soladet)<=1){
					sol.remove();
				}
				else{
					sol.dataset.sepetsoladet = parseFloat(soladet)-1;
					sol.dataset.sepetsolisktutar = parseFloat(solisktutar)-birimiskonto;
					document.getElementById("sepetsoladet"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet).toFixed(2).replace(".",",");
					document.getElementById("sepetsoltutar"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet * solbirim).toFixed(2).replace(".",",");
				}
			}

			secerekodetoplamhesapla();

		}

		function hepsinisagagonder(sirano){
			const sol = document.getElementById("sepetsol"+sirano);
			var soladet = sol.dataset.sepetsoladet;
			var solbirim = sol.dataset.sepetsolbirim;
			var solurunadi = sol.dataset.sepetsolurunadi;
			var solkdvorani = sol.dataset.sepetsolkdvorani;
			var soltip = sol.dataset.sepetsoltip;
			var soliskoran = sol.dataset.sepetsoliskoran;
			var solisktutar = sol.dataset.sepetsolisktutar;
			var solurun = document.getElementById("sepetsolurun"+sirano).innerText;

			//const sagkontrol = document.querySelector('[data-sepetsagadet]');
			const sag = document.getElementById("sepetsag" + sirano);
			if (sag!=null) //Sağda bu satırdan daha önce eklenen ürün var
			{
				var sagadet = sag.dataset.sepetsagadet;
				sag.dataset.sepetsagadet = parseFloat(sagadet) + parseFloat(soladet);
				sag.dataset.sepetsagiskoran = soliskoran;
				sag.dataset.sepetsagisktutar = solisktutar;
				document.getElementById("sepetsagadet"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet).toFixed(2).replace(".",",");
				document.getElementById("sepetsagtutar"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet * solbirim).toFixed(2).replace(".",",");

				sol.remove();
			}
			else //Sağa daha önce eklenmemiş
			{

				var _html = "<div id='sepetsag"+sirano+"' data-sepetsagurunadi='"+solurunadi+"' data-sepetsagkdvorani='"+solkdvorani+"' data-sepetsagbirim='"+solbirim+"' data-sepetsagiskoran='"+soliskoran+"' data-sepetsagisktutar='"+solisktutar+"' data-sepetsagtip='"+soltip+"' data-sagurunid='"+sirano+"' data-sepetsagadet='"+soladet+"' class='row mt-1 py-2' style='background-color:#fff; min-height: 40px;'>";
				_html += "<div class='col-6' id='sepetsagurun"+sirano+"'>"+solurun+"</div>";
				_html += "<div class='col-1 px-1 text-center' id='sepetsagadet"+sirano+"'>"+soladet+"</div>";
				_html += "<div class='col-2 px-0' style='text-align:right;' id='sepetsagtutar"+sirano+"'>"+ parseFloat(solbirim*soladet).toFixed(2).replace('.',',')+"</div>";
				_html += "<div class='col-3 text-center'>";
				_html += "<i class='form-control fa fa-angle-left pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;margin-right:5px;' onclick='birinisolagonder(`"+sirano+"`);'></i>";
				_html += "<i class='form-control fa fa-angle-double-left pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;' onclick='hepsinisolagonder(`"+sirano+"`);'></i>";
				_html += "</div>";
				_html += "</div>";


				document.getElementById("sepetsag").innerHTML += _html;

				sol.remove();

			}


			secerekodetoplamhesapla();

		}


		function birinisolagonder(sirano){
			const sag = document.getElementById("sepetsag"+sirano);
			var sagadet = sag.dataset.sepetsagadet;
			var sagbirim = sag.dataset.sepetsagbirim;
			var sagtip = sag.dataset.sepetsagtip;
			var sagurunadi = sag.dataset.sepetsagurunadi;
			var sagkdvorani = sag.dataset.sepetsagkdvorani;
			var sagiskoran = sag.dataset.sepetsagiskoran;
			var sagisktutar = sag.dataset.sepetsagisktutar;
			var birimiskonto = parseFloat(sagisktutar)/parseFloat(sagadet);
			var sagurun = document.getElementById("sepetsagurun"+sirano).innerText;

			//const sagkontrol = document.querySelector('[data-sepetsagadet]');
			const sol = document.getElementById("sepetsol" + sirano);
			if (sol!=null) //Solda bu satırdan daha önce eklenen ürün var
			{
				var soladet = sol.dataset.sepetsoladet;
				sol.dataset.sepetsoladet = parseFloat(soladet)+1;
				sol.dataset.sepetsolisktutar = parseFloat(sol.dataset.sepetsolisktutar) + birimiskonto;
				//sol.dataset.sepetsolisktutar = parseFloat(sol.dataset.sepetsoladet * sol.dataset.sepetsolbirim) * parseFloat(sol.dataset.sepetsoliskoran) / 100;
				document.getElementById("sepetsoladet"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet).toFixed(2).replace(".",",");
				document.getElementById("sepetsoltutar"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet * sol.dataset.sepetsolbirim).toFixed(2).replace(".",",");

				if (parseFloat(sagadet)<=1){
					sag.remove();
				}
				else{
					sag.dataset.sepetsagadet = parseFloat(sagadet)-1;
					sag.dataset.sepetsagisktutar = parseFloat(sagisktutar)-birimiskonto;
					document.getElementById("sepetsagadet"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet).toFixed(2).replace(".",",");
					document.getElementById("sepetsagtutar"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet * sagbirim).toFixed(2).replace(".",",");
				}
			}
			else //Sola daha önce eklenmemiş
			{

				var _html = "<div id='sepetsol"+sirano+"' data-sepetsolurunadi='"+sagurunadi+"' data-sepetsolkdvorani='"+sagkdvorani+"' data-sepetsolbirim='"+sagbirim+"' data-sepetsoliskoran='"+sagiskoran+"' data-sepetsolisktutar='"+birimiskonto+"' data-solurunid='"+sirano+"' data-sepetsoltip='"+sagtip+"' data-sepetsoladet='1' class='row mt-1 py-2' style='background-color:#fff; min-height: 40px;'>";
				_html += "<div class='col-6' id='sepetsolurun"+sirano+"'>"+sagurun+"</div>";
				_html += "<div class='col-1 px-1 text-center' id='sepetsoladet"+sirano+"'>1</div>";
				_html += "<div class='col-2 px-0' style='text-align:right;' id='sepetsoltutar"+sirano+"'>"+ parseFloat(sagbirim).toFixed(2).replace('.',',')+"</div>";
				_html += "<div class='col-3 text-center'>";
				_html += "<i class='form-control fa fa-angle-right pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;margin-right:5px;' onclick='birinisagagonder(`"+sirano+"`);'></i>";
				_html += "<i class='form-control fa fa-angle-double-right pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;' onclick='hepsinisagagonder(`"+sirano+"`);'></i>";
				_html += "</div>";
				_html += "</div>";


				document.getElementById("sepetsol").innerHTML += _html;



				if (parseFloat(sagadet)<=1){
					sag.remove();
				}
				else{
					sag.dataset.sepetsagadet = parseFloat(sagadet)-1;
					sag.dataset.sepetsagisktutar = parseFloat(sagisktutar)-birimiskonto;
					document.getElementById("sepetsagadet"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet).toFixed(2).replace(".",",");
					document.getElementById("sepetsagtutar"+sirano).innerText = parseFloat(sag.dataset.sepetsagadet * sagbirim).toFixed(2).replace(".",",");
				}
			}


			secerekodetoplamhesapla();

		}


		function hepsinisolagonder(sirano){
			const sag = document.getElementById("sepetsag"+sirano);
			var sagadet = sag.dataset.sepetsagadet;
			var sagbirim = sag.dataset.sepetsagbirim;
			var sagtip = sag.dataset.sepetsagtip;
			var sagurunadi = sag.dataset.sepetsagurunadi;
			var sagkdvorani = sag.dataset.sepetsagkdvorani;
			var sagiskoran = sag.dataset.sepetsagiskoran;
			var sagisktutar = sag.dataset.sepetsagisktutar;
			var sagurun = document.getElementById("sepetsagurun"+sirano).innerText;

			//const sagkontrol = document.querySelector('[data-sepetsagadet]');
			const sol = document.getElementById("sepetsol" + sirano);
			if (sol!=null) //Solda bu satırdan daha önce eklenen ürün var
			{
				var soladet = sol.dataset.sepetsoladet;
				sol.dataset.sepetsoladet = parseFloat(soladet)+parseFloat(sagadet);
				sol.dataset.sepetsoliskoran = sagiskoran;
				sol.dataset.sepetsolisktutar = sagisktutar;
				document.getElementById("sepetsoladet"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet).toFixed(2).replace(".",",");
				document.getElementById("sepetsoltutar"+sirano).innerText = parseFloat(sol.dataset.sepetsoladet * sagbirim).toFixed(2).replace(".",",");

				sag.remove();
			}
			else //Sola daha önce eklenmemiş
			{

				var _html = "<div id='sepetsol"+sirano+"' data-sepetsolurunadi='"+sagurunadi+"' data-sepetsolkdvorani='"+sagkdvorani+"' data-sepetsolbirim='"+sagbirim+"' data-sepetsoliskoran='"+sagiskoran+"' data-sepetsolisktutar='"+sagisktutar+"' data-solurunid='"+sirano+"' data-sepetsoltip='"+sagtip+"' data-sepetsoladet='"+sagadet+"' class='row mt-1 py-2' style='background-color:#fff; min-height: 40px;'>";
				_html += "<div class='col-6' id='sepetsolurun"+sirano+"'>"+sagurun+"</div>";
				_html += "<div class='col-1 px-1 text-center' id='sepetsoladet"+sirano+"'>"+sagadet+"</div>";
				_html += "<div class='col-2 px-0' style='text-align:right;' id='sepetsoltutar"+sirano+"'>"+ parseFloat(sagbirim*sagadet).toFixed(2).replace('.',',')+"</div>";
				_html += "<div class='col-3 text-center'>";
				_html += "<i class='form-control fa fa-angle-right pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;margin-right:5px;' onclick='birinisagagonder(`"+sirano+"`);'></i>";
				_html += "<i class='form-control fa fa-angle-double-right pt-2' aria-hidden='true' style='display:inline-block !important; width:35px; height:35px;' onclick='hepsinisagagonder(`"+sirano+"`);'></i>";
				_html += "</div>";
				_html += "</div>";


				document.getElementById("sepetsol").innerHTML += _html;

				sag.remove();

			}

			secerekodetoplamhesapla();

		}


		function secerekodetoplamhesapla()
		{
			//SOL TOPLAM HESAPLAMA
			const solbirimler = document.querySelectorAll('[data-sepetsolbirim]');
			//const soliskonto = document.getElementById("sepetsoltoplam").dataset.soliskonto;
			
			const solisktutar = document.querySelectorAll('[data-sepetsolisktutar]');
			
			let soltoplam = 0;
			solbirimler.forEach(element => {
				soltoplam += parseFloat(element.dataset.sepetsolbirim) * parseFloat(element.dataset.sepetsoladet);
			});

			let solisktoplam = 0;
			solisktutar.forEach(element1 => {
				solisktoplam += parseFloat(element1.dataset.sepetsolisktutar);
			});

			let soltutar = soltoplam;
			let solhesap = soltoplam-solisktoplam;

			//document.getElementById("sepetsoltoplam").innerText = "Tutar : " + soltoplam.toFixed(2).replace(".",",") + "   İndirim : " + (soltoplam*soliskonto/100).toFixed(2).replace('.',',') + "   Hesap : " + solhesap.toFixed(2).replace('.',',');
			document.getElementById("sepetsoltoplam").innerHTML = "<h3 class='mt-3 mb-3'>Toplam : " + solhesap.toFixed(2).replace('.',',')+"</h3><h6>İndirimsiz Tutar : " + soltoplam.toFixed(2).replace(".",",") + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;İndirim : " + solisktoplam.toFixed(2).replace('.',',') + "</h6>";
			//<h3 class='mt-3 mb-3'>Toplam : " + solhesap.toFixed(2).replace('.',',')+"</h3><h6>İndirimsiz Tutar : " + soltoplam.toFixed(2).replace(".",",") + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;İndirim : " + (soltoplam*soliskonto/100).toFixed(2).replace('.',',') + "</h6>
			document.getElementById("sepetsoltoplam").dataset.soltutar = soltutar;
			document.getElementById("sepetsoltoplam").dataset.solhesap = solhesap;
			document.getElementById("sepetsoltoplam").dataset.soliskonto = solisktoplam;
			//document.getElementById("sepetsoltoplam").innerText = "Toplam : " + soltoplam.toFixed(2).replace(".",",");
			

			//SAĞ TOPLAM HESAPLAMA
			const sagbirimler = document.querySelectorAll('[data-sepetsagbirim]');
			//const sagiskonto = document.getElementById("sepetsagtoplam").dataset.sagiskonto;
			const sagisktutar = document.querySelectorAll('[data-sepetsagisktutar]');
			
			let sagtoplam = 0;
			sagbirimler.forEach(element2 => {
				sagtoplam += parseFloat(element2.dataset.sepetsagbirim) * parseFloat(element2.dataset.sepetsagadet);
			});


			let sagisktoplam = 0;
			sagisktutar.forEach(element3 => {
				sagisktoplam += parseFloat(element3.dataset.sepetsagisktutar);
			});


			let sagtutar = sagtoplam;
			let saghesap = sagtoplam-sagisktoplam;

			//document.getElementById("sepetsagtoplam").innerText = "Tutar : " + saghesap.toFixed(2).replace('.',',');
			document.getElementById("sepetsagtoplam").innerHTML = "<h3 class='mt-3 mb-3'>Seçilen Toplam : "+saghesap.toFixed(2).replace('.',',')+"</h3><h6>İndirimsiz Tutar : "+sagtoplam.toFixed(2).replace(".",",")+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;İndirim : "+sagisktoplam.toFixed(2).replace('.',',')+"</h6>";
			//document.getElementById("sepetsagtoplam").innerHTML = document.getElementById("sepetsagtoplam").innerHTML + "<h6>İndirimsiz Tutar : " + sagtoplam.toFixed(2).replace(".",",") + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;İndirim : " + (sagtoplam*sagiskonto/100).toFixed(2).replace('.',',') + "</h6>";
			document.getElementById("sepetsagtoplam").dataset.sagtutar = sagtutar;
			document.getElementById("sepetsagtoplam").dataset.saghesap = saghesap;
			document.getElementById("sepetsagtoplam").dataset.sagiskonto = sagisktoplam;
			//document.getElementById("sepetsagtoplam").innerText = "Toplam : " + sagtoplam.toFixed(2).replace(".",",");

		}


		function masatipigetir(){

			var bol = localStorage.pos_masa.split('|');

			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/masatipigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: bol[0] }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							document.getElementById("masatipi").value = data[0]["SIPARISTIPI"];
						}
						else{
							masatipigetir();
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
					masatipigetir();
				}
			});

		}

		const urunModal = document.getElementById('urunModal')
		urunModal.addEventListener('show.bs.modal', event => {
			const button = event.relatedTarget
			const recipient = button.getAttribute('data-bs-whatever')
			document.getElementById("recipient").value = recipient;

			document.body.className = "loading";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/satiricerikgetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ sirano: recipient }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							if (data[0]["STOKADI"].indexOf("==>")<0)
							{
								_html="<div class='col-4' style='font-weight:600;background-color:#eee;'>Ürün Adı</div><div class='col-2' style='font-weight:600;background-color:#eee;'>Birim Fiyat</div><div class='col-2' style='font-weight:600;background-color:#eee;'>Tutar</div><div class='col-3' style='font-weight:600;background-color:#eee;'>Miktar</div><div class='col-1 text-center' style='font-weight:600;background-color:#eee;'>Sil</div>";
								document.getElementById("urunfooter").style.display="";
							}
							else
							{
								_html="<div class='col-11' style='font-weight:600;background-color:#eee;'>Açıklama</div><div class='col-1 text-center' style='font-weight:600;background-color:#eee;'>Sil</div>";
								document.getElementById("urunfooter").style.display="none";
							}

							
							$.each(data,
							function (key, item) {
								if (item.STOKADI.indexOf("==>")<0) _html += "<div class='col-4 pt-2'>"+item.STOKADI+"</div><div class='col-2 pt-2'>"+item.BIRIMFIYAT.toFixed(2).replace('.',',')+"</div><div class='col-2 pt-2'>"+item.FIYAT.toFixed(2).replace('.',',')+"</div><div class='col-3 pt-1'><input id='m_urunmiktari' onclick='document.getElementById(`m_adeturun`).value=``; $(`#adeturunModal`).modal(`show`);' type='number' class='form-control' value='"+item.ADET+"' step='1' readonly style='max-width:80px; text-align: center; display: inline-block !important;line-height: 0px !important;'><button onclick='document.getElementById(`m_urunmiktari`).value = parseFloat(document.getElementById(`m_urunmiktari`).value) - 1; if (parseFloat(document.getElementById(`m_urunmiktari`).value)<=0) document.getElementById(`m_urunmiktari`).value=`1`;' class='btn btn-outline-secondary p-1' style='width:35px; margin-top:-5px; display: inline-block;'><i class='fa fa-arrow-down'></i></button><button onclick='document.getElementById(`m_urunmiktari`).value = parseFloat(document.getElementById(`m_urunmiktari`).value) + 1;' class='btn btn-outline-secondary p-1' style='width:35px; margin-top:-5px; display: inline-block;'><i class='fa fa-arrow-up'></i></button></div><div class='col-1 pt-1 text-center'><button onclick='urunsilbtn(`"+item.GRUPADI+"`);' class='btn btn-outline-danger p-1' style='display: block; width: 100%;'><i class='fa fa-trash'></i></button></div>";
								else _html += "<div class='col-11 pt-2'>"+item.STOKADI+"</div><div class='col-1 pt-1 text-center'><button onclick='urunsilaciklama("+recipient+");' class='btn btn-outline-danger p-1' style='display: block; width: 100%;'><i class='fa fa-trash'></i></button></div>";
								
							});
							document.getElementById("m_urunsatir").innerHTML = _html;
						}
						else{
							document.getElementById("m_urunsatir").innerHTML = "";
						}
						
						
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		})

		function urunsilbtn(_grup){
			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					if (localStorage.pos_yenimasa=="0")
					{
						iptalnotugetir(_grup);
						$('#urunsilModal').modal('show');
					}
					else {
						urunsil();
					}
				}
				
			}
			
		}

		const urunnotuModal = document.getElementById('urunnotuModal')
		urunnotuModal.addEventListener('show.bs.modal', event => {
			const button = event.relatedTarget
			const recipient = button.getAttribute('data-bs-whatever')
			document.getElementById("urunnotu_recipient").value = recipient;

		})

		const secerekodeModal = document.getElementById('secerekodeModal')
		secerekodeModal.addEventListener('shown.bs.modal', event => {

			var modalyukseklik = $('#secerekodeModalBody').height();
			modalyukseklik = modalyukseklik + "px";

			document.getElementById("sepetsol").style.height = modalyukseklik;
			document.getElementById("sepetsag").style.height = modalyukseklik;
			document.getElementById("sagmenu2").style.height = modalyukseklik;
			document.getElementById("sepetsol").style.maxHeight = modalyukseklik;
			document.getElementById("sepetsag").style.maxHeight = modalyukseklik;
			document.getElementById("sagmenu2").style.maxHeight = modalyukseklik;

		})

		const keyboardModal = document.getElementById('keyboardModal')
		keyboardModal.addEventListener('shown.bs.modal', event => {

			let yukseklik = $(window).height();
			let modalyukseklik = $('#klavyebody')[0].clientHeight;
			bosluk = yukseklik - modalyukseklik + "px";

			const keyboardBody = document.getElementById("klavyebody");
			keyboardBody.style.marginTop = bosluk;

		})

		const adetcekbolModal = document.getElementById('adetcekbolModal')
		adetcekbolModal.addEventListener('shown.bs.modal', event => {
			
			document.getElementById("m_adetcekbol").select();

		})

		const adetaltmenuModal = document.getElementById('am_adetModal')
		adetaltmenuModal.addEventListener('shown.bs.modal', event => {
			
			document.getElementById("am_adet").select();

		})


		const cekbolModal = document.getElementById('cekbolModal')
		cekbolModal.addEventListener('show.bs.modal', event => {
			
			const cekbolinput = document.querySelectorAll('[data-cekbol]');
			cekbolinput.forEach(element => {
				element.value = "0";
			});
			kalanhesapla();

		})

		function urunsil(){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					if (document.getElementById("m_iptalnotutxt").value!="" ||  localStorage.pos_yenimasa=="1"){
						document.body.className = "loading";

						var bol = localStorage.pos_masa.split('|');
						var sebep="";
						if (localStorage.pos_yenimasa!="1") sebep = document.getElementById("m_iptalnotutxt").value;
						$.ajax({
							type: 'post',
							url: "https://pos.posula.com/api/pos/urunsilsepet",
							dataType: 'json',
							contentType: 'application/json; charset=utf-8',
							data: JSON.stringify({ sirano: localStorage.pos_urun_sira, kisim: bol[0], masa: bol[1], sebep: sebep, userno: localStorage.pos_userno }),
							success: function (data, textStatus, xhr) {
								document.body.className ="";  
								if (xhr.status == "200")
								{
									if (data == "OK"){
										masagetir();
										$('#urunsilModal').modal('hide');
										$('#urunModal').modal('hide');
										document.getElementById("m_iptalnotutxt").value = "";
									}
									else{
										alertify.error("Sistem yöneticisine başvurunuz");
									}
								}
							},
							error: function (hata) {
								document.body.className ="";
								alertify.error("Sistem yöneticisine başvurunuz");
							}
						});

					}
					else alertify.error("İptal sebebi giriniz");
				}
			}
			
			
		}

		function urunnotusil(_sirano){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					document.body.className = "loading";
					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunnotusil",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sirano: _sirano }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}

			}


		}
		

		function urunsilaciklama(_sirano){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					document.body.className = "loading";

					var bol = localStorage.pos_masa.split('|');

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunsilsepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sirano: _sirano, kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
									$('#urunModal').modal('hide');
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});	
				}
			}

		}

		function urunguncelle(_sirano){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					document.body.className = "loading";

					var bol = localStorage.pos_masa.split('|');

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunguncellesepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sirano: _sirano, userno: localStorage.pos_userno, aciklama: document.getElementById("m_urunnotutxt").value, miktar: document.getElementById("m_urunmiktari").value, kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
									$('#urunModal').modal('hide');
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}
			}
			
		}

		function urunadetguncelle(){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					document.body.className = "loading";

					var bol = localStorage.pos_masa.split('|');

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunguncelleadet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sirano: localStorage.pos_urun_sira, userno: localStorage.pos_userno, miktar: document.getElementById("m_adeturun").value, kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}
			}

		}

		function urunfiyatguncelle(){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					document.body.className = "loading";

					var bol = localStorage.pos_masa.split('|');

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunguncellefiyat",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sirano: localStorage.pos_urun_sira, userno: localStorage.pos_userno, fiyat: document.getElementById("m_adetfiyat").value, kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}
			}

		}

		function urunnotuekle(_sirano){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					document.body.className = "loading";

					var bol = localStorage.pos_masa.split('|');

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunnotueklesepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sirano: _sirano, userno: localStorage.pos_userno, not: document.getElementById("m_urunnotutxt").value, kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
									$('#urunnotuModal').modal('hide');
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}
			}

			
		}

		function urunnotugetir(_kisim) {
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/mutfaknotlarigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: _kisim }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								if (item.NOTLAR == "KLAVYE" || item.NOTLAR == "Klavye" || item.NOTLAR == "klavye") _html += "<div class='col-4 mb-2 p-1' style='cursor:pointer;'><div class='container' style='min-height: 50px; height:100%; border: 1px solid gray; border-radius: 5px; padding-top:10px;' onclick='localStorage.pos_keyboard=`m_urunnotutxt`; $(`#keyboardModal`).modal(`show`);'>"+item.NOTLAR+"</div></div>";
								else _html += "<div class='col-4 mb-2 p-1' style='cursor:pointer;'><div class='container' style='min-height: 50px; height:100%; border: 1px solid gray; border-radius: 5px; padding-top:10px;' onclick='document.getElementById(`m_urunnotutxt`).value=`"+item.NOTLAR+"`'>"+item.NOTLAR+"</div></div>";
								
							});
							document.getElementById("m_urunnotucard").innerHTML = _html;
						}
						else{
							document.getElementById("m_urunnotucard").innerHTML = "";
						}
						
						
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		}

		function iptalnotugetir(_kisim) {
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/iptalnotlarigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: _kisim }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
			
								if (item.NOTLAR == "KLAVYE" || item.NOTLAR == "Klavye" || item.NOTLAR == "klavye") _html += "<div class='col-4 mb-2 p-1'><div class='container' style='min-height: 50px; height:100%; border: 1px solid gray; border-radius: 5px; padding-top:10px;' onclick='localStorage.pos_keyboard=`m_iptalnotutxt`; $(`#keyboardModal`).modal(`show`);'>"+item.NOTLAR+"</div></div>";
								else _html += "<div class='col-4 mb-2 p-1'><div class='container' style='min-height: 50px; height:100%; border: 1px solid gray; border-radius: 5px; padding-top:10px;' onclick='document.getElementById(`m_iptalnotutxt`).value=`"+item.NOTLAR+"`'>"+item.NOTLAR+"</div></div>";
								
							});
							document.getElementById("m_iptalnotucard").innerHTML = _html;
						}
						else{
							document.getElementById("m_iptalnotucard").innerHTML = "";
						}
						
						
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		}

		function urunekle(_hamstoksirano, _menu){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					var _carino = document.getElementById("musteri").dataset.carino;

					document.body.className = "loading";

					var durum = localStorage.pos_masa;

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/uruneklesepet",
						dataType: 'json',
						async: false,
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ usturunhamstokno:'0', hamstoksirano: _hamstoksirano, userno: localStorage.pos_userno, miktar: localStorage.pos_adet, kisim: bol[0], masa: bol[1], durum: bol[2], carino: _carino, menu: _menu,  menuno: "0"}),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							var _kontrol="0"
							if (xhr.status == "200")
							{
								if (data == "OK"){
									var eski = localStorage.pos_masa;
									if (eski.indexOf('bos')>-1) _kontrol="1";
									yeni = eski.replace('bos','dolu');
									localStorage.pos_masa = yeni;

									if (document.getElementById("musteri").dataset.carino!=""){
										if (_kontrol=="1") cariekleara(document.getElementById("musteri").dataset.carino);
									}
									
									masagetir();
									adetsec1();
								}
								
								else if (data == "HATA"){
									alertify.error("Sistem yöneticisine başvurunuz");
								}

								else { //Menüye eklenmiş alt menüler için liste geri döndü

									localStorage.pos_altmenu_liste = data;
									var liste = data.split(',');
									localStorage.pos_altmenu_liste = localStorage.pos_altmenu_liste.replace(liste[0] + ",", "");
									

									$.ajax({
										type: 'post',
										url: "https://pos.posula.com/api/pos/altmenugetir",
										dataType: 'json',
										async: false,
										contentType: 'application/json; charset=utf-8',
										data: JSON.stringify({ menuhamstokno: liste[0] }),
										success: function (data1, textStatus1, xhr1) {
											document.body.className ="";  
											var son = "";
											var yeni = "";
											if (xhr1.status == "200")
											{
												if (data1.length > 0){
													var eski = localStorage.pos_masa;
													if (eski.indexOf('bos')>-1) _kontrol="1";
													yeni = eski.replace('bos','dolu');
													localStorage.pos_masa = yeni;
													var _html1="";
													$.each(data1,
													function (key1, item1) {
														var test = item1.SCRNAME;
														for (i=0;i>-1;i++){
															son = "";
															yeni = "";
															if (test.indexOf(' ')>-1){
																yeni = test.substring(0,test.indexOf(' '));
																if (yeni.length>10) yeni=yeni.substring(0,9)+"<br>"+yeni.substring(9,yeni.length);
																son += yeni + " ";
																test = test.substring(test.indexOf(' ')+1,test.length);
															}
															else{
																if (test.length>0){
																	yeni = test;
																	if (yeni.length>10) yeni=yeni.substring(0,9)+"<br>"+yeni.substring(9,yeni.length);
																	son += yeni + " ";
																}
																i = -2;
															}
														}

														_html1 += "<div onclick='alturunekle(`"+item1.HAMSTOKSIRANO+"`, `"+_hamstoksirano+"`, `"+item1.MENUNO+"`)' class='col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12 my-2 px-1' style='min-height: 100px; text-align: center;'><div style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); background-color: #fcfcfc; height: 100%; font-weight:bold; font-size:14px;' class='am_urunbtn'>"+son+"<br>"+item1.PRICE.toFixed(2).replace('.',',')+" ₺</div></div>";
													});
													document.getElementById("altmenu").innerHTML = _html1;

													document.getElementById("am_usturunhamstoksirano").value = _hamstoksirano;
													document.getElementById("am_adet").value = "1";
													document.getElementById("am_toplamadet").value = localStorage.pos_adet;
													document.getElementById("am_altmenutipi").value = data1[0]["MENU"];

													localStorage.pos_amadet = "1";
													am_adetsec1();
													$('#altmenuModal').modal('show');
												}
												
												else if (data == "HATA"){
													alertify.error("Sistem yöneticisine başvurunuz");
												}

											}
										},
										error: function (hata) {
											document.body.className ="";
											alertify.error("Sistem yöneticisine başvurunuz");
										}
									});




									
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}

				
			}
			
		}


		function uruneklesepet(_hamstoksirano){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/uruneklesepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ hamstoksirano: _hamstoksirano, userno: localStorage.pos_userno, miktar: "1", kisim: bol[0], masa: bol[1], durum: bol[2] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}

			}
			
		}

		function uruncikarsepet(_hamstoksirano){

			if (guidKontrol()){
				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/uruncikarsepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ hamstoksirano: _hamstoksirano, userno: localStorage.pos_userno, miktar: "1", kisim: bol[0], masa: bol[1], durum: bol[2] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							if (xhr.status == "200")
							{
								if (data == "OK"){
									masagetir();
								}
								else{
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							}
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});
				}
				
			}

			
		}

		function grupgetir(){

			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/urungruplarigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								if (key==0) //İlk grup seçili geliyor ve urun listeleme fonksiyonuna da gidiyor.
								{
									_html += "<button class='btn btn-sm btn-secondary btn-block my-2 p-0 grupbtn' data-grup='"+item.FAMILYNO+"' onclick='grupsec(this)' style='width: 100%;min-height: 50px; font-weight:700; border: 1px solid lightgrey;'>"+item.FAMILYNAME+"</button>";
									urungetir(item.FAMILYNO);
								}
								else _html += "<button class='btn btn-sm btn-outline-secondary btn-block my-2 p-0 grupbtn' data-grup='"+item.FAMILYNO+"' onclick='grupsec(this)' style='width: 100%;min-height: 50px; font-weight:700; border: 1px solid lightgrey;'>"+item.FAMILYNAME+"</button>";
							});
							document.getElementById("grup").innerHTML = _html;
						}
						else{
							document.getElementById("grup").innerHTML = "";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

		function grupsec(el){
			const grupbtn = document.querySelectorAll('[data-grup]');
			grupbtn.forEach(element => {
				element.classList.remove('btn-secondary');
				element.classList.add('btn-outline-secondary');
				element.style.color='gray';
				element.style.fontWeight='700';
			});

			el.classList.add('btn-secondary');
			el.style.color='white';
			el.style.fontWeight='700';
			
			urungetir(el.dataset.grup);
		}

		function urungetir(grupadi){

			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/urunlerigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ grup: grupadi}),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								var test = item.SCRNAME;
								var yeni = "";
								var son = "";
								for (i=0;i>-1;i++){
									if (test.indexOf(' ')>-1){
										yeni = test.substring(0,test.indexOf(' '));
										if (yeni.length>10) yeni=yeni.substring(0,9)+"<br>"+yeni.substring(9,yeni.length);
										son += yeni + " ";
										test = test.substring(test.indexOf(' ')+1,test.length);
									}
									else{
										if (test.length>0){
											yeni = test;
											if (yeni.length>10) yeni=yeni.substring(0,9)+"<br>"+yeni.substring(9,yeni.length);
											son += yeni + " ";
										}
										i = -2;
									}
								}
								if (localStorage.pos_useryetki.split(',')[4]=="1"){
									_html += "<div onclick='urunekle(`"+item.HAMSTOKSIRANO+"`, `"+item.MENU+"`)' class='col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12 my-2 px-1' style='min-height: 100px; text-align: center;'><div style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); background-color: #fcfcfc; height: 100%; font-weight:bold; font-size:14px;' class='urunbtn'>"+son+"<br>"+item.PRICE.toFixed(2).replace('.',',')+" ₺</div></div>";
								}
								else{
									_html += "<div class='col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12 my-2 px-1' style=' min-height: 100px; text-align: center;'><div style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); background-color: #fcfcfc; height: 100%; font-weight:bold; font-size:14px;' class='urunbtn'>"+son+"<br>"+item.PRICE.toFixed(2).replace('.',',')+" ₺</div></div>";
								}
								
							});
							document.getElementById("menu").innerHTML = _html;
						}
						else{
							document.getElementById("menu").innerHTML = "";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}
	
		function sagmenugetir(){

			
			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/kasalarigetir",
				dataType: 'json',
				async: false,
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							
							$.each(data,
							function (key, item) {
								if (localStorage.pos_useryetki.split(',')[5]=="1"){
									if (item.KSBUTONRESMI=='1') _html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 50px; font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#kupurModal' data-bs-whatever='"+item.KASAADI+"'>"+item.KASAADI+"</button>";
									else _html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 45px; font-weight:700; border: 1px solid lightgrey;' onclick='$(`#sagmenucnv`).offcanvas(`hide`); alertify.confirm(`UYARI`, `"+item.KASAADI+" kapatmayı onaylıyor musunuz?`, function(){ hesapkapat(`"+item.KASAADI+"`);}, function(){ });'>"+item.KASAADI+"</button>";
									//_html2 += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 50px; font-weight:700; border: 1px solid lightgrey;'' onclick='alertify.confirm(`UYARI`, `"+item.KASAADI+" kapatmayı onaylıyor musunuz?`, function(){ sohesapkapat(`"+item.KASAADI+"`);}, function(){ });'>"+item.KASAADI+"</button>";
								}
								else{
									_html += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;'' onclick='$(`#sagmenucnv`).offcanvas(`hide`); alertify.confirm(`UYARI`, `"+item.KASAADI+" kapatmayı onaylıyor musunuz?`, function(){ hesapkapat(`"+item.KASAADI+"`);}, function(){ });'>"+item.KASAADI+"</button>";
									//_html2 += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 50px;font-weight:700; border: 1px solid lightgrey;'' onclick='alertify.confirm(`UYARI`, `"+item.KASAADI+" kapatmayı onaylıyor musunuz?`, function(){ sohesapkapat(`"+item.KASAADI+"`);}, function(){ });'>"+item.KASAADI+"</button>";
								}

								
								
							});

							$.ajax({
								type: 'post',
								url: "https://pos.posula.com/api/pos/tumkasalarigetir",
								dataType: 'json',
								contentType: 'application/json; charset=utf-8',
								success: function (data1, textStatus1, xhr1) { 
									var _html2 = "";
									var _html3 = "";
									if (xhr1.status == "200")
									{
										if (data1.length>0){
											
											$.each(data1,
											function (key1, item1) {
												if (localStorage.pos_useryetki.split(',')[5]=="1"){
													_html2 += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 45px; font-weight:700; border: 1px solid lightgrey;'' onclick='alertify.confirm(`UYARI`, `"+item1.KASAADI+" kapatmayı onaylıyor musunuz?`, function(){ sohesapkapat(`"+item1.KASAADI+"`);}, function(){ });'>"+item1.KASAADI+"</button>";
													if (item1.KASAADI != "Veresiye") _html3 += "<option value='"+item1.KASAADI+"'>"+item1.KASAADI+"</option>";
												}
												else{
													_html2 += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px; width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;'' onclick='alertify.confirm(`UYARI`, `"+item1.KASAADI+" kapatmayı onaylıyor musunuz?`, function(){ sohesapkapat(`"+item1.KASAADI+"`);}, function(){ });'>"+item1.KASAADI+"</button>";
												}
												
											});

											if (localStorage.pos_useryetki.split(',')[5]=="1"){
												_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#cekbolModal' onclick='kalanhesapla();'>Detaylı Ödeme</button>";
												//_html2 += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 50px;font-weight:700; border: 1px solid lightgrey;' onclick='sokalanhesapla(); $(`#socekbolModal`).modal(`show`);'>Detaylı Ödeme</button>";
											}
											else{
												_html += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#cekbolModal' onclick='kalanhesapla();'>Detaylı Ödeme</button>";
												//_html2 += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 50px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#cekbolModal' onclick='kalanhesapla();'>Detaylı Ödeme</button>";
											}

											if (localStorage.pos_useryetki.split(',')[5]=="1"){
												_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#secerekodeModal' onclick='$(`#sagmenucnv`).offcanvas(`hide`); masagetir();'>Seçerek Ödeme Al</button>";
											}
											else{
												_html += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#secerekodeModal'>Seçerek Ödeme Al</button>";
											}

											_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#cariModal' onclick='localStorage.pos_cari_modal=`cari`'>Cari/Üye Seç</button>";
											_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#faturaModal'>Fatura</button>";
											
											if (localStorage.pos_useryetki.split(',')[8]=="1"){
												_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#iskontoModal'>İndirim</button>";
												_html2 += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' onclick='$(`#soiskontoModal`).modal(`show`);'>İndirim</button>";
											}
											else{
												_html += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#iskontoModal'>İndirim</button>";
												_html2 += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' onclick='$(`#soiskontoModal`).modal(`show`);'>İndirim</button>";
											}
											
											_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' onclick='adisyonyazdir();'>Adisyon Yazdır</button>";
											//_html2 += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 50px;font-weight:700; border: 1px solid lightgrey;' onclick='adisyonyazdir();'>Adisyon Yazdır</button>";
											
											_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#aciklamaModal'>Açıklama</button>";
											//_html2 += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 50px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#aciklamaModal'>Açıklama</button>";
											
											if (localStorage.pos_useryetki.split(',')[14]=="1"){
												_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#masatasiModal'>Masa Taşı</button>";
											}
											else{
												_html += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#masatasiModal'>Masa Taşı</button>";
											}
											
											if (localStorage.pos_useryetki.split(',')[13]=="1"){
												_html += "<button class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#uruntasiModal'>Ürün Taşı</button>";
											}
											else{
												_html += "<button disabled class='btn btn-outline-secondary btn-block p-0 grupbtn' style='margin-top:6px; margin-bottom:6px;width: 100%;min-height: 45px;font-weight:700; border: 1px solid lightgrey;' data-bs-toggle='modal' data-bs-target='#uruntasiModal'>Ürün Taşı</button>";
											}
											
											//_html += "<button onclick='kilitkaldir(); urunleriyazdir(); window.location=`pos.html`;' class='btn btn-outline-danger my-2 p-0' style='margin-top:6px; position: absolute; right:0;bottom:0; width: 95%; margin-left: auto; left:50%; margin-right: 3px; min-height: 50px;'>Kapat</button>";
											//_html2 += "<button class='btn btn-block text-secondary p-0 grupbtnkapat' style='background-color:lightgrey; margin-top:6px; margin-bottom:6px;width: 100%;min-height: 50px;font-weight:700; border: 1px solid lightgrey;' onclick='$(`#secerekodeModal`).modal(`hide`);'>Kapat</button>";
											document.getElementById("sagmenu").innerHTML = _html;
											document.getElementById("sagmenu2").innerHTML = _html2;
											document.getElementById("caritahsilatodemeturu").innerHTML = _html3;
										}
										
										
									}
									
								},
								error: function (hata) {
									document.body.className ="";
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							});


							
						}
						else{
							document.getElementById("sagmenu").innerHTML = "";
							document.getElementById("sagmenu2").innerHTML = "";
						}
						
						
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
			
			document.body.className = "loading";
		}

		function iskontogetir(){

			
			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/iskontolarigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					var _html1 = "";
					var _html2 = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							
							$.each(data,
							function (key, item) {
								_html += "<div class='col-4 mb-2 p-1'><div class='container text-center' style='min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;' onclick='iskontouygula(`"+item.ISKONTOORANI+"`);'>"+item.ISKONTOISMI+"</div></div>";
								_html1 += "<div class='col-4 mb-2 p-1'><div class='container text-center' style='min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;' onclick='uruniskontouygula(`"+item.ISKONTOORANI+"`);'>"+item.ISKONTOISMI+"</div></div>";
								_html2 += "<div class='col-4 mb-2 p-1'><div class='container text-center' style='min-height: 150px; min-height:150px; padding-top:60px; border: 1px solid gray; border-radius: 5px; font-size:18px;' onclick='soiskontouygula(`"+item.ISKONTOORANI+"`);'>"+item.ISKONTOISMI+"</div></div>";
								
							});
							_html += "<div class='col-12 mb-2 p-1'><div class='container text-center' style='min-height: 50px; min-height:50px; padding-top:10px; border: 1px solid gray; border-radius: 5px; font-size:18px;' onclick='iskontouygula(`0`);'>İndirimi iptal et</div></div>";
							_html1 += "<div class='col-12 mb-2 p-1'><div class='container text-center' style='min-height: 50px; min-height:50px; padding-top:10px; border: 1px solid gray; border-radius: 5px; font-size:18px;' onclick='uruniskontouygula(`0`);'>İndirimi iptal et</div></div>";
							_html2 += "<div class='col-12 mb-2 p-1'><div class='container text-center' style='min-height: 50px; min-height:50px; padding-top:10px; border: 1px solid gray; border-radius: 5px; font-size:18px;' onclick='soiskontouygula(`0`);'>İndirimi iptal et</div></div>";
							document.getElementById("m_iskontocard").innerHTML = _html;
							document.getElementById("m_uruniskontocard").innerHTML = _html1;
							document.getElementById("m_soiskontocard").innerHTML = _html2;
						}
						else{
							document.getElementById("m_iskontocard").innerHTML = "";
							document.getElementById("m_uruniskontocard").innerHTML = "";
							document.getElementById("m_soiskontocard").innerHTML = "";
						}
						
						
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

			document.body.className = "loading";
		}
	
		function iskontouygula(_oran){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/iskontouygulasepet",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ oran: _oran, kisim: bol[0], masa: bol[1] }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							var _html = "";
							if (xhr.status == "200")
							{
								if (data=="OK"){
									$('#iskontoModal').modal('hide');
									masagetir();
								}
								else{
									alertify.error("İşlem başarısız");
								}
								
								
							}
							
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});

					document.body.className = "loading";
				}

			}
			
		}


		function uruniskontouygula(_oran){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');
					var urun = localStorage.pos_urun;

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/iskontouygulaurun",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ sira: localStorage.pos_urun_sira, oran: _oran, kisim: bol[0], masa: bol[1], urun: urun }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							var _html = "";
							if (xhr.status == "200")
							{
								if (data=="OK"){
									$('#uruniskontoModal').modal('hide');
									masagetir();
								}
								else{
									alertify.error("İşlem başarısız");
								}
								
								
							}
							
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});

					document.body.className = "loading";
				}

			}

		}


		function porsiyonuygula(_porsiyon){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');
					var urun = localStorage.pos_urun;

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/urunguncelleporsiyon",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ porsiyon: _porsiyon, sira: localStorage.pos_urun_sira, kisim: bol[0], masa: bol[1], urun: urun }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							var _html = "";
							if (xhr.status == "200")
							{
								if (data=="OK"){
									$('#porsiyonModal').modal('hide');
									masagetir();
								}
								else{
									alertify.error("İşlem başarısız");
								}
								
								
							}
							
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});

					document.body.className = "loading";
				}

			}

		}


		function ikramuygula(_urun){

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="1"){
					alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
				}
				else{
					var bol = localStorage.pos_masa.split('|');

					document.body.className = "loading";

					$.ajax({
						type: 'post',
						url: "https://pos.posula.com/api/pos/ikramyap",
						dataType: 'json',
						contentType: 'application/json; charset=utf-8',
						data: JSON.stringify({ kisim: bol[0], masa: bol[1], urun: _urun }),
						success: function (data, textStatus, xhr) {
							document.body.className ="";  
							var _html = "";
							if (xhr.status == "200")
							{
								if (data=="OK"){
									masagetir();
								}
								else{
									alertify.error("İşlem başarısız");
								}
								
								
							}
							
						},
						error: function (hata) {
							document.body.className ="";
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					});

					document.body.className = "loading";
				}

				
			}

		}


		function soiskontouygula(_oran){
			document.getElementById("sepetsagtoplam").dataset.sagiskonto = _oran;

			const sagisktutar = document.querySelectorAll('[data-sepetsagisktutar]');

			let sagisktoplam = 0;
			sagisktutar.forEach(element1 => {
				sagisktoplam += parseFloat(element1.dataset.sepetsolisktutar);
				element1.dataset.sepetsagiskoran = _oran;
				element1.dataset.sepetsagisktutar = (element1.dataset.sepetsagbirim*element1.dataset.sepetsagadet) * _oran / 100;
			});

			secerekodetoplamhesapla();
			$('#soiskontoModal').modal('hide');
		}


		function okcentegrasyonkontrol(_kasa, _kisim, _masa, _tutar, _detay){

			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/entegrasyonkontrol",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kasa: _kasa, kisim: _kisim, masa: _masa, tutar: _tutar, detay: _detay, user: localStorage.pos_userno, cihaz: window.location.hostname }),
				success: function (data, textStatus, xhr) {
					var _html = "";
					if (xhr.status == "200")
					{
						if (data=="YOK"){
							localStorage.pos_entegrasyon_kontrol = "";
							return false;	
						}
						else{
							localStorage.pos_entegrasyon_kontrol = data;
							return true;
						}
					}
					
				},
				error: function (hata) {
					return false;
				}
			});
		}

		function mevcutokcentegrasyonkontrol(){
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/mevcutentegrasyonkontrol",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ id: localStorage.pos_entegrasyon_kontrol }),
				success: function (data, textStatus, xhr) {
					var _html = "";
					if (xhr.status == "200")
					{
						if (data=="OK"){
							
							document.body.className = "";
							localStorage.pos_entegrasyon_kontrol = "OK";
							//hesapkapat(document.getElementById("kupur_recipient").value);

							//localStorage.pos_entegrasyon_kasa = _kasa;
							//localStorage.pos_entegrasyon_islemtipi = "sohesapkapat";

							if (localStorage.pos_entegrasyon_islemtipi=="hesapkapat") hesapkapat(localStorage.pos_entegrasyon_kasa);
							else if (localStorage.pos_entegrasyon_islemtipi=="sohesapkapat") sohesapkapat(localStorage.pos_entegrasyon_kasa);
							else if (localStorage.pos_entegrasyon_islemtipi=="hesapkapatcekbol") hesapkapatcekbol();
							else if (localStorage.pos_entegrasyon_islemtipi=="tahsilat") tahsilatyap();
						}
					}
					
				},
				error: function (hata) {
					return false;
				}
			});
		}


		function fisiptal(){

			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/fisiptal",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ id: localStorage.pos_entegrasyon_kontrol }),
				success: function (data, textStatus, xhr) {
					var _html = "";
					if (xhr.status == "200")
					{
						if (data=="OK"){
							clearInterval(timerID);
							document.body.className = "";
							localStorage.pos_entegrasyon_kontrol = "";
						}
					}
					
				},
				error: function (hata) {
					return false;
				}
			});
		}
	
		function hesapkapat(_kasa){

			localStorage.pos_entegrasyon_kasa = _kasa;
			localStorage.pos_entegrasyon_islemtipi = "hesapkapat";

			var bol = localStorage.pos_masa.split('|');

			//if (localStorage.pos_fatura_durum="0" && parseFloat(localStorage.pos_tutar>)

			if (guidKontrol()){

				if (localStorage.pos_fatura_durum=="0" && parseFloat(localStorage.pos_tutar)>4400)
				{
					alertify.error("Tutar fiş limitini aştığı için önce fatura kesilmelidir");
				}
				else{
					if (localStorage.pos_entegrasyon_kontrol=="") okcentegrasyonkontrol(_kasa, bol[0], bol[1], localStorage.pos_tutar, "");

					if (localStorage.pos_entegrasyon_kontrol!="" && localStorage.pos_entegrasyon_kontrol!="OK"){
						document.body.className = "okc";
						timerID = setInterval(mevcutokcentegrasyonkontrol, 2000)
					}
					else{

						clearInterval(timerID);

						let carikontrol=true;

						if (_kasa=="Üye Kartı" || _kasa=="Veresiye"){
							if (document.getElementById("musteri").dataset.carino=="0") carikontrol=false;
						}
						
						if (carikontrol==true){

							var bol = localStorage.pos_masa.split('|');

							document.body.className = "loading";
						
							$.ajax({
								async:false,
								type: 'post',
								url: "https://pos.posula.com/api/pos/hesapkapattektip",
								dataType: 'json',
								contentType: 'application/json; charset=utf-8',
								data: JSON.stringify({ kasa: _kasa, kisim: bol[0], masa: bol[1], user: localStorage.pos_userno, cihaz: window.location.hostname }),
								success: function (data, textStatus, xhr) {
									document.body.className ="";  
									var _html = "";
									if (xhr.status == "200")
									{
										if (data=="OK"){
											localStorage.pos_entegrasyon_kontrol = "";
											document.body.className ="";  
											localStorage.pos_masa = localStorage.pos_masa.replace("dolu","bos");

											document.getElementById("musteri").innerHTML="";
											document.getElementById("musteri").dataset.carino="";
											document.getElementById("musteri").dataset.bakiye="";
											carikontrol=true;
											alertify.success("Ödeme tamamlandı");
											if (document.getElementById("masatipi").value!="1"){
												kilitkaldir(); 
												window.location=`pos.html`; //Kasa değilse çıkıyoruz.
											}
											else 
											{
												masagetir();
												$('#sagmenucnv').offcanvas('hide');
												$('#barkod').focus();
											}
											
										}
										else if (data=="Yetersiz bakiye"){
											alertify.error("Yetersiz bakiye");
										}
										else{
											alertify.error("Sistem yöneticisine başvurunuz");
										}
										
										
									}
									
								},
								error: function (hata) {
									document.body.className ="";
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							});
						}
						else{
							alertify.error("Veresiye veya Üye Kartı ile kapatabilmek için cari hesap seçiniz")
						}
					}
				}

				

			}

			
		}


		function sohesapkapat(_kasa){

			if (localStorage.pos_fatura_durum=="0" && parseFloat(document.getElementById("sepetsagtoplam").dataset.saghesap)>4400)
			{
				alertify.error("Tutar fiş limitini aştığı için önce fatura kesilmelidir");
			}
			else{
				var list1="";
				var birim = 0;
				const elem1 = document.querySelectorAll('[data-sepetsagbirim]');
				elem1.forEach(item1 => {
					birim = parseFloat(item1.dataset.sepetsagbirim)-parseFloat(item1.dataset.sepetsagisktutar);
					list1 += item1.dataset.sepetsagurunadi + "|" + item1.dataset.sepetsagadet + "|" + birim + "|" + item1.dataset.sepetsagkdvorani + "@";
				});

				list1 = list1.slice(0,-1);

				var saghesap1 = document.getElementById("sepetsagtoplam").dataset.saghesap;

				var bol = localStorage.pos_masa.split('|');

				localStorage.pos_entegrasyon_kasa = _kasa;
				localStorage.pos_entegrasyon_islemtipi = "sohesapkapat";
				localStorage.pos_entegrasyon_so_islemler = list1;
				localStorage.pos_entegrasyon_so_hesap = saghesap1;

				if (guidKontrol()){

					if (localStorage.pos_entegrasyon_kontrol=="") okcentegrasyonkontrol(_kasa, bol[0], bol[1], document.getElementById("sepetsagtoplam").dataset.saghesap, list1);

					if (localStorage.pos_entegrasyon_kontrol!="" && localStorage.pos_entegrasyon_kontrol!="OK"){
						document.body.className = "okc";
						timerID = setInterval(mevcutokcentegrasyonkontrol, 2000)
					}
					else{

						clearInterval(timerID);
						
						let carikontrol=true;

						if (_kasa=="Üye Kartı" || _kasa=="Veresiye"){
							if (document.getElementById("musteri").dataset.carino=="0") carikontrol=false;
						}
						
						if (carikontrol==true){
							var bol = localStorage.pos_masa.split('|');

							document.body.className = "loading";
							
							var list = "";

							var sagiskonto = document.getElementById("sepetsagtoplam").dataset.sagiskonto;
							var sagtutar = document.getElementById("sepetsagtoplam").dataset.sagtutar;
							var saghesap = document.getElementById("sepetsagtoplam").dataset.saghesap;

							const elem = document.querySelectorAll('[data-sepetsagbirim]');
							elem.forEach(item => {
								//list = urunid + | + miktar + @
								list += item.dataset.sagurunid + "|" + item.dataset.sepetsagadet + "|" + item.dataset.sepetsagbirim + "|" + item.dataset.sepetsagiskoran + "|" + item.dataset.sepetsagisktutar + "@"
							});

							list = list.slice(0,-1);



							$.ajax({
								async:false,
								type: 'post',
								url: "https://pos.posula.com/api/pos/hesapkapatsecerekode",
								dataType: 'json',
								contentType: 'application/json; charset=utf-8',
								data: JSON.stringify({ kasa: _kasa, kisim: bol[0], masa: bol[1], user: localStorage.pos_userno, list: list, iskonto: sagiskonto, tutar: sagtutar, hesap: saghesap, cihaz: window.location.hostname }),
								success: function (data, textStatus, xhr) {
									document.body.className ="";  
									var _html = "";
									if (xhr.status == "200")
									{
										if (data=="OK"){
											document.body.className ="";  
											//#secerekodeModal
											localStorage.pos_entegrasyon_kontrol = "";
											const elemsol = document.querySelectorAll('[data-sepetsolbirim]');
											if (elemsol.length==0) {
											
												localStorage.pos_masa = localStorage.pos_masa.replace("dolu","bos");
												document.getElementById("musteri").innerHTML="";
												document.getElementById("musteri").dataset.carino="";
												document.getElementById("musteri").dataset.bakiye="";
												carikontrol=true;
												alertify.success("Ödeme tamamlandı");
												if (document.getElementById("masatipi").value!="1"){
													kilitkaldir(); 
													window.location=`pos.html`; //Kasa değilse çıkıyoruz.
												}
												else masagetir();
											}
											else masagetir();
											
										}
										else if (data=="Yetersiz bakiye"){
											alertify.error("Yetersiz bakiye");
										}
										else{
											alertify.error("Sistem yöneticisine başvurunuz");
										}
										
										
									}
									
								},
								error: function (hata) {
									document.body.className ="";
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							});
						}
						else{
							alertify.error("Veresiye veya Üye Kartı ile kapatabilmek için cari hesap seçiniz")
						}
					}
				}

			}
			
			
			

		}


		function isTextSelected(input){
			var startPos = input.selectionStart;
			var endPos = input.selectionEnd;
			var doc = document.selection;

			if(doc && doc.createRange().text.length != 0){
				return true;
			}else if (!doc && input.value.substring(startPos,endPos).length != 0){
				return true;
			}
			return false;
		}
	
		function cekbolgetir(){

			
			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/tumkasalarigetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) { 
					var _html = "";
					if (xhr.status == "200")
					{
						if (data.length>0){
							
							$.each(data,
							function (key, item) {
								_html += "<tr><td style='width:70%;'>"+item.KASAADI+"</td><td style='width:30%;'><input onclick='secimyap(this); localStorage.pos_cekbol=`"+item.KASAADI+"`; kalanhesaplainput(); $(`#adetcekbolModal`).modal(`show`);' class='form-control' data-cekbol='"+item.KASAADI+"' type='number' value='0' style='text-align:right;'></td></tr>";
								
							});
							document.getElementById("cekboltbl").innerHTML = _html;
						}
						else{
							document.getElementById("cekboltbl").innerHTML = "";
						}
						
						
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		}

		function secimyap(el){
			document.getElementById("m_adetcekbol").select();
		}
	
		function kalanhesapla(){

			var bol = localStorage.pos_masa.split('|');
			document.getElementById("masa").innerHTML = bol[1];

			if (bol[2]=="dolu"){
				$.ajax({
					type: 'post',
					url: "https://pos.posula.com/api/pos/masaicerikgetir",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ kisim: bol[0], masa: bol[1] }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						var _html = "";
						if (xhr.status == "200")
						{
							if (data.length>0){

								document.getElementById("hesapkapatbtn").innerText = "Kalan : " + data[0]["TUTAR"].toFixed(2).replace('.',',') + " ₺";
								document.getElementById("kalanhesaptxt").value = data[0]["TUTAR"];
								
							}
							else{
								document.getElementById("hesapkapatbtn").innerText = "Ödemeyi Tamamla";
							}
							
						}
						
					},
					error: function (hata) {
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});
			}
			else{
				document.getElementById("hesapkapatbtn").innerText = "Ödemeyi Tamamla";
			}
		}

		function kalanhesaplainput(){
			let toplam = 0;
			const cekbolinput = document.querySelectorAll('[data-cekbol]');
			cekbolinput.forEach(element => {
				if (element.value > 0) toplam = parseFloat(toplam) + parseFloat(element.value);
			});
			if ($('[data-cekbol="'+localStorage.pos_cekbol+'"]')[0].value>0) document.getElementById("m_adetcekbol").value = $('[data-cekbol="'+localStorage.pos_cekbol+'"]')[0].value;
			else document.getElementById("m_adetcekbol").value = parseFloat(document.getElementById('kalanhesaptxt').value)-toplam;
			document.getElementById("hesapkapatbtn").innerText = "Kalan : " + (parseFloat(document.getElementById('kalanhesaptxt').value)-toplam).toFixed(2).replace('.',',') + " ₺";
			if (document.getElementById("hesapkapatbtn").innerText == "Kalan : 0.00 ₺") document.getElementById("hesapkapatbtn").innerText = "Ödemeyi Tamamla";
			if (document.getElementById("hesapkapatbtn").innerText == "Kalan : 0,00 ₺") document.getElementById("hesapkapatbtn").innerText = "Ödemeyi Tamamla";
			if (parseFloat(document.getElementById('kalanhesaptxt').value)-toplam==0) document.getElementById("hesapkapatbtn").disabled=false;
			else document.getElementById("hesapkapatbtn").disabled=true;

			if (document.getElementById('m_adetcekbol').value.indexOf(',')>0 || document.getElementById('m_adetcekbol').value.indexOf('.')>0)
			{
				document.getElementById('m_adetcekbol').value = parseFloat(document.getElementById('m_adetcekbol').value).toFixed(2);
			}

			document.getElementById("m_adetcekbol").select();
		}

		function hesapkapatcekbol(){

			if (localStorage.pos_fatura_durum=="0" && parseFloat(localStorage.pos_tutar)>4400)
			{
				alertify.error("Tutar fiş limitini aştığı için önce fatura kesilmelidir");
			}
			else{
				var _list = "";

				var _kasa = "";

				const cekbolinput = document.querySelectorAll('[data-cekbol]');
				cekbolinput.forEach(element => {
					if (element.value > 0) {
						_kasa += '"' + element.dataset.cekbol + '",';
						_list += element.dataset.cekbol + "@" + element.value.replace(".",",") + "|";
					}

				});

				var bol = localStorage.pos_masa.split('|');

				localStorage.pos_entegrasyon_kasa = _kasa;
				localStorage.pos_entegrasyon_islemtipi = "hesapkapatcekbol";

				if (guidKontrol()){

					if (localStorage.pos_entegrasyon_kontrol=="") okcentegrasyonkontrol(_kasa.slice(0,-1), bol[0], bol[1], localStorage.pos_tutar, _list.slice(0,-1));

					if (localStorage.pos_entegrasyon_kontrol!="" && localStorage.pos_entegrasyon_kontrol!="OK"){
						document.body.className = "okc";
						timerID = setInterval(mevcutokcentegrasyonkontrol, 2000)
					}
					else{

						let carikontrolcekbol=true;
						if (_list.indexOf("Üye Kartı")>=0 || _list.indexOf("Veresiye")>=0){
							if (document.getElementById("musteri").dataset.carino=="0") carikontrolcekbol=false;
						}

						

						if (carikontrolcekbol==true){

							document.body.className = "loading";

							$.ajax({
								async:false,
								type: 'post',
								url: "https://pos.posula.com/api/pos/hesapkapatcekbol",
								dataType: 'json',
								contentType: 'application/json; charset=utf-8',
								data: JSON.stringify({ list: _list.slice(0,-1), kisim: bol[0], masa: bol[1], user: localStorage.pos_userno, cihaz: window.location.hostname }),
								success: function (data, textStatus, xhr) {
									document.body.className ="";  
									var _html = "";
									if (xhr.status == "200")
									{
										if (data=="OK"){
											$('#cekbolModal').modal('hide');
											localStorage.pos_entegrasyon_kontrol = "";
											document.body.className ="";  
											document.getElementById("musteri").innerHTML="";
											document.getElementById("musteri").dataset.carino="";
											document.getElementById("musteri").dataset.bakiye="";
											carikontrolcekbol=true;
											localStorage.pos_masa = localStorage.pos_masa.replace("dolu","bos");
											alertify.success("Ödeme tamamlandı");
											if (document.getElementById("masatipi").value!="1"){
												kilitkaldir(); 
												window.location=`pos.html`; //Kasa değilse çıkıyoruz.
											}
											else masagetir();
											
										}
										else if (data=="Yetersiz bakiye"){
											alertify.error("Yetersiz bakiye");
										}
										else{
											alertify.error("Sistem yöneticisine başvurunuz");
										}
										
										
									}
									
								},
								error: function (hata) {
									document.body.className ="";
									alertify.error("Sistem yöneticisine başvurunuz");
								}
							});
						}
						else{
							alertify.error("Veresiye veya Üye Kartı ile kapatabilmek için cari hesap seçiniz")
						}
					}
				}
			}

		}
	


		const masatasiModal = document.getElementById('masatasiModal')
		masatasiModal.addEventListener('show.bs.modal', event => {
			const button = event.relatedTarget
			const recipient = button.getAttribute('data-bs-whatever')
			//var bol = localStorage.pos_masa.split('|');
			document.getElementById("mt_masaid").value = localStorage.pos_masa;

			kisimgetir_mt();
		});

		function kisimgetir_mt(){

			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/kisimgetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								if (key==0)
								{
									_html += "<button class='btn btn-secondary btn-block my-2 p-0' style='width: 100%;min-height: 50px;' data-kisimbtnmt='"+item.KISIM+"' onclick='kisimsec_mt(this);'>"+item.KISIM+"</button>";
									masagetir_mt(item.KISIM);
								}
								else _html += "<button class='btn btn-outline-secondary btn-block my-2 p-0' style='width: 100%;min-height: 50px;' data-kisimbtnmt='"+item.KISIM+"' onclick='kisimsec_mt(this);'>"+item.KISIM+"</button>";
							});
							document.getElementById("masatasi_kisimlar").innerHTML = _html;
						}
						else{
							document.getElementById("masatasi_kisimlar").innerHTML = "";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

		function kisimsec_mt(el){
			const kisimbtn = document.querySelectorAll('[data-kisimbtnmt]');
			kisimbtn.forEach(element => {
				element.classList.remove('btn-secondary');
				element.classList.add('btn-outline-secondary');
			});

			el.classList.add('btn-secondary');

			masagetir_mt(el.dataset.kisimbtnmt);
		}

		function masagetir_mt(_kisim){
			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/masagetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: _kisim }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								if (item.RENK=="#5df18a"){//BOŞ
									if (item.LOCKDURUM=="1") 
									{//localStorage.pos_dataid
										if (localStorage.pos_dataid == item.KAYITSIRANO) //Taşımak için seçtiğimiz masa mı?	
										{
											_html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); alertify.error(`Bu masayı taşıyorsunuz.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='bos' data-kilit='1' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style=' padding-top:50px;font-size:24px; margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: dodgerblue; color:white; box-shadow: 0px 0px 8px rgba(0,0,0,0.3);'>"+item.MASAISMI+"</div></div>";
										}
										else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); alertify.error(`Masada "+item.ISLEMYAPAN.substr(item.ISLEMYAPAN.indexOf('@')+1,item.ISLEMYAPAN.length)+" kullanıcısı işlem yapıyor.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='bos' data-kilit='1' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style=' padding-top:50px;font-size:24px; margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: "+item.RENK+"; box-shadow: 0px 0px 8px rgba(0,0,0,0.3);'>"+item.MASAISMI+"</div></div>";
									}
									else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); document.getElementById(`mt_masaidyeni`).value=`"+item.KISIM+"|"+item.MASAISMI+"|"+item.KAYITSIRANO+"`; (this).style.backgroundColor=`dodgerblue`; (this).style.color=`white`;' data-masaid='"+item.KAYITSIRANO+"' data-durum='bos' data-kilit='0' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style=' padding-top:50px;font-size:24px; margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); height: 100%; background-color: "+item.RENK+"; box-shadow: 0px 0px 8px rgba(0,0,0,0.3);'>"+item.MASAISMI+"</div></div>";
								}
								else{ //DOLU
									if (item.SAAT=="0") 
									{
										if (item.LOCKDURUM=="1")
										{
											if (localStorage.pos_dataid == item.KAYITSIRANO) //Taşımak için seçtiğimiz masa mı?	
											{
												_html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); alertify.error(`Bu masayı taşıyorsunuz.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: dodgerblue; color:white; box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
											}
											else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); alertify.error(`Masada "+item.ISLEMYAPAN.substr(item.ISLEMYAPAN.indexOf('@')+1,item.ISLEMYAPAN.length)+" kullanıcısı işlem yapıyor.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
										} 
										else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); document.getElementById(`mt_masaidyeni`).value=`"+item.KISIM+"|"+item.MASAISMI+"|"+item.KAYITSIRANO+"`; (this).style.backgroundColor=`dodgerblue`; (this).style.color=`white`;' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='0' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
									}
									else {
										if (item.LOCKDURUM=="1"){
											if (localStorage.pos_dataid == item.KAYITSIRANO) //Taşımak için seçtiğimiz masa mı?	
											{
												_html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); alertify.error(`Bu masayı taşıyorsunuz.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: dodgerblue; color:white; box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.SAAT+" Sa. "+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
											}
											else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); alertify.error(`Masada "+item.ISLEMYAPAN.substr(item.ISLEMYAPAN.indexOf('@')+1,item.ISLEMYAPAN.length)+" kullanıcısı işlem yapıyor.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.SAAT+" Sa. "+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
										} 
										else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_mt(); document.getElementById(`mt_masaidyeni`).value=`"+item.KISIM+"|"+item.MASAISMI+"|"+item.KAYITSIRANO+"`; (this).style.backgroundColor=`dodgerblue`; (this).style.color=`white`;' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='0' data-kisim='"+item.KISIM+"' data-masamt='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.SAAT+" Sa. "+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
									}
								}
							});
							document.getElementById("masatasi_masalar").innerHTML = _html;
						}
						else{
							document.getElementById("masatasi_masalar").innerHTML = "";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

		function vazgec_mt(){
			const elem1 = document.querySelectorAll('[data-masamt]');
			elem1.forEach(element => {
				if (element.dataset.masamt != localStorage.pos_masa.split("|")[1] && element.style.backgroundColor == "dodgerblue")
				{
					element.style.backgroundColor = element.dataset.renk;
					element.style.color = "black";
				}
			});
		}

		function masatasi(){

			if (localStorage.pos_fatura_durum=="1"){
				alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
			}
			else{
				var eski = document.getElementById("mt_masaid").value;
				var yeni = document.getElementById("mt_masaidyeni").value;

				document.body.className = "loading";

				$.ajax({
					type: 'post',
					url: "https://pos.posula.com/api/pos/masatasi",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ eski: eski, yeni: yeni, user: localStorage.pos_userno }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						if (xhr.status == "200")
						{
							if (data=="OK"){
								localStorage.pos_dataid = "";
								window.location = 'pos.html';
							}
							else{
								alertify.error("Masa taşınamadı");
							}
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Masa taşınamadı");
					}
				});
			}

			
		}
	
	
	
	
	
		const uruntasiModal = document.getElementById('uruntasiModal')
		uruntasiModal.addEventListener('show.bs.modal', event => {
			const button = event.relatedTarget
			const recipient = button.getAttribute('data-bs-whatever')
			document.getElementById("ut_masaid").value = localStorage.pos_masa;

			masadetaygetir_mt(localStorage.pos_masa.split('|')[0], localStorage.pos_masa.split('|')[1]);
		});

	
		function masadetaygetir_mt(kisim, masa){

			return new Promise((resolve) => {
				$.ajax({
					type: 'post',
					url: "https://pos.posula.com/api/pos/masaicerikgetir",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ kisim: kisim, masa: masa }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						var _html = "";
						if (xhr.status == "200")
						{
							if (data.length>0){
								
								var _html="<div class='row m-0 pt-2 bg-secondary text-white' style='border-radius:5px; font-weight:600; font-size:14px; min-height: 40px;'><div class='col-1 px-1 py-1 text-center'>Seç</div><div class='col-7 px-1 py-0'>Ürün</div><div class='col-2 px-1 py-0 text-center'>Miktar</div><div class='col-2 px-1 py-0' style='text-align:right;'>Tutar</div></div>";
								var _renk = "";
								var _sonref = "";
								$.each(data,
								function (key, item) {
									if (key % 2 == 1) _renk = "#lightgrey";
									else _renk = "#fff";

									if (item.STOKADI.indexOf('==>') < 0) _sonref = item.GRUPADI;

									if (item.STOKADI.indexOf('==>')>-1){ //Ürün notu
										_html += "<div class='row m-0 p-0' style='font-size:14px; background-color:"+_renk+"; min-height: 28px; color:red;'><div class='col-1 px-1 py-0 text-center'><input class='form-check-input' style='margin-top:3px; margin-left:-10px; width:25px; height:25px;' type='checkbox' value='"+item.SIRANO+"' id='check"+item.SIRANO+"' name='checkurun'></td></div><div class='col-11 px-1 py-1'>&nbsp;&nbsp;&nbsp;"+item.STOKADI+"</div></div>";
									}
									else _html += "<div class='row m-0 p-0' style='font-size:14px; background-color:"+_renk+"; min-height: 28px;'><div class='col-1 px-1 py-0 text-center'><input class='form-check-input' style='margin-top:3px; margin-left:-10px; width:25px; height:25px;' type='checkbox' value='"+item.SIRANO+"' id='check"+item.SIRANO+"' name='checkurun'></div><div class='col-7 px-1 py-1'>"+item.STOKADI+"</div><div class='col-2 px-1 py-1 text-center'>"+item.ADET+"</div><div class='col-2 px-1 py-1' style='text-align:right;'>"+item.SATIRTUTAR.toFixed(2).replace('.',',')+"</div></div>";
									
									
								});
								document.getElementById("uruntasi_urundiv").innerHTML = _html;
								resolve("2");
							}
							else{
								document.getElementById("uruntasi_urundiv").innerHTML = "<div class='row m-0 pt-2 bg-secondary text-white' style='border-radius:5px; font-weight:600; font-size:14px; min-height: 40px;'><div class='col-1 px-1 py-0'></div><div class='col-7 px-1 py-0'>Ürün</div><div class='col-2 px-1 py-0 text-center'>Mktr</div><div class='col-2 px-1 py-0' style='text-align:right;'>Tutar</div></div>";
							}
							
							
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Sistem yöneticisine başvurunuz");
					}
				});
			});


		}
		
		const uruntasiModal1 = document.getElementById('uruntasiModal')
		uruntasiModal1.addEventListener('hidden.bs.modal', event => {
			
			document.getElementById('uruntasi_masasec').style.display='none'; 
			document.getElementById('uruntasi_urunsec').style.display=''; 
			document.getElementById('uruntasi_geribtn').style.display='none'; 
			document.getElementById('uruntasi_ileribtn').style.display='inline-block'; 
			document.getElementById('uruntasi_onaybtn').style.display='none'; 
			document.getElementById('uruntasi_baslik').innerText = 'Taşınacak ürünleri seçiniz';
		});

		function kisimgetir_ut(){

			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/kisimgetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								if (key==0)
								{
									_html += "<button class='btn btn-secondary btn-block my-2 p-0' style='width: 100%;min-height: 50px;' data-kisimbtnut='"+item.KISIM+"' onclick='kisimsec_ut(this);'>"+item.KISIM+"</button>";
									masagetir_ut(item.KISIM);
								}
								else _html += "<button class='btn btn-outline-secondary btn-block my-2 p-0' style='width: 100%;min-height: 50px;' data-kisimbtnut='"+item.KISIM+"' onclick='kisimsec_ut(this);'>"+item.KISIM+"</button>";
							});
							document.getElementById("uruntasi_kisimlar").innerHTML = _html;
						}
						else{
							document.getElementById("uruntasi_kisimlar").innerHTML = "";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}


		function kisimsec_ut(el){
			const kisimbtn = document.querySelectorAll('[data-kisimbtnut]');
			kisimbtn.forEach(element => {
				element.classList.remove('btn-secondary');
				element.classList.add('btn-outline-secondary');
			});

			el.classList.add('btn-secondary');

			masagetir_ut(el.dataset.kisimbtnut);
		}
	
	
		function masagetir_ut(_kisim){
			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/masagetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ kisim: _kisim }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data.length>0){
							var _html="";
							$.each(data,
							function (key, item) {
								if (item.RENK=="#5df18a"){//BOŞ
									if (item.LOCKDURUM=="1") 
									{
										console.log(item);
										//localStorage.pos_dataid
										if (localStorage.pos_dataid == item.KAYITSIRANO) //Taşımak için seçtiğimiz masa mı?	
										{
											_html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); alertify.error(`Bu masayı taşıyorsunuz.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='bos' data-kilit='1' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style=' padding-top:50px;font-size:24px; margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: dodgerblue; color:white; box-shadow: 0px 0px 8px rgba(0,0,0,0.3);'>"+item.MASAISMI+"</div></div>";
										}
										else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); alertify.error(`Masada "+item.ISLEMYAPAN.substr(item.ISLEMYAPAN.indexOf('@')+1,item.ISLEMYAPAN.length)+" kullanıcısı işlem yapıyor.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='bos' data-kilit='1' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style=' padding-top:50px;font-size:24px; margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: "+item.RENK+"; box-shadow: 0px 0px 8px rgba(0,0,0,0.3);'>"+item.MASAISMI+"</div></div>";
									}
									else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); document.getElementById(`ut_masaidyeni`).value=`"+item.KISIM+"|"+item.MASAISMI+"|"+item.KAYITSIRANO+"`; (this).style.backgroundColor=`dodgerblue`; (this).style.color=`white`;' data-masaid='"+item.KAYITSIRANO+"' data-durum='bos' data-kilit='0' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style=' padding-top:50px;font-size:24px; margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); height: 100%; background-color: "+item.RENK+"; box-shadow: 0px 0px 8px rgba(0,0,0,0.3);'>"+item.MASAISMI+"</div></div>";
								}
								else{ //DOLU
									if (item.SAAT=="0") 
									{
										if (item.LOCKDURUM=="1")
										{
											console.log(item);
											if (localStorage.pos_dataid == item.KAYITSIRANO) //Taşımak için seçtiğimiz masa mı?	
											{
												_html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); alertify.error(`Bu masayı taşıyorsunuz.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: dodgerblue; color:white; box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
											}
											else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); alertify.error(`Masada "+item.ISLEMYAPAN.substr(item.ISLEMYAPAN.indexOf('@')+1,item.ISLEMYAPAN.length)+" kullanıcısı işlem yapıyor.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
										} 
										else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); document.getElementById(`ut_masaidyeni`).value=`"+item.KISIM+"|"+item.MASAISMI+"|"+item.KAYITSIRANO+"`; (this).style.backgroundColor=`dodgerblue`; (this).style.color=`white`;' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='0' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
									}
									else {
										if (item.LOCKDURUM=="1")
										{
											console.log(item);
											if (localStorage.pos_dataid == item.KAYITSIRANO) //Taşımak için seçtiğimiz masa mı?	
											{
												_html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); alertify.error(`Bu masayı taşıyorsunuz.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: dodgerblue; color:white; box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.SAAT+" Sa. "+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
											}
											else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); alertify.error(`Masada "+item.ISLEMYAPAN.substr(item.ISLEMYAPAN.indexOf('@')+1,item.ISLEMYAPAN.length)+" kullanıcısı işlem yapıyor.`);' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='1' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:3px solid black; height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.SAAT+" Sa. "+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
										} 
										else _html += "<div class='col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 my-2 px-1' style='height: 140px; min-height: 140px; text-align: center;display:inline-block;'><div onclick='vazgec_ut(); document.getElementById(`ut_masaidyeni`).value=`"+item.KISIM+"|"+item.MASAISMI+"|"+item.KAYITSIRANO+"`; (this).style.backgroundColor=`dodgerblue`; (this).style.color=`white`;' data-masaid='"+item.KAYITSIRANO+"' data-durum='dolu' data-kilit='0' data-kisim='"+item.KISIM+"' data-masaut='"+item.MASAISMI+"' data-renk='"+item.RENK+"' data-guid='"+item.ISLEMYAPAN+"' style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); height: 100%; background-color: "+item.RENK+";box-shadow: 0px 0px 8px rgba(0,0,0,0.3); padding-top:5px;'><span style='font-size:20px;'>"+item.MASAISMI+"</span><br>"+item.TUTAR.toFixed(2).replace(".",",")+"<br>"+item.GARSON+"<br>"+item.SAAT+" Sa. "+item.DK+" Dk.<br>"+item.FIRMAISMI.substr(0,10)+"</div></div>";
									}
								}
							});
							document.getElementById("uruntasi_masalar").innerHTML = _html;
						}
						else{
							document.getElementById("uruntasi_masalar").innerHTML = "";
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}
	
		function vazgec_ut(){
			const elem1 = document.querySelectorAll('[data-masaut]');
			elem1.forEach(element => {
				if (element.dataset.masaid != localStorage.pos_masa.split("|")[1] && element.style.backgroundColor == "dodgerblue")
				{
					element.style.backgroundColor = element.dataset.renk;
					element.style.color = "black";
				}
			});
		}
	

		function uruntasi(){

			if (localStorage.pos_fatura_durum=="1"){
				alertify.error("Fatura yazdırılan adisyonda değişiklik yapılamaz");
			}
			else{
				var isaretliler = document.querySelectorAll('input[name=checkurun]:checked');
				if (isaretliler.length>0){
					if (document.getElementById("ut_masaidyeni").value!=""){
						
						var urunler = "";
						
						isaretliler.forEach(item => {
							urunler += item.value + ",";
						});

						urunler = urunler.slice(0,-1);

						$("#uruntasiModal").modal("hide");

						var eski = document.getElementById("ut_masaid").value;
						var yeni = document.getElementById("ut_masaidyeni").value;

						document.body.className = "loading";

						$.ajax({
							type: 'post',
							url: "https://pos.posula.com/api/pos/uruntasi",
							dataType: 'json',
							contentType: 'application/json; charset=utf-8',
							data: JSON.stringify({ eski: eski, yeni: yeni, user: localStorage.pos_userno, urunler: urunler }),
							success: function (data, textStatus, xhr) {
								document.body.className ="";  
								if (xhr.status == "200")
								{
									if (data=="OK"){
										alertify.success("Ürünler taşındı");
										masagetir();
										localStorage.pos_dataid = "";

									}
									else{
										alertify.error("Ürünler taşınamadı");
									}
								}
								
							},
							error: function (hata) {
								document.body.className ="";
								alertify.error("Ürünler taşınamadı");
							}
						});

					}
					else{
						alertify.error("Masa seçiniz");
					}
				}
				else{
					alertify.error("Ürün seçiniz");
				}
			}

			

			
		}





















	function alturunekle(_hamstoksirano, _usturunhamstoksirano, _menuno){

		if (guidKontrol()){

			var bol = localStorage.pos_masa.split('|');

			var _carino = document.getElementById("musteri").dataset.carino;

			document.body.className = "loading";

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/uruneklesepet",
				dataType: 'json',
				async: false,
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ usturunhamstokno:_usturunhamstoksirano, hamstoksirano: _hamstoksirano, userno: localStorage.pos_userno, miktar: localStorage.pos_amadet, kisim: bol[0], masa: bol[1], durum: bol[2], carino: _carino, menu: "0", menuno: _menuno }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _kontrol="0"
					if (xhr.status == "200")
					{ //EKLENENE GÖRE KALAN HESAPLANIP İŞLEM YAPILACAK.
						if (data == "OK"){

							var eski = localStorage.pos_masa;
							if (eski.indexOf('bos')>-1) _kontrol="1";
							yeni = eski.replace('bos','dolu');
							localStorage.pos_masa = yeni;

							if (document.getElementById("musteri").dataset.carino!=""){
								if (_kontrol=="1") cariekleara(document.getElementById("musteri").dataset.carino);
							}


							console.log(document.getElementById("am_toplamadet").value);
							console.log(localStorage.pos_amadet);
							console.log(parseFloat(document.getElementById("am_toplamadet").value) - parseFloat(localStorage.pos_amadet));


							document.getElementById("am_toplamadet").value = parseFloat(document.getElementById("am_toplamadet").value) - parseFloat(localStorage.pos_amadet);
							

							if (document.getElementById("am_altmenutipi").value == "2"){
								if (document.getElementById("am_toplamadet").value=="0"){ //Tamamı eklendi
									altmenumodalkapat();
								}
								else {
									if (parseFloat(localStorage.pos_amadet) > parseFloat(document.getElementById("am_toplamadet").value)) //Eğer eklenmeye devam edilecek olan rakam kalandan fazlaysa kalan kadara düşürüyoruz
									{
										localStorage.pos_amadet = document.getElementById("am_toplamadet").value;
									}
								}
							}
							
							
							masagetir();
							adetsec1();
						}
						
						else if (data == "HATA"){
							alertify.error("Sistem yöneticisine başvurunuz");
						}

						
					}
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});
		}

	}






	function altmenumodalkapat(){
		//Modal kapatırken tutulan cookie'de başka alt menü var mı bakılacak. Varsa yeniden açılacak.

		if (localStorage.pos_altmenu_liste.length>0){ //Eklenmesi gereken başka alt menü varsa
			
			console.log(localStorage.pos_altmenu_liste);
			var liste = localStorage.pos_altmenu_liste.split(',');
			localStorage.pos_altmenu_liste = localStorage.pos_altmenu_liste.replace(liste[0] + ",", "");
			
			_hamstoksirano = document.getElementById("am_usturunhamstoksirano").value;

			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/altmenugetir",
				dataType: 'json',
				async: false,
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ menuhamstokno: liste[0] }),
				success: function (data1, textStatus1, xhr1) {
					document.body.className ="";  
					var son = "";
					var yeni = "";
					if (xhr1.status == "200")
					{
						if (data1.length > 0){
							var _html1="";
							$.each(data1,
							function (key1, item1) {
								var test = item1.SCRNAME;
								for (i=0;i>-1;i++){
									son = "";
									yeni = "";
									
									if (test.indexOf(' ')>-1){
										yeni = test.substring(0,test.indexOf(' '));
										if (yeni.length>10) yeni=yeni.substring(0,9)+"<br>"+yeni.substring(9,yeni.length);
										son += yeni + " ";
										test = test.substring(test.indexOf(' ')+1,test.length);
									}
									else{
										if (test.length>0){
											yeni = test;
											if (yeni.length>10) yeni=yeni.substring(0,9)+"<br>"+yeni.substring(9,yeni.length);
											son += yeni + " ";
										}
										i = -2;
									}
								}

								_html1 += "<div onclick='alturunekle(`"+item1.HAMSTOKSIRANO+"`, `"+_hamstoksirano+"`, `"+item1.MENUNO+"`)' class='col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12 my-2 px-1' style='min-height: 100px; text-align: center;'><div style='margin: 2px;border-radius: 10px; border:1px solid rgb(192, 192, 192); background-color: #fcfcfc; height: 100%; font-weight:bold; font-size:14px;' class='am_urunbtn'>"+son+"<br>"+item1.PRICE.toFixed(2).replace('.',',')+" ₺</div></div>";
							});
							document.getElementById("altmenu").innerHTML = _html1;

							document.getElementById("am_adet").value = "1";
							document.getElementById("am_toplamadet").value = localStorage.pos_adet;
							document.getElementById("am_altmenutipi").value = data1[0]["MENU"];
							am_adetsec1();
							localStorage.pos_amadet = "1";
							//$('#altmenuModal').modal('show');
						}
						
						else if (data == "HATA"){
							alertify.error("Sistem yöneticisine başvurunuz");
						}
					}
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});


		}
		else{
			$('#altmenuModal').modal('hide');
			masagetir();
			adetsec();
			adetsec1();
		}

	}


/*
cariadie
caritele
cariceptele
carimaile
carivergidairesie
cariverginoe
cariaciklamae
carimahallee
cariadrese
cariilcee
cariile
caritipie
carifiyatgrubue
cariiskontoe
*/

	function cariekle(){

		var cariadie = document.getElementById("cariadie").value;
		var caritele = document.getElementById("caritele").value;
		var cariceptele = document.getElementById("cariceptele").value;
		var carimaile = document.getElementById("carimaile").value;
		var carivergidairesie = document.getElementById("carivergidairesie").value;
		var cariverginoe = document.getElementById("cariverginoe").value;
		var cariaciklamae = document.getElementById("cariaciklamae").value;
		var carimahallee = document.getElementById("carimahallee").value;
		var cariadrese = document.getElementById("cariadrese").value;
		var cariilcee = document.getElementById("cariilcee").value;
		var cariile = document.getElementById("cariile").value;
		var caritipie = document.getElementById("caritipie").value;
		var carifiyatgrubue = document.getElementById("carifiyatgrubue").value;
		var cariiskontoe = document.getElementById("cariiskontoe").value;

		if (cariadie!=""){

			document.body.className = "loading";
			$.ajax({
				type: 'post',
				url: "https://pos.posula.com/api/pos/cariekle",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ cariadie:cariadie, caritele:caritele, cariceptele:cariceptele, carimaile:carimaile, 
					carivergidairesie:carivergidairesie,cariverginoe:cariverginoe,cariaciklamae:cariaciklamae,carimahallee:carimahallee,
					cariadrese:cariadrese,cariilcee:cariilcee,cariile:cariile,caritipie: caritipie,carifiyatgrubue: carifiyatgrubue,cariiskontoe:cariiskontoe}),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					if (xhr.status == "200")
					{
						if (data!="HATA"){
							$('#cariekleModal').modal('hide');
							if (localStorage.pos_cari_modal=='cari') $('#cariModal').modal('show');
							else if (localStorage.pos_cari_modal=='fatura') $('#faturaModal').modal('show');
							carimodaltemizle();
						}
						else{
							alertify.error("Cari eklenemedi");
						}
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Cari eklenemedi");
				}
			});
		}
		else{
			alertify.error("Cari adını giriniz");
		}
	}


	const cariduzenleModal = document.getElementById('cariduzenleModal')
		cariduzenleModal.addEventListener('show.bs.modal', event => {

			const button = event.relatedTarget
			const recipient = button.getAttribute('data-bs-whatever')
			document.getElementById("cariduzenlemodalno").value = recipient;

			document.body.className = "loading";
			
			$.ajax({
				async:false,
				type: 'post',
				url: "https://pos.posula.com/api/pos/caridetaygetir",
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify({ carino: recipient }),
				success: function (data, textStatus, xhr) {
					document.body.className ="";  
					var _html = "";
					if (xhr.status == "200")
					{
						document.getElementById("cariadid").value = data[0]["ADI"];
						document.getElementById("cariteld").value = data[0]["TELEFON1"];
						document.getElementById("caricepteld").value = data[0]["CEPTEL"];
						document.getElementById("carimaild").value = data[0]["EMAIL"];
						document.getElementById("carivergidairesid").value = data[0]["VERGIDAIRE"];
						document.getElementById("cariverginod").value = data[0]["VERGINO"];
						document.getElementById("cariaciklamad").value = data[0]["ACIKLAMA"];
						document.getElementById("carimahalled").value = data[0]["MAHALLE"];
						document.getElementById("cariadresd").value = data[0]["ADRES"];
						document.getElementById("cariilced").value = data[0]["ILCE"];
						document.getElementById("cariild").value = data[0]["SEHIR"];
						document.getElementById("cariiskontod").value = data[0]["ISKONTOORANI"];
						document.getElementById("carifiyatgrubud").value = data[0]["SATISFIYATGRUPNO"];
						document.getElementById("caritipid").value = data[0]["MUSTERITIPI"];
						document.getElementById("caridurumd").value = data[0]["AKTIFPASIF"];
					}
					
				},
				error: function (hata) {
					document.body.className ="";
					alertify.error("Sistem yöneticisine başvurunuz");
				}
			});

		})

		function cariduzenle(){
			var carinoe = document.getElementById("cariduzenlemodalno").value;
			var cariadie = document.getElementById("cariadid").value;
			var caritele = document.getElementById("cariteld").value;
			var cariceptele = document.getElementById("caricepteld").value;
			var carimaile = document.getElementById("carimaild").value;
			var carivergidairesie = document.getElementById("carivergidairesid").value;
			var cariverginoe = document.getElementById("cariverginod").value;
			var cariaciklamae = document.getElementById("cariaciklamad").value;
			var carimahallee = document.getElementById("carimahalled").value;
			var cariadrese = document.getElementById("cariadresd").value;
			var cariilcee = document.getElementById("cariilced").value;
			var cariile = document.getElementById("cariild").value;
			var cariiskontoe = document.getElementById("cariiskontod").value;
			var caritipie = document.getElementById("caritipid").value;
			var carifiyatgrubue = document.getElementById("carifiyatgrubud").value;
			var caridurume = document.getElementById("caridurumd").value;
			
			if (cariadie!=""){

				document.body.className = "loading";
				$.ajax({
					type: 'post',
					url: "https://pos.posula.com/api/pos/cariduzenle",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ carinoe: carinoe, cariadie:cariadie, caritele:caritele, cariceptele:cariceptele, carimaile:carimaile, 
					carivergidairesie:carivergidairesie,cariverginoe:cariverginoe,cariaciklamae:cariaciklamae,carimahallee:carimahallee,
					cariadrese:cariadrese,cariilcee:cariilcee,cariile:cariile,caritipie: caritipie,carifiyatgrubue: carifiyatgrubue,cariiskontoe:cariiskontoe, caridurume: caridurume}),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						if (xhr.status == "200")
						{
							if (data=="OK"){
								$('#cariduzenleModal').modal('hide');
								if (localStorage.pos_cari_modal=='cari') $('#cariModal').modal('show');
								else if (localStorage.pos_cari_modal=='fatura') $('#faturaModal').modal('show');
							}
							else{
								alertify.error("Cari düzenlenemedi");
							}
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Cari düzenlenemedi");
					}
				});
			}
		}



		function carimodaltemizle(){

			document.getElementById("carinoe").value = "";
			document.getElementById("cariadie").value = "";
			document.getElementById("caritele").value = "";
			document.getElementById("cariceptele").value = "";
			document.getElementById("carimaile").value = "";
			document.getElementById("carivergidairesie").value = "";
			document.getElementById("cariverginoe").value = "";
			document.getElementById("cariaciklamae").value = "";
			document.getElementById("carimahallee").value = "";
			document.getElementById("carisokake").value = "";
			document.getElementById("caribinanoe").value = "";
			document.getElementById("carikapinoe").value = "";
			document.getElementById("caripostakodue").value = "";
			document.getElementById("carisemte").value = "";
			document.getElementById("cariilcee").value = "";
			document.getElementById("cariile").value = "";
			document.getElementById("cariiskontoe").value = "0";

		}



		function tahsilatyap(){

			var carino = document.getElementById("caritahsilatmodalno").value;
			var tutar = document.getElementById("caritahsilattutar").value;
			var odemeturu = document.getElementById("caritahsilatodemeturu").value;

			localStorage.pos_entegrasyon_kasa = odemeturu;
			localStorage.pos_entegrasyon_islemtipi = "tahsilat";

			var kisim = localStorage.pos_masa.split('|')[0];
			var masaismi = localStorage.pos_masa.split('|')[1];
			
			if (localStorage.pos_entegrasyon_kontrol=="") okcentegrasyonkontrol(odemeturu, kisim, masaismi, parseFloat(tutar), "tahsilat@"+carino);

			if (localStorage.pos_entegrasyon_kontrol!="" && localStorage.pos_entegrasyon_kontrol!="OK"){
				$(`#caritahsilatModal`).modal(`hide`);
				document.body.className = "okc";
				timerID = setInterval(mevcutokcentegrasyonkontrol, 2000)
			}
			else{

				clearInterval(timerID);

				document.body.className = "loading";
				$.ajax({
					type: 'post',
					url: "https://pos.posula.com/api/pos/tahsilatyap",
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					data: JSON.stringify({ carino: carino, tutar: tutar, odemeturu: odemeturu, userno: localStorage.pos_userno, kisim: kisim, masa: masaismi }),
					success: function (data, textStatus, xhr) {
						document.body.className ="";  
						if (xhr.status == "200")
						{
							if (data!="OK"){
								alertify.error("Tahsilat yapılamadı");
							}
							else{
								localStorage.pos_entegrasyon_kontrol=""
								masagetir();
							}
						}
						
					},
					error: function (hata) {
						document.body.className ="";
						alertify.error("Tahsilat yapılamadı");
					}
				});
				
				$(`#caritahsilatModal`).modal(`hide`);
			}
		}

			
		

	
	</script>
</body>
</html>