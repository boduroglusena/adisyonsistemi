<!DOCTYPE html>

<html lang="tr">
  <head>
    <title>POSULA | Giriş</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/favicon.ico" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/bootstrap/css/bootstrap.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="fonts/font-awesome-4.7.0/css/font-awesome.min.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/css-hamburgers/hamburgers.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/select2/select2.min.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/alertifyJS/alertify.min.css"
    />
    <!--===============================================================================================-->

    <style>
      .alertify-notifier {
        color: #fff;
      }
    </style>
  </head>
  <body>
    
      <div class="container-login100">
        <form class="flex-center">
          <div class="login100-pic js-tilt" data-tilt>
            <img src="images/logoo.png" />
          </div>
          <div
            class="wrap-input100 validate-input"
            style="
              min-height: 60px !important;
              height: 60px !important;
              max-height: 60px !important;
            "
          >
            <input
              class="form-control text-center"
              type="password"
              autocomplete="off"
              placeholder="ŞİFRE"
              id="password"
              style="
                height: 60px !important;
                box-shadow: 0px 0px 8px #dbdbdb;
                background-color: white;
              "
            />
            
						<span class="focus-input100"></span>
						<span class="symbol-input100">
							<i class="fa fa-unlock-alt" aria-hidden="true"></i>
						</span>
						
          </div>

          <div class="row">
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
				  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`1`; return false;"
              >
                1
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
                  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`2`; return false;"
              >
                2
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
                  height: 70px;
                  
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`3`; return false;"
              >
                3
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
                  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`4`; return false;"
              >
                4
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
				  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`5`; return false;"
              >
                5
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
				  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`6`; return false;"
              >
                6
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
				  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`7`; return false;"
              >
                7
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
                  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`8`; return false;"
              >
                8
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
				  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`9`; return false;"
              >
                9
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
				  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value=``; return false;"
              >
                SİL
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <button
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
                  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="document.getElementById('password').value+=`0`; return false;"
              >
                0
              </button>
            </div>
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4 col-4">
              <a
                id="girisbtn"
                href="javascript:void(0)"
                id="giris"
                class="btn btn-light btn-block my-2"
                style="
                  border-radius: 3px;
                  padding-top: 20px;
                  height: 70px;
                  box-shadow: 0px 0px 6px #adadad;
                "
                onclick="giris();"
              >
                GİRİŞ
              </a>
            </div>

           
          </div>
        </form>
      </div>
    

    <!--===============================================================================================-->
    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/bootstrap/js/popper.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/select2/select2.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/tilt/tilt.jquery.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/alertifyJS/alertify.min.js"></script>
    <!--===============================================================================================-->

    <script>
      $(".js-tilt").tilt({
        scale: 1.1,
      });
    </script>
    <!--===============================================================================================-->
    <script src="js/main.js"></script>

    <script type="text/javascript">
      $(document).ready(function () {
        //if ($(window).height()>$(window).width()) window.location = "/m/index.html";

        alertify.defaults.transition = "zoom";
        alertify.defaults.theme.ok = "btn btn-success";
        alertify.defaults.theme.cancel = "btn btn-secondary";
        alertify.defaults.theme.input = "form-control";

        $("#password").focus();
      });

      function cikis() {
        alertify.confirm(
          `UYARI`,
          `Programı kapatmak istiyor musunuz?`,
          function () {
            window.close();
          },
          function () {}
        );
      }

      function giris() {
        var _password = document.getElementById("password").value;
        var _guid = "";
        if (
          localStorage.pos_userguid != "" &&
          localStorage.pos_userguid != undefined
        )
          _guid = localStorage.pos_userguid;

        $.ajax({
          async: false,
          type: "post",
          url: "https://pos.posula.com/api/pos/giris",
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify({ password: _password, guid: _guid }),
          success: function (gelenveri) {
            if (gelenveri.length > 0) {
              localStorage.pos_userno = gelenveri[0]["USERNO"];
              localStorage.pos_userguid = gelenveri[0]["Guid"];
              localStorage.pos_useryetki = gelenveri[0]["yetki"];
              localStorage.pos_password = _password;
              window.location = "pos.html";
            } else {
              localStorage.pos_userno = "";
              localStorage.pos_userguid = "";
              localStorage.pos_password = "";
              localStorage.pos_useryetki = "";
              alertify.error("Giriş bilgileri hatalı");
              document.getElementById("password").value = "";
            }
          },
          error: function (hata) {
            alertify.error("Sistem yöneticisine başvurunuz");
          },
        });
      }

      function yonetim() {
        var cihazadi = window.location.hostname;
        var bilgisayari_yeniden_baslat = "0";
        var bilgisayari_kapat = "0";
        var programi_kapat = "0";

        $.ajax({
          async: false,
          type: "post",
          url: "https://pos.posula.com/api/pos/posulaapp",
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify({
            cihazadi: cihazadi,
            bilgisayari_yeniden_baslat: bilgisayari_yeniden_baslat,
            bilgisayari_kapat: bilgisayari_kapat,
            programi_kapat: programi_kapat,
          }),
          success: function (gelenveri) {
            if (gelenveri == "OK") {
              var _password = document.getElementById("password").value;

              $.ajax({
                async: false,
                type: "post",
                url: "https://pos.posula.com/api/pos/girisyonetim",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({ password: _password }),
                success: function (gelenveri) {
                  if (gelenveri.length > 0) {
                    localStorage.pos_userno = gelenveri[0]["USERNO"];
                    localStorage.pos_password = _password;
                    window.location = "yonetim.html";
                  } else {
                    localStorage.pos_userno = "";
                    localStorage.pos_password = "";
                    alertify.error("Giriş bilgileri hatalı");
                    document.getElementById("password").value = "";
                  }
                },
                error: function (hata) {
                  alertify.error("Sistem yöneticisine başvurunuz");
                },
              });
            }
          },
          error: function (hata) {
            alertify.error("Sistem yöneticisine başvurunuz");
          },
        });
      }

      function islem(tip) {
        var cihazadi = window.location.hostname;
        var bilgisayari_yeniden_baslat = "0";
        var bilgisayari_kapat = "0";
        var programi_kapat = "0";

        if (tip == "programi_kapat") programi_kapat = "1";
        if (tip == "bilgisayari_kapat") bilgisayari_kapat = "1";

        $.ajax({
          async: false,
          type: "post",
          url: "https://pos.posula.com/api/pos/posulaapp",
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify({
            cihazadi: cihazadi,
            bilgisayari_yeniden_baslat: bilgisayari_yeniden_baslat,
            bilgisayari_kapat: bilgisayari_kapat,
            programi_kapat: programi_kapat,
          }),
          /*
				success: function (gelenveri) { 
					if (gelenveri == "OK") {
						document.getElementById("girisbtn").disabled = true;
						document.getElementById('girisbtn').removeAttribute("onclick");
						document.getElementById("yonetimbtn").disabled = true;
						document.getElementById("cikisbtn").disabled = true;
						document.getElementById("kapatbtn").disabled = true;
					}
					
                },
                error: function (hata) {
                    alertify.error("Sistem yöneticisine başvurunuz");
                }
				*/
        });
      }

      var password = document.getElementById("password");

      // Execute a function when the user presses a key on the keyboard
      password.addEventListener("keypress", function (event) {
        if ((event.keyCode == 10 || event.keyCode == 13) && event.ctrlKey) {
          event.preventDefault();
          yonetim();
        } else if (event.key === "Enter") {
          event.preventDefault();
          giris();
        }
      });
    </script>
  </body>
</html>
